/*! For license information please see 491.d5a504b3.chunk.js.LICENSE.txt */
(self.webpackChunkcontainer=self.webpackChunkcontainer||[]).push([[491],{491:e=>{!function(){var t={7187:function(e){"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,s),r(n)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,s,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var i,s,o,u;if(a(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),void 0===o)o=s[t]=n,++e._eventsCount;else if("function"==typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):p(i,i.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){r.once&&e.removeEventListener(t,i),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var u=c.length,l=p(c,u);for(n=0;n<u;++n)r(l[n],this,t)}return!0},s.prototype.addListener=function(e,t){return u(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return u(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,f(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,f(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,s,o;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},s.prototype.listenerCount=h,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},646:function(e){e.exports=function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}return function t(n,r){function i(t,i,s){if("undefined"!=typeof document){"number"==typeof(s=e({},r,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var a in s)s[a]&&(o+="; "+a,!0!==s[a]&&(o+="="+s[a].split(";")[0]));return document.cookie=t+"="+n.write(i,t)+o}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],r={},i=0;i<t.length;i++){var s=t[i].split("="),o=s.slice(1).join("=");try{var a=decodeURIComponent(s[0]);if(r[a]=n.read(o,a),e===a)break}catch(e){}}return e?r[e]:r}},remove:function(t,n){i(t,"",e({},n,{expires:-1}))},withAttributes:function(n){return t(this.converter,e({},this.attributes,n))},withConverter:function(n){return t(e({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(n)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}()},6245:function(e,t,n){"use strict";function r(e){this.message=e}n.r(t),n.d(t,{InvalidTokenError:function(){return s}}),r.prototype=new Error,r.prototype.name="InvalidCharacterError";var i="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,s=0,o=0,a="";i=t.charAt(o++);~i&&(n=s%4?64*n+i:i,s++%4)?a+=String.fromCharCode(255&n>>(-2*s&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return a};function s(e){this.message=e}s.prototype=new Error,s.prototype.name="InvalidTokenError",t.default=function(e,t){if("string"!=typeof e)throw new s("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(i(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return i(t)}}(e.split(".")[n]))}catch(e){throw new s("Invalid token specified: "+e.message)}}},9483:function(e,t,n){e.exports=function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};t[o][0].call(u.exports,(function(e){return i(t[o][1][e]||e)}),u,u.exports,e,t,n,r)}return n[o].exports}for(var s=void 0,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,r){(function(e){"use strict";var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var s=0,o=new i(l),a=e.document.createTextNode("");o.observe(a,{characterData:!0}),n=function(){a.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var c=new e.MessageChannel;c.port1.onmessage=l,n=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}t.exports=function(e){1!==u.push(e)||r||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function i(){}var s={},o=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==i&&h(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function f(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return s.reject(e,t)}r===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,r)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,s.reject(e,t))}function i(t){n||(n=!0,s.resolve(e,t))}var o=p((function(){t(i,r)}));"error"===o.status&&r(o.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}t.exports=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(i);return this.state!==c?f(n,this.state===a?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){s.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},s.resolve=function(e,t){var n=p(d,t);if("error"===n.status)return s.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=a,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},s.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:s.resolve(new this(i),e)},u.reject=function(e){var t=new this(i);return s.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),a=0,c=-1,u=new this(i);++c<n;)l(e[c],c);return u;function l(e,i){t.resolve(e).then((function(e){o[i]=e,++a!==n||r||(r=!0,s.resolve(u,o))}),(function(e){r||(r=!0,s.reject(u,e))}))}},u.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t,n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=-1,a=new this(i);++o<n;)t=e[o],this.resolve(t).then((function(e){r||(r=!0,s.resolve(a,e))}),(function(e){r||(r=!0,s.reject(a,e))}));return a}},{1:1}],3:[function(e,t,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function s(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var o=Promise;function a(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function c(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function u(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function l(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var f="local-forage-detect-blob-support",d=void 0,h={},p=Object.prototype.toString,m="readonly",v="readwrite";function y(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function g(e){return"boolean"==typeof d?o.resolve(d):function(e){return new o((function(t){var n=e.transaction(f,v),r=s([""]);n.objectStore(f).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return d=e}))}function _(e){var t=h[e.name],n={};n.promise=new o((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function b(e){var t=h[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function w(e,t){var n=h[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function k(e,t){return new o((function(n,r){if(h[e.name]=h[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);_(e),e.db.close()}var s=[e.name];t&&s.push(e.version);var o=i.open.apply(i,s);t&&(o.onupgradeneeded=function(t){var n=o.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(f)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(e){e.preventDefault(),r(o.error)},o.onsuccess=function(){var t=o.result;t.onversionchange=function(e){e.target.close()},n(t),b(e)}}))}function S(e){return k(e,!1)}function C(e){return k(e,!0)}function j(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var s=e.db.version+1;s>e.version&&(e.version=s)}return!0}return!1}function O(e){return s([y(atob(e.data))],{type:e.type})}function P(e){return e&&e.__local_forage_encoded_blob}function R(e){var t=this,n=t._initReady().then((function(){var e=h[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return c(n,e,e),n}function $(e,t,n,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return o.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),C(e)})).then((function(){return function(e){_(e);for(var t=h[e.name],n=t.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,S(e).then((function(t){return e.db=t,j(e)?C(e):t})).then((function(r){e.db=t.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(t){throw w(e,t),t}))}(e).then((function(){$(e,t,n,r-1)}))})).catch(n);n(i)}}var E={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var i=h[n.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},h[n.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=R);var s=[];function a(){return o.resolve()}for(var c=0;c<i.forages.length;c++){var u=i.forages[c];u!==t&&s.push(u._initReady().catch(a))}var l=i.forages.slice(0);return o.all(s).then((function(){return n.db=i.db,S(n)})).then((function(e){return n.db=e,j(n,t._defaultConfig.version)?C(n):e})).then((function(e){n.db=i.db=e,t._dbInfo=n;for(var r=0;r<l.length;r++){var s=l[r];s!==t&&(s._dbInfo.db=n.db,s._dbInfo.version=n.version)}}))},_support:function(){try{if(!i||!i.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=new o((function(t,r){n.ready().then((function(){$(n._dbInfo,m,(function(i,s){if(i)return r(i);try{var o=s.objectStore(n._dbInfo.storeName).openCursor(),a=1;o.onsuccess=function(){var n=o.result;if(n){var r=n.value;P(r)&&(r=O(r));var i=e(r,n.key,a++);void 0!==i?t(i):n.continue()}else t()},o.onerror=function(){r(o.error)}}catch(e){r(e)}}))})).catch(r)}));return a(r,t),r},getItem:function(e,t){var n=this;e=u(e);var r=new o((function(t,r){n.ready().then((function(){$(n._dbInfo,m,(function(i,s){if(i)return r(i);try{var o=s.objectStore(n._dbInfo.storeName).get(e);o.onsuccess=function(){var e=o.result;void 0===e&&(e=null),P(e)&&(e=O(e)),t(e)},o.onerror=function(){r(o.error)}}catch(e){r(e)}}))})).catch(r)}));return a(r,t),r},setItem:function(e,t,n){var r=this;e=u(e);var i=new o((function(n,i){var s;r.ready().then((function(){return s=r._dbInfo,"[object Blob]"===p.call(t)?g(s.db).then((function(e){return e?t:(n=t,new o((function(e,t){var r=new FileReader;r.onerror=t,r.onloadend=function(t){var r=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)})));var n})):t})).then((function(t){$(r._dbInfo,v,(function(s,o){if(s)return i(s);try{var a=o.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=a.put(t,e);o.oncomplete=function(){void 0===t&&(t=null),n(t)},o.onabort=o.onerror=function(){var e=c.error?c.error:c.transaction.error;i(e)}}catch(e){i(e)}}))})).catch(i)}));return a(i,n),i},removeItem:function(e,t){var n=this;e=u(e);var r=new o((function(t,r){n.ready().then((function(){$(n._dbInfo,v,(function(i,s){if(i)return r(i);try{var o=s.objectStore(n._dbInfo.storeName).delete(e);s.oncomplete=function(){t()},s.onerror=function(){r(o.error)},s.onabort=function(){var e=o.error?o.error:o.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return a(r,t),r},clear:function(e){var t=this,n=new o((function(e,n){t.ready().then((function(){$(t._dbInfo,v,(function(r,i){if(r)return n(r);try{var s=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=s.error?s.error:s.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return a(n,e),n},length:function(e){var t=this,n=new o((function(e,n){t.ready().then((function(){$(t._dbInfo,m,(function(r,i){if(r)return n(r);try{var s=i.objectStore(t._dbInfo.storeName).count();s.onsuccess=function(){e(s.result)},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return a(n,e),n},key:function(e,t){var n=this,r=new o((function(t,r){e<0?t(null):n.ready().then((function(){$(n._dbInfo,m,(function(i,s){if(i)return r(i);try{var o=s.objectStore(n._dbInfo.storeName),a=!1,c=o.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===e||a?t(n.key):(a=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(e){r(e)}}))})).catch(r)}));return a(r,t),r},keys:function(e){var t=this,n=new o((function(e,n){t.ready().then((function(){$(t._dbInfo,m,(function(r,i){if(r)return n(r);try{var s=i.objectStore(t._dbInfo.storeName).openKeyCursor(),o=[];s.onsuccess=function(){var t=s.result;t?(o.push(t.key),t.continue()):e(o)},s.onerror=function(){n(s.error)}}catch(e){n(e)}}))})).catch(n)}));return a(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments);var n,r=this.config();if((e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName),e.name){var s=e.name===r.name&&this._dbInfo.db?o.resolve(this._dbInfo.db):S(e).then((function(t){var n=h[e.name],r=n.forages;n.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t}));n=e.storeName?s.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;_(e);var r=h[e.name],s=r.forages;t.close();for(var a=0;a<s.length;a++){var c=s[a];c._dbInfo.db=null,c._dbInfo.version=n}var u=new o((function(t,r){var s=i.open(e.name,n);s.onerror=function(e){s.result.close(),r(e)},s.onupgradeneeded=function(){s.result.deleteObjectStore(e.storeName)},s.onsuccess=function(){var e=s.result;e.close(),t(e)}}));return u.then((function(e){r.db=e;for(var t=0;t<s.length;t++){var n=s[t];n._dbInfo.db=e,b(n._dbInfo)}})).catch((function(t){throw(w(e,t)||o.resolve()).catch((function(){})),t}))}})):s.then((function(t){_(e);var n=h[e.name],r=n.forages;t.close();for(var s=0;s<r.length;s++)r[s]._dbInfo.db=null;var a=new o((function(t,n){var r=i.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}));return a.then((function(e){n.db=e;for(var t=0;t<r.length;t++)b(r[t]._dbInfo)})).catch((function(t){throw(w(e,t)||o.resolve()).catch((function(){})),t}))}))}else n=o.reject("Invalid arguments");return a(n,t),n}},x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=/^~~local_forage_type~([^~]+)~/,A="__lfsc__:",T="arbf",D="blob",q="si08",N="ui08",B="uic8",L="si16",F="si32",M="ur16",U="ui32",z="fl32",K="fl64",W=Object.prototype.toString;function H(e){var t,n,r,i,s,o=.75*e.length,a=e.length,c=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var u=new ArrayBuffer(o),l=new Uint8Array(u);for(t=0;t<a;t+=4)n=x.indexOf(e[t]),r=x.indexOf(e[t+1]),i=x.indexOf(e[t+2]),s=x.indexOf(e[t+3]),l[c++]=n<<2|r>>4,l[c++]=(15&r)<<4|i>>2,l[c++]=(3&i)<<6|63&s;return u}function J(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=x[n[t]>>2],r+=x[(3&n[t])<<4|n[t+1]>>4],r+=x[(15&n[t+1])<<2|n[t+2]>>6],r+=x[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var V={serialize:function(e,t){var n="";if(e&&(n=W.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===W.call(e.buffer))){var r,i=A;e instanceof ArrayBuffer?(r=e,i+=T):(r=e.buffer,"[object Int8Array]"===n?i+=q:"[object Uint8Array]"===n?i+=N:"[object Uint8ClampedArray]"===n?i+=B:"[object Int16Array]"===n?i+=L:"[object Uint16Array]"===n?i+=M:"[object Int32Array]"===n?i+=F:"[object Uint32Array]"===n?i+=U:"[object Float32Array]"===n?i+=z:"[object Float64Array]"===n?i+=K:t(new Error("Failed to get type for BinaryArray"))),t(i+J(r))}else if("[object Blob]"===n){var s=new FileReader;s.onload=function(){var n="~~local_forage_type~"+e.type+"~"+J(this.result);t(A+D+n)},s.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}},deserialize:function(e){if(e.substring(0,9)!==A)return JSON.parse(e);var t,n=e.substring(13),r=e.substring(9,13);if(r===D&&I.test(n)){var i=n.match(I);t=i[1],n=n.substring(i[0].length)}var o=H(n);switch(r){case T:return o;case D:return s([o],{type:t});case q:return new Int8Array(o);case N:return new Uint8Array(o);case B:return new Uint8ClampedArray(o);case L:return new Int16Array(o);case M:return new Uint16Array(o);case F:return new Int32Array(o);case U:return new Uint32Array(o);case z:return new Float32Array(o);case K:return new Float64Array(o);default:throw new Error("Unkown type: "+r)}},stringToBuffer:H,bufferToString:J};function G(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function Q(e,t,n,r,i,s){e.executeSql(n,r,i,(function(e,o){o.code===o.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?s(e,o):G(e,t,(function(){e.executeSql(n,r,i,s)}),s)}),s):s(e,o)}),s)}function Y(e,t,n,r){var i=this;e=u(e);var s=new o((function(s,o){i.ready().then((function(){void 0===t&&(t=null);var a=t,c=i._dbInfo;c.serializer.serialize(t,(function(t,u){u?o(u):c.db.transaction((function(n){Q(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){s(a)}),(function(e,t){o(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void s(Y.apply(i,[e,a,n,r-1]));o(t)}}))}))})).catch(o)}));return a(s,n),s}var X={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new o((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(i){G(i,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=V,i},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,r=new o((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){Q(n,i,"SELECT * FROM "+i.storeName,[],(function(n,r){for(var s=r.rows,o=s.length,a=0;a<o;a++){var c=s.item(a),u=c.value;if(u&&(u=i.serializer.deserialize(u)),void 0!==(u=e(u,c.key,a+1)))return void t(u)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},getItem:function(e,t){var n=this;e=u(e);var r=new o((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){Q(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},setItem:function(e,t,n){return Y.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=u(e);var r=new o((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){Q(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},clear:function(e){var t=this,n=new o((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){Q(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,e),n},length:function(e){var t=this,n=new o((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){Q(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,e),n},key:function(e,t){var n=this,r=new o((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){Q(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return a(r,t),r},keys:function(e){var t=this,n=new o((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){Q(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return a(n,e),n},dropInstance:function(e,t){t=l.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;return a(r=e.name?new o((function(t){var r;r=e.name===n.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(function(e){return new o((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var i=[],s=0;s<r.rows.length;s++)i.push(r.rows.item(s).name);t({db:e,storeNames:i})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}(r))})).then((function(e){return new o((function(t,n){e.db.transaction((function(r){function i(e){return new o((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var s=[],a=0,c=e.storeNames.length;a<c;a++)s.push(i(e.storeNames[a]));o.all(s).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):o.reject("Invalid arguments"),t),r}};function Z(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}var ee={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=Z(e,this._defaultConfig),!function(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()||localStorage.length>0?(this._dbInfo=t,t.serializer=V,o.resolve()):o.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,s=localStorage.length,o=1,a=0;a<s;a++){var c=localStorage.key(a);if(0===c.indexOf(r)){var u=localStorage.getItem(c);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,c.substring(i),o++)))return u}}}));return a(r,t),r},getItem:function(e,t){var n=this;e=u(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return a(r,t),r},setItem:function(e,t,n){var r=this;e=u(e);var i=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new o((function(i,s){var o=r._dbInfo;o.serializer.serialize(t,(function(t,r){if(r)s(r);else try{localStorage.setItem(o.keyPrefix+e,t),i(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||s(e),s(e)}}))}))}));return a(i,n),i},removeItem:function(e,t){var n=this;e=u(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return a(r,t),r},clear:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return a(n,e),n},length:function(e){var t=this.keys().then((function(e){return e.length}));return a(t,e),t},key:function(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return a(r,t),r},keys:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var s=localStorage.key(i);0===s.indexOf(e.keyPrefix)&&r.push(s.substring(e.keyPrefix.length))}return r}));return a(n,e),n},dropInstance:function(e,t){if(t=l.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,i=this;return r=e.name?new o((function(t){e.storeName?t(Z(e,i._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):o.reject("Invalid arguments"),a(r,t),r}},te=function(e,t){for(var n=e.length,r=0;r<n;){if((i=e[r])===(s=t)||"number"==typeof i&&"number"==typeof s&&isNaN(i)&&isNaN(s))return!0;r++}var i,s;return!1},ne=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},re={},ie={},se={INDEXEDDB:E,WEBSQL:X,LOCALSTORAGE:ee},oe=[se.INDEXEDDB._driver,se.WEBSQL._driver,se.LOCALSTORAGE._driver],ae=["dropInstance"],ce=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ae),ue={description:"",driver:oe.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function le(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function fe(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(ne(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var de=function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),se)if(se.hasOwnProperty(n)){var r=se[n],i=r._driver;this[n]=i,re[i]||this.defineDriver(r)}this._defaultConfig=fe({},ue),this._config=fe({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new o((function(t,n){try{var r=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(i);for(var s=ce.concat("_initStorage"),c=0,u=s.length;c<u;c++){var l=s[c];if((!te(ae,l)||e[l])&&"function"!=typeof e[l])return void n(i)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=o.reject(t);return a(n,arguments[arguments.length-1]),n}},n=0,r=ae.length;n<r;n++){var i=ae[n];e[i]||(e[i]=t(i))}}();var f=function(n){re[r]&&console.info("Redefining LocalForage driver: "+r),re[r]=e,ie[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,n):f(!!e._support):f(!0)}catch(e){n(e)}}));return c(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=re[e]?o.resolve(re[e]):o.reject(new Error("Driver not found."));return c(r,t,n),r},e.prototype.getSerializer=function(e){var t=o.resolve(V);return c(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return c(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;ne(e)||(e=[e]);var i=this._getSupportedDrivers(e);function s(){r._config.driver=r.driver()}function a(e){return r._extend(e),s(),r._ready=r._initStorage(r._config),r._ready}var u=null!==this._driverSet?this._driverSet.catch((function(){return o.resolve()})):o.resolve();return this._driverSet=u.then((function(){var e=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,s(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(e){return function(){var t=0;return function n(){for(;t<e.length;){var i=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(i).then(a).catch(n)}s();var c=new Error("No available storage method found.");return r._driverSet=o.reject(c),r._driverSet}()}}(i)}))})).catch((function(){s();var e=new Error("No available storage method found.");return r._driverSet=o.reject(e),r._driverSet})),c(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!ie[e]},e.prototype._extend=function(e){fe(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=ce.length;e<t;e++)le(this,ce[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),he=new de;t.exports=he},{3:3}]},{},[4])(4)},4689:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ue}});var r=n(807),i=n(347),s=n(7239),o=n(2733);function a(e){for(var t,n,r,i,s=e.rev_tree.slice();i=s.pop();){var o=i.ids,a=o[2],c=i.pos;if(a.length)for(var u=0,l=a.length;u<l;u++)s.push({pos:c+1,ids:a[u]});else{var f=!!o[1].deleted,d=o[0];t&&!(r!==f?r:n!==c?n<c:t<d)||(t=d,n=c,r=f)}}return n+"-"+t}function c(e,t){for(var n,r=e.slice();n=r.pop();)for(var i=n.pos,s=n.ids,o=s[2],a=t(0===o.length,i,s[0],n.ctx,s[1]),c=0,u=o.length;c<u;c++)r.push({pos:i+1,ids:o[c],ctx:a})}function u(e,t){return e.pos-t.pos}function l(e,t){return e.pos-t.pos}function f(e,t,n){var r=function(e,t,n){for(var r,i=0,s=e.length;i<s;)n(e[r=i+s>>>1],t)<0?i=r+1:s=r;return i}(e,t,n);e.splice(r,0,t)}function d(e,t){for(var n,r,i=t,s=e.length;i<s;i++){var o=e[i],a=[o.id,o.opts,[]];r?(r[2].push(a),r=a):n=r=a}return n}function h(e,t){return e[0]<t[0]?-1:1}function p(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;n.length>0;){var i=n.pop(),s=i.tree1,o=i.tree2;(s[1].status||o[1].status)&&(s[1].status="available"===s[1].status||"available"===o[1].status?"available":"missing");for(var a=0;a<o[2].length;a++)if(s[2][0]){for(var c=!1,u=0;u<s[2].length;u++)s[2][u][0]===o[2][a][0]&&(n.push({tree1:s[2][u],tree2:o[2][a]}),c=!0);c||(r="new_branch",f(s[2],o[2][a],h))}else r="new_leaf",s[2][0]=o[2][a]}return{conflicts:r,tree:e}}function m(e,t,n){var r,i=[],s=!1,o=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var a=0,c=e.length;a<c;a++){var u=e[a];if(u.pos===t.pos&&u.ids[0]===t.ids[0])r=p(u.ids,t.ids),i.push({pos:u.pos,ids:r.tree}),s=s||r.conflicts,o=!0;else if(!0!==n){var f=u.pos<t.pos?u:t,d=u.pos<t.pos?t:u,h=d.pos-f.pos,m=[],v=[];for(v.push({ids:f.ids,diff:h,parent:null,parentIdx:null});v.length>0;){var y=v.pop();if(0!==y.diff)for(var g=y.ids[2],_=0,b=g.length;_<b;_++)v.push({ids:g[_],diff:y.diff-1,parent:y.ids,parentIdx:_});else y.ids[0]===d.ids[0]&&m.push(y)}var w=m[0];w?(r=p(w.ids,d.ids),w.parent[2][w.parentIdx]=r.tree,i.push({pos:f.pos,ids:f.ids}),s=s||r.conflicts,o=!0):i.push(u)}else i.push(u)}return o||i.push(t),i.sort(l),{tree:i,conflicts:s||"internal_node"}}function v(e,t,n){var r=m(e,t),i=function(e,t){for(var n,r,i=function(e){for(var t,n=[],r=e.slice();t=r.pop();){var i=t.pos,s=t.ids,o=s[0],a=s[1],c=s[2],u=0===c.length,l=t.history?t.history.slice():[];l.push({id:o,opts:a}),u&&n.push({pos:i+1-l.length,ids:l});for(var f=0,d=c.length;f<d;f++)r.push({pos:i+1,ids:c[f],history:l})}return n.reverse()}(e),s=0,o=i.length;s<o;s++){var a,u=i[s],l=u.ids;if(l.length>t){n||(n={});var f=l.length-t;a={pos:u.pos+f,ids:d(l,f)};for(var h=0;h<f;h++){var p=u.pos+h+"-"+l[h].id;n[p]=!0}}else a={pos:u.pos,ids:d(l,0)};r=r?m(r,a,!0).tree:[a]}return n&&c(r,(function(e,t,r){delete n[t+"-"+r]})),{tree:r,revs:n?Object.keys(n):[]}}(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function y(e,t){return e.flatMap((e=>(e=function(e,t){const n=(0,i.d9)(e),r=[n];let s;for(;s=r.pop();){const{pos:e,ids:[i,,o],parent:a}=s;if(0===o.length&&`${e}-${i}`===t)return a?(a.ids[2]=a.ids[2].filter((function(e){return e[0]!==i})),n):null;for(let t=0,n=o.length;t<n;t++)r.push({pos:e+1,ids:o[t],parent:s})}return n}(e,t),e?[e]:[])))}function g(e){return"string"==typeof e&&e.startsWith("_local/")}function _(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})}var b=_(["_id","_rev","_access","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),w=_(["_access","_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function k(e){if(!/^\d+-/.test(e))return(0,o.Tr)(o.Dq);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function S(e,t,n){var r,s,a;n||(n={deterministic_revs:!0});var c={status:"available"};if(e._deleted&&(c.deleted=!0),t)if(e._id||(e._id=(0,i.Vj)()),s=(0,i.OD)(e,n.deterministic_revs),e._rev){if((a=k(e._rev)).error)return a;e._rev_tree=[{pos:a.prefix,ids:[a.id,{status:"missing"},[[s,c,[]]]]}],r=a.prefix+1}else e._rev_tree=[{pos:1,ids:[s,c,[]]}],r=1;else if(e._revisions&&(e._rev_tree=function(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,i=[r[0],t,[]],s=1,o=r.length;s<o;s++)i=[r[s],{status:"missing"},[i]];return[{pos:n,ids:i}]}(e._revisions,c),r=e._revisions.start,s=e._revisions.ids[0]),!e._rev_tree){if((a=k(e._rev)).error)return a;r=a.prefix,s=a.id,e._rev_tree=[{pos:r,ids:[s,c,[]]}]}(0,i.GE)(e._id),e._rev=r+"-"+s;var u={metadata:{},data:{}};for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var f="_"===l[0];if(f&&!b[l]){var d=(0,o.Tr)(o.cI,l);throw d.message=o.cI.message+": "+l,d}f&&!w[l]?u.metadata[l.slice(1)]=e[l]:u.data[l]=e[l]}return u}const C=Number.MIN_SAFE_INTEGER,j=Number.MIN_SAFE_INTEGER+1,O=Number.MIN_SAFE_INTEGER+2,P=/^[^a-zA-Z$]|[^a-zA-Z0-9$]+/,R=new RegExp(P.source,"g"),$=new RegExp(/\\.|(^|\.)[^a-zA-Z$]|[^a-zA-Z0-9$.]+/.source,"g"),E="\\".charCodeAt(0),x=".".charCodeAt(0);function I(e,t){const n=function(e){let n="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(i===x&&t&&0===r)n+=".";else{if(i===E&&t)continue;n+="_c"+i+"_"}}return n};return t?e.replace($,n):e.replace(R,n)}function A(e){for(const n of Object.keys(e)){if(t=n,P.test(t))return!0;if(null===e[n]||"boolean"==typeof e[n])return!0;if("object"==typeof e[n])return A(e[n])}var t}function T(e){if(!A(e))return!1;const t=Array.isArray(e),n=t?[]:{};return Object.keys(e).forEach((function(r){const i=t?r:I(r);null===e[r]?n[i]=C:"boolean"==typeof e[r]?n[i]=e[r]?O:j:"object"==typeof e[r]?n[i]=T(e[r]):n[i]=e[r]})),n}const D="docs",q="meta";function N(e){return function(t){let n="unknown_error";t.target&&t.target.error&&(n=t.target.error.name||t.target.error.message),e((0,o.Tr)(o.cG,n,t.type))}}function B(e,t,n,i,s){if(delete n._attachments[e].stub,"base64"===s){if(i){const i=t.attachments[n._attachments[e].digest];n._attachments[e].data=(0,r.W7)(i.data,i.content_type)}else n._attachments[e].data=t.attachments[n._attachments[e].digest].data;return delete n._attachments[e].length,Promise.resolve()}return i?(n._attachments[e].data=t.attachments[n._attachments[e].digest].data,Promise.resolve()):new Promise((function(i){const s=t.attachments[n._attachments[e].digest].data;(0,r.fM)(s,(function(t){n._attachments[e].data=(0,r.r3)(t),delete n._attachments[e].length,i()}))}))}function L(e,t){return(e.views[t].options&&e.views[t].options.def&&e.views[t].options.def.fields||[]).map((function(e){return"string"==typeof e?e:Object.keys(e)[0]}))}function F(e){return"_find_idx/"+e.join("/")}const M=Math.pow(10,13);function U(e,t,n,s,o){const a=n.versionChangedWhileOpen?indexedDB.open(n.name):indexedDB.open(n.name,2*M+(new Date).getTime());a.onupgradeneeded=function(e){if(e.oldVersion>0&&e.oldVersion<M)throw new Error('Incorrect adapter: you should specify the "idb" adapter to open this DB');if(0===e.oldVersion&&e.newVersion<M)throw indexedDB.deleteDatabase(n.name),new Error("Database was deleted while open");const t=e.target.transaction,r=e.target.result,i=(s=e.oldVersion,Math.floor(s/M));var s;if(function(e,t,n,r){if(r<1&&(t.createObjectStore(D,{keyPath:"id"}).createIndex("seq","seq",{unique:!0}),t.createObjectStore(q,{keyPath:"id"})),r<2){const t=n.objectStore(D);t.createIndex("deleted,id",["deleted","id"],{unique:!0}),e.includes("-mrview-")&&t.deleteIndex("seq")}}(n.name,r,t,i),function(e,t){const n=e.transaction.objectStore(D);n.getAll(IDBKeyRange.bound("_design/","_design/ï¿¿")).onsuccess=function(e){const r=e.target.result,i=Array.from(n.indexNames),s=r.filter((function(e){return 0===e.deleted&&e.revs[e.rev].data.views})).map((function(e){return e.revs[e.rev].data})).reduce((function(e,t){return Object.keys(t.views).reduce((function(e,n){const r=L(t,n);return r&&r.length>0&&(e[F(r)]=function(e){return["deleted"].concat(e.map((function(e){return["_id","_rev","_deleted","_attachments"].includes(e)?e.substr(1):"data."+I(e,!0)})))}(r)),e}),e)}),{}),o=Object.keys(s),a=["seq","deleted,id"];i.forEach((function(e){-1===a.indexOf(e)&&-1===o.indexOf(e)&&n.deleteIndex(e)}));const c=o.filter((function(e){return-1===i.indexOf(e)}));try{c.forEach((function(e){n.createIndex(e,s[e])}))}catch(e){t(e)}}}(a,o),i<2){const e=a.transaction.objectStore(D),t=a.transaction.objectStore(q);e.openCursor().onsuccess=e=>{const n=e.target.result;if(!n)return;const r=n.value;if(!g(r.id))return n.continue();t.put(r).onsuccess=()=>{n.delete(r).onsuccess=()=>{n.continue()}}}}},a.onblocked=function(e){console.error("onblocked, this should never happen",e)},a.onsuccess=function(o){const a=o.target.result;a.onabort=function(t){console.error("Database has a global failure",t.target.error),delete e[n.name],a.close()},a.onversionchange=function(){console.log("Database was made stale, closing handle"),e[n.name].versionChangedWhileOpen=!0,a.close()},a.onclose=function(){console.log("Database was made stale, closing handle"),n.name in e&&(e[n.name].versionChangedWhileOpen=!0)};let c={id:q};const u=a.transaction([q],"readwrite");u.oncomplete=function(){s({idb:a,metadata:c})};const l=u.objectStore(q);l.get(q).onsuccess=function(e){c=e.target.result||c;let n=!1;"doc_count"in c||(n=!0,c.doc_count=0),"seq"in c||(n=!0,c.seq=0),"db_uuid"in c||(n=!0,c.db_uuid=(0,i.Vj)()),"idb_attachment_format"in c?n&&(t.blobSupport=c.idb_attachment_format,l.put(c)):function(e,t){return new Promise((function(n){var i=(0,r.Ik)([""]);let s;{const n=(e=>({id:"blob-support",blob:e}))(i);s=e.objectStore(t).put(n)}s.onsuccess=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);n(t||!e||parseInt(e[1],10)>=43)},s.onerror=e.onabort=function(e){e.preventDefault(),e.stopPropagation(),n(!1)}})).catch((function(){return!1}))}(u,q).then((e=>{t.blobSupport=c.idb_attachment_format=e?"binary":"base64",l.put(c)}))}},a.onerror=function(e){o(e.target.error)}}function z(e,t,n){return e[n.name]&&!e[n.name].versionChangedWhileOpen||(n.versionChangedWhileOpen=e[n.name]&&e[n.name].versionChangedWhileOpen,e[n.name]=new Promise((function(r,i){U(e,t,n,r,i)}))),e[n.name]}function K(e,t,n,r){if(e.error)return r(e.error);e.txn.objectStore(D).get(t).onsuccess=function(t){const i=t.target.result;let s;if(s=n.rev?n.latest?function(e,t){for(var n,r=t.rev_tree.slice();n=r.pop();){var i=n.pos,s=n.ids,o=s[0],a=s[1],c=s[2],u=0===c.length,l=n.history?n.history.slice():[];if(l.push({id:o,pos:i,opts:a}),u)for(var f=0,d=l.length;f<d;f++){var h=l[f];if(h.pos+"-"+h.id===e)return i+"-"+o}for(var p=0,m=c.length;p<m;p++)r.push({pos:i+1,ids:c[p],history:l})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}(n.rev,i):n.rev:i&&i.rev,!i||i.deleted&&!n.rev||!(s in i.revs))return void r((0,o.Tr)(o.Uc,"missing"));const a=i.revs[s].data;a._id=i.id,a._rev=s,r(null,{doc:a,metadata:i,ctx:e})}}function W(e,t,n,i,s){if(g(e))return void s((0,o.Tr)(o.Uc,"missing"));const a=i.metadata.attachments[n.digest].data;if("string"!=typeof a)return i.binary?s(null,a):void(0,r.fM)(a,(function(e){s(null,(0,r.r3)(e))}));i.binary?s(null,(0,r.W7)(a,n.content_type)):s(null,a)}function H(e,t,n,i,u,l,f){let d,h;const p=[],m=[];let y;const _=u.revs_limit||1e3,b=-1===u.name.indexOf("-mrview-"),w=u.auto_compaction;function k(e){return g(e.id)?1:_}function C(e,t,n){return e.revs[t]&&e.revs[t].data._attachments&&Object.values(e.revs[t].data._attachments).find((function(e){return e.digest===n}))}function j(e){const t={id:e.metadata.id,rev:e.metadata.rev,rev_tree:e.metadata.rev_tree,revs:e.metadata.revs||{}};return t.revs[t.rev]={data:e.data,deleted:e.metadata.deleted},t}function O(e){e===y&&d.objectStore(q).put(i)}for(let r=0,i=t.docs.length;r<i;r++){let i;try{i=S(t.docs[r],n.new_edits,u)}catch(e){i=e}if(i.error)return f(i);m.push(j(i))}(function(){const e=m.map((function(e){const t=e.revs[e.rev].data;if(!t._attachments)return Promise.resolve(t);const n=Object.keys(t._attachments).map((function(e){return t._attachments[e].name=e,function(e){if(e.stub)return Promise.resolve(e);let t;if("string"==typeof e.data){try{t=(0,r.ty)(e.data)}catch(e){return Promise.reject((0,o.Tr)(o.eC,"Attachment is not a valid base64 string"))}"binary"===i.idb_attachment_format&&(e.data=(0,r.sG)(t,e.content_type))}else if(t=e.data,"base64"===i.idb_attachment_format)return new Promise((n=>{(0,r.Tn)(e.data,(function(r){e.data=r,(0,s.u)(t,(function(r){e.digest="md5-"+r,e.length=t.size||t.length||0,n(e)}))}))}));return new Promise((function(n){(0,s.u)(t,(function(r){e.digest="md5-"+r,e.length=t.size||t.length||0,n(e)}))}))}(t._attachments[e])}));return Promise.all(n).then((function(e){const n={};return e.forEach((function(e){n[e.name]=e,delete e.name})),t._attachments=n,t}))}));return Promise.all(e)})().then((function(){e._openTransactionSafely([D,q],"readwrite",(function(e,t){if(e)return f(e);d=t,d.onabort=function(){f(h||(0,o.Tr)(o.I4,"transaction was aborted"))},d.ontimeout=N(f),d.oncomplete=function(){l.notify(u.name),f(null,p)},function(e,t){let r=0;const s={};function l(l){l.target.result&&(s[l.target.result.id]=l.target.result),++r===t.length&&function(e,t,r){t.forEach((function(t,s){let l;if("was_delete"in n&&!Object.prototype.hasOwnProperty.call(r,t.id))l=(0,o.Tr)(o.Uc,"deleted");else if(n.new_edits&&!Object.prototype.hasOwnProperty.call(r,t.id)&&function(e){return"missing"===e.rev_tree[0].ids[1].status}(t))l=(0,o.Tr)(o.gW);else if(Object.prototype.hasOwnProperty.call(r,t.id)){if(l=function(e,t,r){if(t.rev in r.revs&&!n.new_edits)return!1;const i=/^1-/.test(t.rev);if(r.deleted&&!t.deleted&&n.new_edits&&i){const e=t.revs[t.rev].data;e._rev=r.rev,e._id=r.id,t=j(S(e,n.new_edits,u))}const s=v(r.rev_tree,t.rev_tree[0],k(t));t.stemmedRevs=s.stemmedRevs,t.rev_tree=s.tree;const a=r.revs;return a[t.rev]=t.revs[t.rev],t.revs=a,t.attachments=r.attachments,n.new_edits&&(r.deleted&&t.deleted||!r.deleted&&"new_leaf"!==s.conflicts||r.deleted&&!t.deleted&&"new_branch"===s.conflicts||r.rev===t.rev)?(0,o.Tr)(o.gW):(t.wasDeleted=r.deleted,t)}(0,t,r[t.id]),0==l)return}else{const e=v([],t.rev_tree[0],k(t));t.rev_tree=e.tree,t.stemmedRevs=e.stemmedRevs,l=t,l.isNewDoc=!0,l.wasDeleted=t.revs[t.rev].deleted?1:0}l.error?p[s]=l:(r[l.id]=l,y=s,function(e,t,n){const r=a(t),s=t.rev,u=g(t.id),l=t.revs[r].data,f=t.isNewDoc;if(b){const e=T(l);e?(t.data=e,delete t.data._attachments):t.data=l}else t.data=l;if(t.rev=r,t.deleted=t.revs[r].deleted?1:0,!u){t.seq=++i.seq;let e=0;t.isNewDoc?e=t.deleted?0:1:t.wasDeleted!==t.deleted&&(e=t.deleted?-1:1),i.doc_count+=e}delete t.isNewDoc,delete t.wasDeleted;let d=t.stemmedRevs||[];if(w&&!f){const e=function(e){var t=[];return c(e.rev_tree,(function(e,n,r,i,s){"available"!==s.status||e||(t.push(n+"-"+r),s.status="missing")})),t}(t);e.length&&(d=d.concat(e))}if(d.length&&d.forEach((function(e){delete t.revs[e]})),delete t.stemmedRevs,"attachments"in t||(t.attachments={}),l._attachments)for(const n in l._attachments){const r=l._attachments[n];if(r.stub){if(!(r.digest in t.attachments))return h=(0,o.Tr)(o.wp),void e.abort();C(t,s,r.digest)&&(t.attachments[r.digest].revs[s]=!0)}else t.attachments[r.digest]=r,t.attachments[r.digest].revs={},t.attachments[r.digest].revs[s]=!0,l._attachments[n]={stub:!0,digest:r.digest,content_type:r.content_type,length:r.length,revpos:parseInt(s,10)}}if(u&&t.deleted)return e.objectStore(q).delete(t.id).onsuccess=function(){p[n]={ok:!0,id:t.id,rev:"0-0"}},void O(n);const m=u?q:D;e.objectStore(m).put(t).onsuccess=function(){p[n]={ok:!0,id:t.id,rev:s},O(n)}}(e,l,s))}))}(e,t,s)}t.forEach((function(t){const n=g(t.id)?q:D;e.objectStore(n).get(t.id).onsuccess=l}))}(d,m)}))})).catch((function(e){f(e)}))}function J(e,t,n,r,i,s){try{return i?IDBKeyRange.only([0,i]):s?IDBKeyRange.bound(t,e,!r,!n):IDBKeyRange.bound(e,t,!n,!r)}catch(e){return{error:e}}}function V(e,t,n,r){if("DataError"===n.name&&0===n.code){const n={total_rows:t.doc_count,offset:e.skip,rows:[]};return e.update_seq&&(n.update_seq=t.seq),r(null,n)}r((0,o.Tr)(o.cG,n.name,n.message))}function G(e,t,n,r){if(e.error)return r(e.error);if(0===n.limit){const e={total_rows:t.doc_count,offset:n.skip,rows:[]};return n.update_seq&&(e.update_seq=t.seq),r(null,e)}const i=[],s=[],o="key"in n&&n.key,l="keys"in n&&n.keys;let f=n.skip||0,d="number"==typeof n.limit?n.limit:void 0;const h=!1!==n.inclusive_end,p="descending"in n&&n.descending?"prev":null,m="startkey"in n?n.startkey:p?"ï¿¿":"",v="endkey"in n?n.endkey:p?"":"ï¿¿",y=e.txn.objectStore(D);if(l)return e.txn.oncomplete=b,function(e,t){const r=new Array(e.length);let s=0;e.forEach((function(o,a){t.get(o).onsuccess=function(t){t.target.result?r[a]=t.target.result:r[a]={key:o,error:"not_found"},s++,s===e.length&&r.forEach((function(e){(e=>{if(e.error)return i.push(e);const t={id:e.id,key:e.id,value:{rev:e.rev}};e.deleted?(t.value.deleted=!0,t.doc=null):n.include_docs&&_(t,e),i.push(t)})(e)}))}}))}(l,y);let g=J([0,m],[0,v],!0,h,o,p);if(g.error)return V(n,t,g.error,r);function _(e,r){const i=r.revs[r.rev].data;if(e.doc=i,e.doc._id=r.id,e.doc._rev=r.rev,n.conflicts){const t=function(e){for(var t=a(e),n=function(e){var t=[];c(e,(function(e,n,r,i,s){e&&t.push({rev:n+"-"+r,pos:n,opts:s})})),t.sort(u).reverse();for(var n=0,r=t.length;n<r;n++)delete t[n].pos;return t}(e.rev_tree),r=[],i=0,s=n.length;i<s;i++){var o=n[i];o.rev===t||o.opts.deleted||r.push(o.rev)}return r}(r);t.length&&(e.doc._conflicts=t)}if(n.attachments&&i._attachments)for(const o in i._attachments)s.push(B(o,r,e.doc,n.binary,t.idb_attachment_format))}function b(){const e={total_rows:t.doc_count,offset:0,rows:i};n.update_seq&&(e.update_seq=t.seq),s.length?Promise.all(s).then((function(){r(null,e)})):r(null,e)}e.txn.oncomplete=b;const w=y.index("deleted,id");if(f||d){let i,s=d>0;w.openKeyCursor(g,p||"next").onsuccess=a=>{const c=a.target.result;if(f)return c?(c.advance(f),void(f=0)):e.txn.commit();if(void 0===i&&(i=c&&c.key,!i))return e.txn.commit();if(d){if(d>1&&c)return c.advance(d-1),void(d=void 0);d=void 0}if(s&&(s=c&&c.key),s||(s=p?g.lower:g.upper),g=J(i,s,!0,h,o,p),g.error)return e.txn.abort(),V(n,t,g.error,r);k()}}else k();async function k(){let t=g;do{t=await r(t)}while(t);return p&&i.reverse(),e.txn.commit();function r(e){return new Promise((t=>{w.getAll(e,100).onsuccess=r=>{const s=r.target.result;for(let e=0;e<s.length;++e){const t=s[e],r={id:t.id,key:t.id,value:{rev:t.rev}};n.include_docs&&_(r,t),i.push(r)}if(s.length>=100){const n=[0,s[s.length-1].id],r=p?e.upper:n,i=p?n:e.upper;if(r[1]!==i[1])return t(J(r,i,!!p,!p&&h,o,p))}return t()}}))}}}function Q(e,t,n){if(e.error)return n(e.error);e.txn.objectStore(D).get(t).onsuccess=function(e){e.target.result?n(null,e.target.result.rev_tree):n((0,o.Tr)(o.Uc))}}function Y(e,t,n,r){if(e.error)return r(e.error);const i=e.txn.objectStore(D);i.get(t).onsuccess=function(e){const t=e.target.result;c(t.rev_tree,(function(e,t,r,i,s){const o=t+"-"+r;-1!==n.indexOf(o)&&(s.status="missing")}));const r=[];n.forEach((function(e){if(e in t.revs){if(t.revs[e].data._attachments)for(const n in t.revs[e].data._attachments)r.push(t.revs[e].data._attachments[n].digest);delete t.revs[e]}})),r.forEach((function(e){n.forEach((function(n){delete t.attachments[e].revs[n]})),Object.keys(t.attachments[e].revs).length||delete t.attachments[e]})),i.put(t)},e.txn.oncomplete=function(){r()}}const X=Number.NEGATIVE_INFINITY,Z=[[[[[[[[[[[[]]]]]]]]]]]];function ee(e){const t=e.revs[e.rev].data;return t._id=e.id,t._rev=e.rev,e.deleted&&(t._deleted=!0),t}function te(e,t,n){const r=F(t);return new Promise((function(i){e._openTransactionSafely([D],"readonly",(function(s,o){if(s)return N(n)(s);o.onabort=N(n),o.ontimeout=N(n),-1===Array.from(o.objectStore(D).indexNames).indexOf(r)?e._freshen().then((function(){return te(e,t,n)})).then(i):i(o.objectStore(D).index(r))}))}))}function ne(e,t,n,r){const i=this,s=t.split("/");return new Promise((function(e,o){i.get("_design/"+s[0]).then((function(a){if(function(e,t){return t in e.views&&e.views[t].options&&e.views[t].options.def&&e.views[t].options.def.partial_filter_selector}(a,s[1]))return r(t,n).then(e,o);const c=L(a,s[1]);if(!c)throw new Error("ddoc "+a._id+" with view "+s[1]+" does not have map.options.def.fields defined.");let u=n.skip,l=Number.isInteger(n.limit)&&n.limit;return te(i,c,o).then((function(t){const r=function(e){function t(e,t){return void 0!==e[t]}function n(e,t){return[0].concat(e).map((function(e){if(null===e&&t)return C;if(!0===e)return O;if(!1===e)return j;if(!t){if(null===e)return X;if(Object.prototype.hasOwnProperty.call(e,"ï¿¿"))return Z}return e}))}if(t(e,"inclusive_end")||(e.inclusive_end=!0),t(e,"inclusive_start")||(e.inclusive_start=!0),e.descending){const t=e.startkey,n=e.inclusive_start;e.startkey=e.endkey,e.endkey=t,e.inclusive_start=e.inclusive_end,e.inclusive_end=n}try{return t(e,"key")?IDBKeyRange.only(n(e.key,!0)):t(e,"startkey")&&!t(e,"endkey")?IDBKeyRange.bound(n(e.startkey),[1],!e.inclusive_start,!0):!t(e,"startkey")&&t(e,"endkey")?IDBKeyRange.upperBound(n(e.endkey),!e.inclusive_end):t(e,"startkey")&&t(e,"endkey")?IDBKeyRange.bound(n(e.startkey),n(e.endkey),!e.inclusive_start,!e.inclusive_end):IDBKeyRange.only([0])}catch(t){throw console.error("Could not generate keyRange",t,e),Error("Could not generate key range with "+JSON.stringify(e))}}(n),i=t.openCursor(r,n.descending?"prev":"next"),s=[];i.onerror=N(o),i.onsuccess=function(t){const n=t.target.result;return n&&0!==l?u?(n.advance(u),void(u=!1)):(l&&(l-=1),s.push({doc:ee(n.value)}),void n.continue()):e({rows:s})}}))})).catch(o)}))}function re(e,t){return t()}function ie(e,t,n,r){if(e.error)return r(e.error);const i=e.txn.objectStore(D),s=[];let o=!1;i.get(t).onsuccess=e=>{const t=e.target.result;for(const e of n)t.rev_tree=y(t.rev_tree,e),delete t.revs[e],s.push(e);if(0===t.rev_tree.length)return i.delete(t.id),void(o=!0);t.rev=a(t),t.data=t.revs[t.rev].data,t.attachments=function(e,t){if(!e.attachments)return{};for(let n in e.attachments){const r=e.attachments[n];for(let e of t)r.revs[e]&&delete r.revs[e];0===Object.keys(r.revs).length&&delete e.attachments[n]}return e.attachments}(t,n),i.put(t)},e.txn.oncomplete=function(){r(null,{ok:!0,deletedRevs:s,documentWasRemovedCompletely:o})}}const se="indexeddb",oe=new i.b6,ae={};function ce(e,t){e.view_adapter&&console.log("Please note that the indexeddb adapter manages _find indexes itself, therefore it is not using your specified view_adapter");const n=this;let r={};const s=function(t){return function(){const i=Array.prototype.slice.call(arguments);z(ae,n,e).then((function(e){r=e.metadata,i.unshift(e.idb),t.apply(n,i)})).catch((function(e){const t=i.pop();"function"==typeof t?t(e):console.error(e)}))}},a=function(t){return function(){const i=Array.prototype.slice.call(arguments);return z(ae,n,e).then((function(e){return r=e.metadata,i.unshift(e.idb),t.apply(n,i)}))}},c=function(t,i,s){return s=s||"readonly",function(){const o=Array.prototype.slice.call(arguments),a={};z(ae,n,e).then((function(e){r=e.metadata,a.txn=e.idb.transaction(i,s)})).catch((function(e){console.error("Failed to establish transaction safely"),console.error(e),a.error=e})).then((function(){o.unshift(a),t.apply(n,o)}))}};n._openTransactionSafely=function(e,t,n){c((function(e,t){t(e.error,e.txn)}),e,t)(n)},n._remote=!1,n.type=function(){return se},n._id=s((function(e,t){t(null,r.db_uuid)})),n._info=s((function(e,t){return function(e,t){t(null,{doc_count:e.doc_count,update_seq:e.seq})}(r,t)})),n._get=c(K,[D]),n._getLocal=c((function(e,t,r){return function(e,t,n,r){if(e.error)return r(e.error);e.txn.objectStore(q).get(t).onsuccess=function(e){const t=e.target.result;if(!t)return void r((0,o.Tr)(o.Uc,"missing"));const i=t.revs[t.rev].data;if(i._id=t.id,i._rev=t.rev,i._attachments){const e=[];for(const r in i._attachments)e.push(B(r,t,i,!1,n.blobSupport));Promise.all(e).then((()=>r(null,i))).catch(r)}else r(null,i)}}(e,t,n,r)}),[q]),n._bulkDocs=s((function(t,i,s,o){H(n,i,s,r,e,oe,o)})),n._allDocs=c((function(e,t,n){G(e,r,t,n)}),[D]),n._getAttachment=W,n._changes=c((function(t,r){!function(e,t,n,r,s){if(e.error)return s.complete(e.error);if(s.continuous){const e=r.name+":"+(0,i.Vj)();return t.addListener(r.name,e,n,s),t.notify(r.name),{cancel:function(){t.removeListener(r.name,e)}}}let o="limit"in s?s.limit:-1;0===o&&(o=1);const a=e.txn.objectStore(D).index("seq"),c=(0,i.sP)(s);let u=0,l=s.since||0;const f=[],d=[];let h;h=s.descending?a.openCursor(null,"prev"):a.openCursor(IDBKeyRange.lowerBound(s.since,!0)),e.txn.oncomplete=function(){Promise.all(d).then((function(){s.complete(null,{results:f,last_seq:l})}))},h.onsuccess=function(e){if(!e.target.result)return;const t=e.target.result,r=t.value;if(r.data=r.revs[r.rev].data,r.data._id=r.id,r.data._rev=r.rev,r.deleted&&(r.data._deleted=!0),s.doc_ids&&-1===s.doc_ids.indexOf(r.id))return t.continue();const i=s.processChange(r.data,r,s);i.seq=r.seq,l=r.seq;const a=c(i);if("object"==typeof a)return s.complete(a);if(a)if(u++,s.return_docs&&f.push(i),s.include_docs&&s.attachments&&r.data._attachments){const e=[];for(const t in r.data._attachments){const o=B(t,r,i.doc,s.binary,n.blobSupport);e.push(o),d.push(o)}Promise.all(e).then((function(){s.onChange(i)}))}else s.onChange(i);u!==o&&t.continue()}}(t,oe,n,e,r)}),[D]),n._getRevisionTree=c(Q,[D]),n._doCompaction=c(Y,[D],"readwrite"),n._customFindAbstractMapper={query:a(ne),viewCleanup:a(re)},n._destroy=function(t,n){return function(e,t,n,r){function i(){indexedDB.deleteDatabase(e.name).onsuccess=function(){delete t[e.name],r(null,{ok:!0})}}n.removeAllListeners(e.name),e.name in t?t[e.name].then((function(e){e.idb.close(),i()})):i()}(e,ae,oe,n)},n._close=s((function(t,n){delete ae[e.name],t.close(),n()})),n._freshen=function(){return new Promise((function(e){n._close((function(){s(e)()}))}))},n._purge=c(ie,[D],"readwrite"),setTimeout((function(){t(null,n)}))}ce.valid=function(){return!0};var ue=function(e){e.adapter(se,ce,!0)}},807:function(e,t,n){"use strict";n.d(t,{Ik:function(){return s},LX:function(){return f},Tn:function(){return l},W7:function(){return c},fM:function(){return u},r3:function(){return i},sG:function(){return a},ty:function(){return r}});var r=function(e){return atob(e)},i=function(e){return btoa(e)};function s(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}function o(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function a(e,t){return s([o(e)],{type:t})}function c(e,t){return a(r(e),t)}function u(e,t){var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(e){var n=e.target.result||"";if(r)return t(n);t(function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return t}(n))},r?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}function l(e,t){!function(e,t){u(e,(function(e){t(e)}))}(e,(function(e){t(i(e))}))}function f(e,t){var n=new FileReader;n.onloadend=function(e){var n=e.target.result||new ArrayBuffer(0);t(n)},n.readAsArrayBuffer(e)}},2733:function(e,t,n){"use strict";n.d(t,{Dq:function(){return p},G3:function(){return y},I4:function(){return u},JE:function(){return o},Tr:function(){return v},Uc:function(){return i},Xt:function(){return a},cG:function(){return h},cI:function(){return f},eC:function(){return l},gW:function(){return s},wp:function(){return m},y3:function(){return d},zG:function(){return c}});class r extends Error{constructor(e,t,n){super(),this.status=e,this.name=t,this.message=n,this.error=!0}toString(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})}}new r(401,"unauthorized","Name or password is incorrect."),new r(400,"bad_request","Missing JSON list of 'docs'");var i=new r(404,"not_found","missing"),s=new r(409,"conflict","Document update conflict"),o=new r(400,"bad_request","_id field must contain a string"),a=new r(412,"missing_id","_id is required for puts"),c=new r(400,"bad_request","Only reserved document ids may start with underscore."),u=(new r(412,"precondition_failed","Database not open"),new r(500,"unknown_error","Database encountered an unknown error")),l=new r(500,"badarg","Some query argument is invalid"),f=(new r(400,"invalid_request","Request was invalid"),new r(400,"query_parse_error","Some query parameter is invalid"),new r(500,"doc_validation","Bad special document member")),d=new r(400,"bad_request","Something wrong with the request"),h=(new r(400,"bad_request","Document must be a JSON object"),new r(404,"not_found","Database not found"),new r(500,"indexed_db_went_bad","unknown")),p=(new r(500,"web_sql_went_bad","unknown"),new r(500,"levelDB_went_went_bad","unknown"),new r(403,"forbidden","Forbidden by design doc validate_doc_update function"),new r(400,"bad_request","Invalid rev format")),m=(new r(412,"file_exists","The database could not be created, the file already exists."),new r(412,"missing_stub","A pre-existing attachment stub wasn't found"));function v(e,t){function n(t){for(var n=Object.getOwnPropertyNames(e),r=0,i=n.length;r<i;r++)"function"!=typeof e[n[r]]&&(this[n[r]]=e[n[r]]);void 0===this.stack&&(this.stack=(new Error).stack),void 0!==t&&(this.reason=t)}return n.prototype=r.prototype,new n(t)}function y(e){if("object"!=typeof e){var t=e;(e=u).data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),"stack"in e||(e.stack=(new Error).stack),e}new r(413,"invalid_url","Provided URL is invalid")},3996:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Be}});var r=n(2733),i=Headers,s=n(807);function o(e,t){if(e===t)return 0;e=a(e),t=a(t);var n=f(e),r=f(t);if(n-r!=0)return n-r;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return function(e,t){return e===t?0:e>t?1:-1}(e,t)}return Array.isArray(e)?function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=o(e[r],t[r]);if(0!==i)return i}return e.length===t.length?0:e.length>t.length?1:-1}(e,t):function(e,t){for(var n=Object.keys(e),r=Object.keys(t),i=Math.min(n.length,r.length),s=0;s<i;s++){var a=o(n[s],r[s]);if(0!==a)return a;if(0!==(a=o(e[n[s]],t[r[s]])))return a}return n.length===r.length?0:n.length>r.length?1:-1}(e,t)}function a(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=a(t[r])}else{if(e instanceof Date)return e.toJSON();if(null!==e)for(var i in e={},t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=t[i];void 0!==s&&(e[i]=a(s))}}}return e}function c(e){return f(e=a(e))+""+function(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return function(e){if(0===e)return"1";var t,n=e.toExponential().split(/e\+?/),r=parseInt(n[1],10),i=e<0,s=i?"0":"2",o=function(e){for(var t="",n=3-e.length;t.length<n;)t+="0";return t}(t=((i?-r:r)- -324).toString())+t;s+=""+o;var a=Math.abs(parseFloat(n[0]));i&&(a=10-a);var c=a.toFixed(20);return s+""+c.replace(/\.?0+$/,"")}(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,s="";if(t)for(;++r<i;)s+=c(n[r]);else for(;++r<i;){var o=n[r];s+=c(o)+c(e[o])}return s}return""}(e)+"\0"}function u(e,t){var n,r=t;if("1"===e[t])n=0,t++;else{var i="0"===e[t];t++;var s="",o=e.substring(t,t+3),a=parseInt(o,10)+-324;for(i&&(a=-a),t+=3;;){var c=e[t];if("\0"===c)break;s+=c,t++}n=1===(s=s.split(".")).length?parseInt(s,10):parseFloat(s[0]+"."+s[1]),i&&(n-=10),0!==a&&(n=parseFloat(n+"e"+a))}return{num:n,length:t-r}}function l(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,s=r.index;Array.isArray(i)?i.push(n):s===e.length-2?i[e.pop()]=n:e.push(n)}}function f(e){var t=["boolean","number","string","object"].indexOf(typeof e);return~t?null===e?1:Array.isArray(e)?5:t<3?t+2:t+3:Array.isArray(e)?5:void 0}var d=n(347),h=n(7239);class p extends Error{constructor(e){super(),this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,p)}catch(e){}}}class m extends Error{constructor(e){super(),this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,m)}catch(e){}}}class v extends Error{constructor(e){super(),this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,v)}catch(e){}}}function y(e,t){return t&&e.then((function(e){(0,d.Y3)((function(){t(null,e)}))}),(function(e){(0,d.Y3)((function(){t(e)}))})),e}function g(e,t){return function(){var n=arguments,r=this;return e.add((function(){return t.apply(r,n)}))}}function _(e){var t=new Set(e),n=new Array(t.size),r=-1;return t.forEach((function(e){n[++r]=e})),n}function b(e){var t=new Array(e.size),n=-1;return e.forEach((function(e,r){t[++n]=r})),t}class w{constructor(){this.promise=Promise.resolve()}add(e){return this.promise=this.promise.catch((()=>{})).then((()=>e())),this.promise}finish(){return this.promise}}function k(e){if(!e)return"undefined";switch(typeof e){case"function":case"string":return e.toString();default:return JSON.stringify(e)}}async function S(e,t,n,r,i,s){const o=function(e,t){return k(e)+k(t)+"undefined"}(n,r);let a;if(!i&&(a=e._cachedViews=e._cachedViews||{},a[o]))return a[o];const c=e.info().then((async function(c){const u=c.db_name+"-mrview-"+(i?"temp":(0,h.$)(o));await(0,d.H)(e,"_local/"+s,(function(e){e.views=e.views||{};let n=t;-1===n.indexOf("/")&&(n=t+"/"+t);const r=e.views[n]=e.views[n]||{};if(!r[u])return r[u]=!0,e}));const l=(await e.registerDependentDatabase(u)).db;l.auto_compaction=!0;const f={name:u,db:l,sourceDB:e,adapter:e.adapter,mapFun:n,reduceFun:r};let p;try{p=await f.db.get("_local/lastSeq")}catch(e){if(404!==e.status)throw e}return f.seq=p?p.seq:0,a&&f.db.once("destroyed",(function(){delete a[o]})),f}));return a&&(a[o]=c),c}const C={},j=new w;function O(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function P(e,t,n){try{e.emit("error",t)}catch(e){(0,d.yq)("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),(0,d.yq)("error",t,n)}}function R(e,t){for(var n=e,r=0,i=t.length;r<i&&(n=n[t[r]]);r++);return n}function $(e,t,n){for(var r=0,i=t.length;r<i-1;r++){var s=t[r];e=e[s]=e[s]||{}}e[t[i-1]]=n}function E(e,t){return e<t?-1:e>t?1:0}function x(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var s=e[r];r>0&&"\\"===e[r-1]&&("$"===s||"."===s)?n=n.substring(0,n.length-1)+s:"."===s?(t.push(n),n=""):n+=s}return t.push(n),t}var I=["$or","$nor","$not"];function A(e){return I.indexOf(e)>-1}function T(e){return Object.keys(e)[0]}function D(e){return e[T(e)]}function q(e){var t={},n={$or:!0,$nor:!0};return e.forEach((function(e){Object.keys(e).forEach((function(r){var i=e[r];if("object"!=typeof i&&(i={$eq:i}),A(r))if(i instanceof Array){if(n[r])return n[r]=!1,void(t[r]=i);var s=[];t[r].forEach((function(e){Object.keys(i).forEach((function(t){var n=i[t],r=Math.max(Object.keys(e).length,Object.keys(n).length),o=q([e,n]);Object.keys(o).length<=r||s.push(o)}))})),t[r]=s}else t[r]=q([i]);else{var o=t[r]=t[r]||{};Object.keys(i).forEach((function(e){var t=i[e];return"$gt"===e||"$gte"===e?function(e,t,n){void 0===n.$eq&&(void 0!==n.$gte?"$gte"===e?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):void 0!==n.$gt?"$gte"===e?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t)}(e,t,o):"$lt"===e||"$lte"===e?function(e,t,n){void 0===n.$eq&&(void 0!==n.$lte?"$lte"===e?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):void 0!==n.$lt?"$lte"===e?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t)}(e,t,o):"$ne"===e?function(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}(t,o):"$eq"===e?function(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}(t,o):"$regex"===e?function(e,t){"$regex"in t?t.$regex.push(e):t.$regex=[e]}(t,o):void(o[e]=t)}))}}))})),t}function N(e){for(var t in e){if(Array.isArray(e))for(var n in e)e[n].$and&&(e[n]=q(e[n].$and));var r=e[t];"object"==typeof r&&N(r)}return e}function B(e,t){for(var n in e){"$and"===n&&(t=!0);var r=e[n];"object"==typeof r&&(t=B(r,t))}return t}function L(e){var t=(0,d.d9)(e);B(t,!1)&&"$and"in(t=N(t))&&(t=q(t.$and)),["$or","$nor"].forEach((function(e){e in t&&t[e].forEach((function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n],i=e[r];"object"==typeof i&&null!==i||(e[r]={$eq:i})}}))})),"$not"in t&&(t.$not=q([t.$not]));for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],s=t[i];"object"==typeof s&&null!==s||(s={$eq:s}),t[i]=s}return F(t),t}function F(e){Object.keys(e).forEach((function(t){var n=e[t];Array.isArray(n)?n.forEach((function(e){e&&"object"==typeof e&&F(e)})):"$ne"===t?e.$ne=[n]:"$regex"===t?e.$regex=[n]:n&&"object"==typeof n&&F(n)}))}function M(e,t,n){if(e=e.filter((function(e){return U(e.doc,t.selector,n)})),t.sort){var r=function(e){function t(t){return e.map((function(e){var n=x(T(e));return R(t,n)}))}return function(e,n){var r=o(t(e.doc),t(n.doc));return 0!==r?r:E(e.doc._id,n.doc._id)}}(t.sort);e=e.sort(r),"string"!=typeof t.sort[0]&&"desc"===D(t.sort[0])&&(e=e.reverse())}if("limit"in t||"skip"in t){var i=t.skip||0,s=("limit"in t?t.limit:e.length)+i;e=e.slice(i,s)}return e}function U(e,t,n){return n.every((function(n){var r=t[n],i=x(n),s=R(e,i);return A(n)?function(e,t,n){return"$or"===e?t.some((function(e){return U(n,e,Object.keys(e))})):"$not"===e?!U(n,t,Object.keys(t)):!t.find((function(e){return U(n,e,Object.keys(e))}))}(n,r,e):z(r,e,i,s)}))}function z(e,t,n,r){return!e||("object"==typeof e?Object.keys(e).every((function(i){var s=e[i];if(0===i.indexOf("$"))return K(i,t,s,n,r);var o=x(i);if(void 0===r&&"object"!=typeof s&&o.length>0)return!1;var a=R(r,o);return"object"==typeof s?z(s,t,n,a):K("$eq",t,s,o,a)})):e===r)}function K(e,t,n,r,i){if(!V[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return V[e](t,n,r,i)}function W(e){return null!=e}function H(e){return void 0!==e}function J(e,t){return t.some((function(t){return e instanceof Array?e.some((function(e){return 0===o(t,e)})):0===o(t,e)}))}var V={$elemMatch:function(e,t,n,r){return!!Array.isArray(r)&&0!==r.length&&("object"==typeof r[0]&&null!==r[0]?r.some((function(e){return U(e,t,Object.keys(t))})):r.some((function(r){return z(t,e,n,r)})))},$allMatch:function(e,t,n,r){return!!Array.isArray(r)&&0!==r.length&&("object"==typeof r[0]&&null!==r[0]?r.every((function(e){return U(e,t,Object.keys(t))})):r.every((function(r){return z(t,e,n,r)})))},$eq:function(e,t,n,r){return H(r)&&0===o(r,t)},$gte:function(e,t,n,r){return H(r)&&o(r,t)>=0},$gt:function(e,t,n,r){return H(r)&&o(r,t)>0},$lte:function(e,t,n,r){return H(r)&&o(r,t)<=0},$lt:function(e,t,n,r){return H(r)&&o(r,t)<0},$exists:function(e,t,n,r){return t?H(r):!H(r)},$mod:function(e,t,n,r){return W(r)&&function(e,t){return"number"==typeof e&&parseInt(e,10)===e&&e%t[0]===t[1]}(r,t)},$ne:function(e,t,n,r){return t.every((function(e){return 0!==o(r,e)}))},$in:function(e,t,n,r){return W(r)&&J(r,t)},$nin:function(e,t,n,r){return W(r)&&!J(r,t)},$size:function(e,t,n,r){return W(r)&&Array.isArray(r)&&function(e,t){return e.length===t}(r,t)},$all:function(e,t,n,r){return Array.isArray(r)&&function(e,t){return t.every((function(t){return e.some((function(e){return 0===o(t,e)}))}))}(r,t)},$regex:function(e,t,n,r){return W(r)&&"string"==typeof r&&t.every((function(e){return function(e,t){return new RegExp(t).test(e)}(r,e)}))},$type:function(e,t,n,r){return function(e,t){switch(t){case"null":return null===e;case"boolean":return"boolean"==typeof e;case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"array":return e instanceof Array;case"object":return"[object Object]"==={}.toString.call(e)}}(r,t)}};function G(e,t){if("object"!=typeof t)throw new Error("Selector error: expected a JSON object");var n=M([{doc:e}],{selector:t=L(t)},Object.keys(t));return n&&1===n.length}const Q=(...e)=>{let t=[];for(const n of e)Array.isArray(n)?t=t.concat(Q(...n)):t.push(n);return t},Y="function"==typeof Array.prototype.flat?(...e)=>e.flat(1/0):Q;function X(e){const t={};for(const n of e)Object.assign(t,n);return t}function Z(e,t){for(let n=0,r=Math.min(e.length,t.length);n<r;n++)if(e[n]!==t[n])return!1;return!0}function ee(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function te(e){return function(...t){const n=t[t.length-1];if("function"!=typeof n)return e.apply(this,t);{const r=n.bind(null,null),i=n.bind(null);e.apply(this,t.slice(0,-1)).then(r,i)}}}function ne(e){(e=(0,d.d9)(e)).index||(e.index={});for(const t of["type","name","ddoc"])e.index[t]&&(e[t]=e.index[t],delete e.index[t]);return e.fields&&(e.index.fields=e.fields,delete e.fields),e.type||(e.type="json"),e}function re(e){return"object"==typeof e&&null!==e}function ie(e,t,n){let r="",i=t,s=!0;if(-1!==["$in","$nin","$or","$and","$mod","$nor","$all"].indexOf(e)&&(Array.isArray(t)||(r="Query operator "+e+" must be an array.")),-1!==["$not","$elemMatch","$allMatch"].indexOf(e)&&(!Array.isArray(t)&&re(t)||(r="Query operator "+e+" must be an object.")),"$mod"===e&&Array.isArray(t))if(2!==t.length)r="Query operator $mod must be in the format [divisor, remainder], where divisor and remainder are both integers.";else{const e=t[0],n=t[1];0===e&&(r="Query operator $mod's divisor cannot be 0, cannot divide by zero.",s=!1),"number"==typeof e&&parseInt(e,10)===e||(r="Query operator $mod's divisor is not an integer.",i=e),parseInt(n,10)!==n&&(r="Query operator $mod's remainder is not an integer.",i=n)}if("$exists"===e&&"boolean"!=typeof t&&(r="Query operator $exists must be a boolean."),"$type"===e){const e=["null","boolean","number","string","array","object"],n='"'+e.slice(0,e.length-1).join('", "')+'", or "'+e[e.length-1]+'"';("string"!=typeof t||-1==e.indexOf(t))&&(r="Query operator $type must be a string. Supported values: "+n+".")}if("$size"===e&&parseInt(t,10)!==t&&(r="Query operator $size must be a integer."),"$regex"===e&&"string"!=typeof t&&(n?r="Query operator $regex must be a string.":t instanceof RegExp||(r="Query operator $regex must be a string or an instance of a javascript regular expression.")),r)throw s&&(r+=" Received"+(null===i?" ":Array.isArray(i)?" array":" "+typeof i)+": "+(re(i)?JSON.stringify(i,null,"\t"):i)),new Error(r)}const se=["$all","$allMatch","$and","$elemMatch","$exists","$in","$mod","$nin","$nor","$not","$or","$regex","$size","$type"],oe=["$in","$nin","$mod","$all"],ae=["$eq","$gt","$gte","$lt","$lte"];function ce(e,t){if(Array.isArray(e))for(const n of e)re(n)&&ce(n,t);else for(const[n,r]of Object.entries(e))-1!==se.indexOf(n)&&ie(n,r,t),-1===ae.indexOf(n)&&-1===oe.indexOf(n)&&re(r)&&ce(r,t)}async function ue(e,t,n){n.body&&(n.body=JSON.stringify(n.body),n.headers=new i({"Content-type":"application/json"}));const s=await e.fetch(t,n),o=await s.json();if(!s.ok){o.status=s.status;const e=(0,r.Tr)(o);throw(0,r.G3)(e)}return o}async function le(e,t){return await ue(e,"_index",{method:"POST",body:ne(t)})}async function fe(e,t){return ce(t.selector,!0),await ue(e,"_find",{method:"POST",body:t})}async function de(e,t){return await ue(e,"_explain",{method:"POST",body:t})}async function he(e){return await ue(e,"_index",{method:"GET"})}async function pe(e,t){const n=t.ddoc,r=t.type||"json",i=t.name;if(!n)throw new Error("you must provide an index's ddoc");if(!i)throw new Error("you must provide an index's name");const s="_index/"+[n,r,i].map(encodeURIComponent).join("/");return await ue(e,s,{method:"DELETE"})}function me(e,t){for(const n of t)if(void 0===(e=e[n]))return;return e}const ve=function(e,t){function n(e,t,n){try{t(n)}catch(r){P(e,r,{fun:t,doc:n})}}function f(e,t,n,r,i){try{return{output:t(n,r,i)}}catch(s){return P(e,s,{fun:t,keys:n,values:r,rereduce:i}),{error:s}}}function h(e,t){const n=o(e.key,t.key);return 0!==n?n:o(e.value,t.value)}function k(e,t,n){return n=n||0,"number"==typeof t?e.slice(n,t+n):n>0?e.slice(n):e}function R(e){const t=e.value;return t&&"object"==typeof t&&t._id||e.id}function $(e){return function(t){return e.include_docs&&e.attachments&&e.binary&&function(e){for(const t of e.rows){const e=t.doc&&t.doc._attachments;if(e)for(const t of Object.keys(e)){const n=e[t];e[t].data=(0,s.W7)(n.data,n.content_type)}}}(t),t}}function E(e,t,n,r){let i=t[e];void 0!==i&&(r&&(i=encodeURIComponent(JSON.stringify(i))),n.push(e+"="+i))}function x(e){if(void 0!==e){const t=Number(e);return isNaN(t)||t!==parseInt(e,10)?e:t}}function I(e){if(e){if("number"!=typeof e)return new p(`Invalid value for integer: "${e}"`);if(e<0)return new p(`Invalid value for positive integer: "${e}"`)}}function A(e,t){const n=e.descending?"endkey":"startkey",r=e.descending?"startkey":"endkey";if(void 0!==e[n]&&void 0!==e[r]&&o(e[n],e[r])>0)throw new p("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&!1!==e.reduce){if(e.include_docs)throw new p("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new p("Multi-key fetches for reduce views must use {group: true}")}for(const t of["group_level","limit","skip"]){const n=I(e[t]);if(n)throw n}}function T(e){return function(t){if(404===t.status)return e;throw t}}function D(e){const t="string"==typeof e?e:e.name;let n=C[t];return n||(n=C[t]=new w),n}async function q(e,r){return g(D(e),(function(){return async function(e,r){let i,s,u;const l=t(e.mapFun,(function(e,t){const n={id:s._id,key:a(e)};null!=t&&(n.value=a(t)),i.push(n)}));let f=e.seq||0,d=0;const p={view:e.name,indexed_docs:d};e.sourceDB.emit("indexing",p);const m=new w;function v(e){const t=new Map;let n;for(let r=0,i=e.length;r<i;r++){const i=e[r],s=[i.key,i.id];r>0&&0===o(i.key,n)&&s.push(r),t.set(c(s),i),n=i.key}return t}try{await e.sourceDB.info().then((function(t){u=e.sourceDB.activeTasks.add({name:"view_indexing",total_items:t.update_seq-f})})),await async function t(){return function(o,a){const c=o.results;if(!c.length&&!a.length)return;for(const e of a)if(c.findIndex((function(t){return t.id===e.docId}))<0){const t={_id:e.docId,doc:{_id:e.docId,_deleted:1},changes:[]};e.doc&&(t.doc=e.doc,t.changes.push({rev:e.doc._rev})),c.push(t)}const p=function(t){const r=new Map;for(const o of t){if("_"!==o.doc._id[0]){i=[],s=o.doc,s._deleted||n(e.sourceDB,l,s),i.sort(h);const t=v(i);r.set(o.doc._id,[t,o.changes])}f=o.seq}return r}(c);m.add(function(t,n){return function(){return function(e,t,n){var r="_local/lastSeq";return e.db.get(r).catch(T({_id:r,seq:0})).then((function(r){var i=b(t);return Promise.all(i.map((function(n){return async function(e,t,n){const r="_local/doc_"+e,i={_id:r,keys:[]},s=n.get(e),o=s[0],a=s[1],c=await(function(e){return 1===e.length&&/^1-/.test(e[0].rev)}(a)?Promise.resolve(i):t.db.get(r).catch(T(i))),u=await function(e){return e.keys.length?t.db.allDocs({keys:e.keys,include_docs:!0}):Promise.resolve({rows:[]})}(c);return function(e,t){const n=[],r=new Set;for(const e of t.rows){const t=e.doc;if(t&&(n.push(t),r.add(t._id),t._deleted=!o.has(t._id),!t._deleted)){const e=o.get(t._id);"value"in e&&(t.value=e.value)}}const i=b(o);for(const e of i)if(!r.has(e)){const t={_id:e},r=o.get(e);"value"in r&&(t.value=r.value),n.push(t)}return e.keys=_(i.concat(e.keys)),n.push(e),n}(c,u)}(n,e,t)}))).then((function(t){var i=t.flat();return r.seq=n,i.push(r),e.db.bulkDocs({docs:i})})).then((()=>function(e){return e.sourceDB.get("_local/purges").then((function(t){const n=t.purgeSeq;return e.db.get("_local/purgeSeq").then((function(e){return e._rev})).catch(T(void 0)).then((function(t){return e.db.put({_id:"_local/purgeSeq",_rev:t,purgeSeq:n})}))})).catch((function(e){if(404!==e.status)throw e}))}(e)))}))}(e,t,n)}}(p,f)),d+=c.length;const y={view:e.name,last_seq:o.last_seq,results_count:c.length,indexed_docs:d};return e.sourceDB.emit("indexing",y),e.sourceDB.activeTasks.update(u,{completed_items:d}),c.length<r.changes_batch_size?void 0:t()}(await e.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:f,limit:r.changes_batch_size}),await e.db.get("_local/purgeSeq").then((function(e){return e.purgeSeq})).catch(T(-1)).then((function(t){return e.sourceDB.get("_local/purges").then((function(n){const r=n.purges.filter((function(e,n){return n>t})).map((e=>e.docId)),i=r.filter((function(e,t){return r.indexOf(e)===t}));return Promise.all(i.map((function(t){return e.sourceDB.get(t).then((function(e){return{docId:t,doc:e}})).catch(T({docId:t}))})))})).catch(T([]))})))}(),await m.finish(),e.seq=f,e.sourceDB.activeTasks.remove(u)}catch(t){e.sourceDB.activeTasks.remove(u,t)}}(e,r)}))()}function N(e,t){return g(D(e),(function(){return async function(e,t){let n;const r=e.reduceFun&&!1!==t.reduce,i=t.skip||0;async function s(t){t.include_docs=!0;const r=await e.db.allDocs(t);return n=r.total_rows,r.rows.map((function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){const t=Object.keys(e.doc.value).sort(),n=["id","key","value"];if(!(t<n||t>n))return e.doc.value}const t=function(e){for(var t=[],n=[],r=0;;){var i=e[r++];if("\0"!==i)switch(i){case"1":t.push(null);break;case"2":t.push("1"===e[r]),r++;break;case"3":var s=u(e,r);t.push(s.num),r+=s.length;break;case"4":for(var o="";;){var a=e[r];if("\0"===a)break;o+=a,r++}o=o.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(o);break;case"5":var c={element:[],index:t.length};t.push(c.element),n.push(c);break;case"6":var f={element:{},index:t.length};t.push(f.element),n.push(f);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===t.length)return t.pop();l(t,n)}}}(e.doc._id);return{key:t[0],id:t[1],value:"value"in e.doc?e.doc.value:null}}))}async function a(s){let a;if(a=r?function(e,t,n){0===n.group_level&&delete n.group_level;const r=n.group||n.group_level,i=function(){throw new Error("reduce not supported")}(e.reduceFun),s=[],a=isNaN(n.group_level)?Number.POSITIVE_INFINITY:n.group_level;for(const e of t){const t=s[s.length-1];let n=r?e.key:null;r&&Array.isArray(n)&&(n=n.slice(0,a)),t&&0===o(t.groupKey,n)?(t.keys.push([e.key,e.id]),t.values.push(e.value)):s.push({keys:[[e.key,e.id]],values:[e.value],groupKey:n})}t=[];for(const n of s){const r=f(e.sourceDB,i,n.keys,n.values,!1);if(r.error&&r.error instanceof v)throw r.error;t.push({value:r.error?null:r.output,key:n.groupKey})}return{rows:k(t,n.limit,n.skip)}}(e,s,t):void 0===t.keys?{total_rows:n,offset:i,rows:s}:{total_rows:n,offset:i,rows:k(s,t.limit,t.skip)},t.update_seq&&(a.update_seq=e.seq),t.include_docs){const n=_(s.map(R)),r=await e.sourceDB.allDocs({keys:n,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments,binary:t.binary}),i=new Map;for(const e of r.rows)i.set(e.id,e.doc);for(const e of s){const t=R(e),n=i.get(t);n&&(e.doc=n)}}return a}if(void 0===t.keys||t.keys.length||(t.limit=0,delete t.keys),void 0!==t.keys){const e=t.keys.map((function(e){const n={startkey:c([e]),endkey:c([e,{}])};return t.update_seq&&(n.update_seq=!0),s(n)}));return a((await Promise.all(e)).flat())}{const e={descending:t.descending};let n,o;if(t.update_seq&&(e.update_seq=!0),"start_key"in t&&(n=t.start_key),"startkey"in t&&(n=t.startkey),"end_key"in t&&(o=t.end_key),"endkey"in t&&(o=t.endkey),void 0!==n&&(e.startkey=t.descending?c([n,{}]):c([n])),void 0!==o){let n=!1!==t.inclusive_end;t.descending&&(n=!n),e.endkey=c(n?[o,{}]:[o])}if(void 0!==t.key){const n=c([t.key]),r=c([t.key,{}]);e.descending?(e.endkey=n,e.startkey=r):(e.startkey=n,e.endkey=r)}return r||("number"==typeof t.limit&&(e.limit=t.limit),e.skip=i),a(await s(e))}}(e,t)}))()}var B;return{query:function(t,n,s){const o=this;"function"==typeof n&&(s=n,n={}),n=n?function(e){return e.group_level=x(e.group_level),e.limit=x(e.limit),e.skip=x(e.skip),e}(n):{},"function"==typeof t&&(t={map:t});const a=Promise.resolve().then((function(){return async function(t,n,s){if("function"==typeof t._query)return function(e,t,n){return new Promise((function(r,i){e._query(t,n,(function(e,t){if(e)return i(e);r(t)}))}))}(t,n,s);if((0,d.Q1)(t))return async function(e,t,n){let s,o,a=[],c="GET";if(E("reduce",n,a),E("include_docs",n,a),E("attachments",n,a),E("limit",n,a),E("descending",n,a),E("group",n,a),E("group_level",n,a),E("skip",n,a),E("stale",n,a),E("conflicts",n,a),E("startkey",n,a,!0),E("start_key",n,a,!0),E("endkey",n,a,!0),E("end_key",n,a,!0),E("inclusive_end",n,a),E("key",n,a,!0),E("update_seq",n,a),a=a.join("&"),a=""===a?"":"?"+a,void 0!==n.keys){const e=2e3,r=`keys=${encodeURIComponent(JSON.stringify(n.keys))}`;r.length+a.length+1<=e?a+=("?"===a[0]?"&":"?")+r:(c="POST","string"==typeof t?s={keys:n.keys}:t.keys=n.keys)}if("string"==typeof t){const u=O(t),l=await e.fetch("_design/"+u[0]+"/_view/"+u[1]+a,{headers:new i({"Content-Type":"application/json"}),method:c,body:JSON.stringify(s)});o=l.ok;const f=await l.json();if(!o)throw f.status=l.status,(0,r.G3)(f);for(const e of f.rows)if(e.value&&e.value.error&&"builtin_reduce_error"===e.value.error)throw new Error(e.reason);return new Promise((function(e){e(f)})).then($(n))}s=s||{};for(const e of Object.keys(t))Array.isArray(t[e])?s[e]=t[e]:s[e]=t[e].toString();const u=await e.fetch("_temp_view"+a,{headers:new i({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(s)});o=u.ok;const l=await u.json();if(!o)throw l.status=u.status,(0,r.G3)(l);return new Promise((function(e){e(l)})).then($(n))}(t,n,s);const o={changes_batch_size:t.__opts.view_update_changes_batch_size||50};if("string"!=typeof n)return A(s,n),j.add((async function(){const r=await S(t,"temp_view/temp_view",n.map,n.reduce,!0,e);return i=q(r,o).then((function(){return N(r,s)})),a=function(){return r.db.destroy()},i.then((function(e){return a().then((function(){return e}))}),(function(e){return a().then((function(){throw e}))}));var i,a})),j.finish();{const r=n,i=O(r),a=i[0],c=i[1],u=await t.get("_design/"+a);if(!(n=u.views&&u.views[c]))throw new m(`ddoc ${u._id} has no view named ${c}`);(function(e,t){const n=e.views[t];if(!n.map||!n.map.fields)throw new Error("ddoc "+e._id+" with view "+t+" doesn't have map.fields defined. maybe it wasn't created by this plugin?")})(u,c),A(s,n);const l=await S(t,r,n.map,n.reduce,!1,e);return"ok"===s.stale||"update_after"===s.stale?("update_after"===s.stale&&(0,d.Y3)((function(){q(l,o)})),N(l,s)):(await q(l,o),N(l,s))}}(o,t,n)}));return y(a,s),a},viewCleanup:(B=function(){const t=this;return"function"==typeof t._viewCleanup?function(e){return new Promise((function(t,n){e._viewCleanup((function(e,r){if(e)return n(e);t(r)}))}))}(t):(0,d.Q1)(t)?async function(e){return(await e.fetch("_view_cleanup",{headers:new i({"Content-Type":"application/json"}),method:"POST"})).json()}(t):async function(t){try{const n=await t.get("_local/"+e),r=new Map;for(const e of Object.keys(n.views)){const t=O(e),n="_design/"+t[0],i=t[1];let s=r.get(n);s||(s=new Set,r.set(n,s)),s.add(i)}const i={keys:b(r),include_docs:!0},s=await t.allDocs(i),o={};for(const e of s.rows){const t=e.key.substring(8);for(const i of r.get(e.key)){let r=t+"/"+i;n.views[r]||(r=i);const s=Object.keys(n.views[r]),a=e.doc&&e.doc.views&&e.doc.views[i];for(const e of s)o[e]=o[e]||a}}const a=Object.keys(o).filter((function(e){return!o[e]})).map((function(e){return g(D(e),(function(){return new t.constructor(e,t.__opts).destroy()}))()}));return Promise.all(a).then((function(){return{ok:!0}}))}catch(e){if(404===e.status)return{ok:!0};throw e}}(t)},function(...e){var t=e.pop(),n=B.apply(this,e);return"function"==typeof t&&y(n,t),n})}}("indexes",(function(e,t){return function(e,t,n){const r=function(e){return e.every((e=>-1===e.indexOf(".")))}(e),i=1===e.length;return r?i?function(e,t,n){return function(r){n&&!G(r,n)||t(r[e])}}(e[0],t,n):function(e,t,n){return function(r){if(n&&!G(r,n))return;const i=e.map((e=>r[e]));t(i)}}(e,t,n):i?function(e,t,n){const r=x(e);return function(e){if(n&&!G(e,n))return;const i=me(e,r);void 0!==i&&t(i)}}(e[0],t,n):function(e,t,n){return function(r){if(n&&!G(r,n))return;const i=[];for(const t of e){const e=me(r,x(t));if(void 0===e)return;i.push(e)}t(i)}}(e,t,n)}(Object.keys(e.fields),t,e.partial_filter_selector)}));function ye(e){return e._customFindAbstractMapper?{query:function(t,n){const r=ve.query.bind(this);return e._customFindAbstractMapper.query.call(this,t,n,r)},viewCleanup:function(){const t=ve.viewCleanup.bind(this);return e._customFindAbstractMapper.viewCleanup.call(this,t)}}:ve}const ge=/^_design\//;function _e(e){return e.fields=e.fields.map((function(e){if("string"==typeof e){const t={};return t[e]="asc",t}return e})),e.partial_filter_selector&&(e.partial_filter_selector=L(e.partial_filter_selector)),e}function be(e,t){return t.def.fields.map((t=>{const n=T(t);return R(e,x(n))}))}async function we(e,t){t=ne(t);const n=(0,d.d9)(t.index);let r;function i(){return r||(r=(0,h.$)(JSON.stringify(t)))}t.index=_e(t.index),function(e){const t=e.fields.filter((function(e){return"asc"===D(e)}));if(0!==t.length&&t.length!==e.fields.length)throw new Error("unsupported mixed sorting")}(t.index);const s=t.name||"idx-"+i(),o=t.ddoc||"idx-"+i(),a="_design/"+o;let c=!1,u=!1;if(e.constructor.emit("debug",["find","creating index",a]),await(0,d.H)(e,a,(function(e){return e._rev&&"query"!==e.language&&(c=!0),e.language="query",e.views=e.views||{},u=!!e.views[s],!u&&(e.views[s]={map:{fields:X(t.index.fields),partial_filter_selector:t.index.partial_filter_selector},reduce:"_count",options:{def:n}},e)})),c)throw new Error('invalid language for ddoc with id "'+a+'" (should be "query")');const l=o+"/"+s;return await ye(e).query.call(e,l,{limit:0,reduce:!1}),{id:a,name:s,result:u?"exists":"created"}}async function ke(e){const t=await e.allDocs({startkey:"_design/",endkey:"_design/ï¿¿",include_docs:!0}),n={indexes:[{ddoc:null,name:"_all_docs",type:"special",def:{fields:[{_id:"asc"}]}}]};return n.indexes=Y(n.indexes,t.rows.filter((function(e){return"query"===e.doc.language})).map((function(e){return(void 0!==e.doc.views?Object.keys(e.doc.views):[]).map((function(t){const n=e.doc.views[t];return{ddoc:e.id,name:t,type:"json",def:_e(n.options.def)}}))}))),n.indexes.sort((function(e,t){return E(e.name,t.name)})),n.total_rows=n.indexes.length,n}const Se=null,Ce={"ï¿¿":{}},je={queryOpts:{limit:0,startkey:Ce,endkey:Se},inMemoryFields:[]};function Oe(e,t){return e.def.fields.some((e=>T(e)===t))}function Pe(e,t){return"$eq"!==T(e[t])}function Re(e,t){const n=t.def.fields.map(T);return e.slice().sort((function(e,t){let r=n.indexOf(e),i=n.indexOf(t);return-1===r&&(r=Number.MAX_VALUE),-1===i&&(i=Number.MAX_VALUE),E(r,i)}))}function $e(e,t,n,r){const i=Y(e,function(e,t,n){let r=!1;for(let i=0,s=(n=Re(n,e)).length;i<s;i++){const o=n[i];if(r||!Oe(e,o))return n.slice(i);i<s-1&&Pe(t,o)&&(r=!0)}return[]}(t,n,r),function(e){const t=[];for(const[n,r]of Object.entries(e))for(const e of Object.keys(r))"$ne"===e&&t.push(n);return t}(n));return Re((s=i,Array.from(new Set(s))),t);var s}const Ee=["$eq","$gt","$gte","$lt","$lte"];function xe(e){return-1===Ee.indexOf(e)}function Ie(e,t){switch(e){case"$eq":return{key:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}return{startkey:Se}}function Ae(e,t){switch(e){case"$eq":return{startkey:t,endkey:t};case"$lte":return{endkey:t};case"$gte":return{startkey:t};case"$lt":return{endkey:t,inclusive_end:!1};case"$gt":return{startkey:t,inclusive_start:!1}}}async function Te(e,t,n){t.selector&&(ce(t.selector,!1),t.selector=L(t.selector)),t.sort&&(t.sort=function(e){if(!Array.isArray(e))throw new Error("invalid sort json - should be an array");return e.map((function(e){if("string"==typeof e){const t={};return t[e]="asc",t}return e}))}(t.sort)),t.use_index&&(t.use_index=function(e){let t=[];return"string"==typeof e?t.push(e):t=e,t.map((function(e){return e.replace(ge,"")}))}(t.use_index)),"limit"in t||(t.limit=25),function(e){if("object"!=typeof e.selector)throw new Error("you must provide a selector when you find()")}(t);const r=await ke(e);e.constructor.emit("debug",["find","planning query",t]);const i=function(e,t){const n=e.selector,r=e.sort;if(function(e){return Object.keys(e).map((function(t){return e[t]})).some((function(e){return"object"==typeof e&&0===Object.keys(e).length}))}(n))return Object.assign({},je,{index:t[0]});const i=function(e,t){const n=Object.keys(e),r=t?t.map(T):[];let i;return i=n.length>=r.length?n:r,0===r.length?{fields:i}:(i=i.sort((function(e,t){let n=r.indexOf(e);-1===n&&(n=Number.MAX_VALUE);let i=r.indexOf(t);return-1===i&&(i=Number.MAX_VALUE),n<i?-1:n>i?1:0})),{fields:i,sortOrder:t.map(T)})}(n,r),s=i.fields,o=function(e,t,n,r,i){const s=function(e,t,n,r){return r.filter((function(r){return function(e,t,n,r){const i=e.def.fields.map(T);return!!function(e,t,n){if(t){const s=(i=e,!((r=t).length>i.length)&&Z(r,i)),o=Z(n,e);return s&&o}var r,i;return function(e,t){e=e.slice();for(const n of t){if(!e.length)break;const t=e.indexOf(n);if(-1===t)return!1;e.splice(t,1)}return!0}(n,e)}(i,t,n)&&function(e,t){const n=t[e[0]];return void 0===n||!(1===Object.keys(n).length&&"$ne"===T(n))}(i,r)}(r,n,t,e)}))}(e,t,n,r);if(0===s.length){if(i)throw{error:"no_usable_index",message:"There is no index available for this selector."};const e=r[0];return e.defaultUsed=!0,e}if(1===s.length&&!i)return s[0];const o=function(e){const t={};for(const n of e)t[n]=!0;return t}(t);if(i){const e="_design/"+i[0],t=2===i.length&&i[1],n=s.find((function(n){return!(!t||n.ddoc!==e||t!==n.name)||n.ddoc===e}));if(!n)throw{error:"unknown_error",message:"Could not find that index or could not use that index for the query"};return n}return function(e,t){let n=null,r=-1;for(const i of e){const e=t(i);e>r&&(r=e,n=i)}return n}(s,(function(e){const t=e.def.fields.map(T);let n=0;for(const e of t)o[e]&&n++;return n}))}(n,s,i.sortOrder,t,e.use_index),a=function(e,t){return t.defaultUsed?function(e){return{queryOpts:{startkey:null},inMemoryFields:[Object.keys(e)]}}(e):1===t.def.fields.length?function(e,t){const n=T(t.def.fields[0]),r=e[n]||{},i=[],s=Object.keys(r);let o;for(const e of s){xe(e)&&i.push(n);const t=Ie(e,r[e]);o=o?X([o,t]):t}return{queryOpts:o,inMemoryFields:i}}(e,t):function(e,t){const n=t.def.fields.map(T);let r=[];const i=[],s=[];let o,a;function c(e){!1!==o&&i.push(Se),!1!==a&&s.push(Ce),r=n.slice(e)}for(let t=0,r=n.length;t<r;t++){const r=e[n[t]];if(!r||!Object.keys(r).length){c(t);break}if(Object.keys(r).some(xe)){c(t);break}if(t>0){const i="$gt"in r||"$gte"in r||"$lt"in r||"$lte"in r,s=Object.keys(e[n[t-1]]),o=ee(s,["$eq"]),a=ee(s,Object.keys(r));if(i&&!o&&!a){c(t);break}}const u=Object.keys(r);let l=null;for(const e of u){const t=Ae(e,r[e]);l=l?X([l,t]):t}i.push("startkey"in l?l.startkey:Se),s.push("endkey"in l?l.endkey:Ce),"inclusive_start"in l&&(o=l.inclusive_start),"inclusive_end"in l&&(a=l.inclusive_end)}const u={startkey:i,endkey:s};return void 0!==o&&(u.inclusive_start=o),void 0!==a&&(u.inclusive_end=a),{queryOpts:u,inMemoryFields:r}}(e,t)}(n,o);return{queryOpts:a.queryOpts,index:o,inMemoryFields:$e(a.inMemoryFields,o,n,s)}}(t,r.indexes);e.constructor.emit("debug",["find","query plan",i]);const s=i.index;!function(e,t){if(t.defaultUsed&&e.sort){const t=e.sort.filter((function(e){return"_id"!==Object.keys(e)[0]})).map((function(e){return Object.keys(e)[0]}));if(t.length>0)throw new Error('Cannot sort on field(s) "'+t.join(",")+'" when using the default index')}t.defaultUsed}(t,s);let a=Object.assign({include_docs:!0,reduce:!1,indexes_count:r.total_rows},i.queryOpts);if("startkey"in a&&"endkey"in a&&o(a.startkey,a.endkey)>0)return{docs:[]};if(t.sort&&"string"!=typeof t.sort[0]&&"desc"===D(t.sort[0])&&(a.descending=!0,a=function(e){const t=(0,d.d9)(e);return delete t.startkey,delete t.endkey,delete t.inclusive_start,delete t.inclusive_end,"endkey"in e&&(t.startkey=e.endkey),"startkey"in e&&(t.endkey=e.startkey),"inclusive_start"in e&&(t.inclusive_end=e.inclusive_start),"inclusive_end"in e&&(t.inclusive_start=e.inclusive_end),t}(a)),i.inMemoryFields.length||(a.limit=t.limit,"skip"in t&&(a.skip=t.skip)),n)return Promise.resolve(i,a);const c=await async function(e,t,n){return"_all_docs"===n.name?async function(e,t){const n=(0,d.d9)(t);n.descending?("endkey"in n&&"string"!=typeof n.endkey&&(n.endkey=""),"startkey"in n&&"string"!=typeof n.startkey&&(n.limit=0)):("startkey"in n&&"string"!=typeof n.startkey&&(n.startkey=""),"endkey"in n&&"string"!=typeof n.endkey&&(n.limit=0)),"key"in n&&"string"!=typeof n.key&&(n.limit=0),n.limit>0&&n.indexes_count&&(n.original_limit=n.limit,n.limit+=n.indexes_count);const r=await e.allDocs(n);return r.rows=r.rows.filter((function(e){return!/^_design\//.test(e.id)})),n.original_limit&&(n.limit=n.original_limit),r.rows=r.rows.slice(0,n.limit),r}(e,t):ye(e).query.call(e,(r=n).ddoc.substring(8)+"/"+r.name,t);var r}(e,a,s);!1===a.inclusive_start&&(c.rows=function(e,t,n){const r=n.def.fields;let i=0;for(const s of e){let e=be(s.doc,n);if(1===r.length)e=e[0];else for(;e.length>t.length;)e.pop();if(Math.abs(o(e,t))>0)break;++i}return i>0?e.slice(i):e}(c.rows,a.startkey,s)),i.inMemoryFields.length&&(c.rows=M(c.rows,t,i.inMemoryFields));const u={docs:c.rows.map((function(e){const n=e.doc;return t.fields?function(e,t){const n={};for(const r of t){const t=x(r),i=R(e,t);void 0!==i&&$(n,t,i)}return n}(n,t.fields):n}))};return s.defaultUsed&&(u.warning="No matching index found, create an index to optimize query time."),u}async function De(e,t){const n=await Te(e,t,!0);return{dbname:e.name,index:n.index,selector:t.selector,range:{start_key:n.queryOpts.startkey,end_key:n.queryOpts.endkey},opts:{use_index:t.use_index||[],bookmark:"nil",limit:t.limit,skip:t.skip,sort:t.sort||{},fields:t.fields,conflicts:!1,r:[49]},limit:t.limit,skip:t.skip||0,fields:t.fields}}async function qe(e,t){if(!t.ddoc)throw new Error("you must supply an index.ddoc when deleting");if(!t.name)throw new Error("you must supply an index.name when deleting");const n=t.ddoc,r=t.name;return await(0,d.H)(e,n,(function(e){return 1===Object.keys(e.views).length&&e.views[r]?{_id:n,_deleted:!0}:(delete e.views[r],e)})),await ye(e).viewCleanup.apply(e),{ok:!0}}const Ne={};Ne.createIndex=te((async function(e){if("object"!=typeof e)throw new Error("you must provide an index to create");return((0,d.Q1)(this)?le:we)(this,e)})),Ne.find=te((async function(e){if("object"!=typeof e)throw new Error("you must provide search parameters to find()");return((0,d.Q1)(this)?fe:Te)(this,e)})),Ne.explain=te((async function(e){if("object"!=typeof e)throw new Error("you must provide search parameters to explain()");return((0,d.Q1)(this)?de:De)(this,e)})),Ne.getIndexes=te((async function(){return((0,d.Q1)(this)?he:ke)(this)})),Ne.deleteIndex=te((async function(e){if("object"!=typeof e)throw new Error("you must provide an index to delete");return((0,d.Q1)(this)?pe:qe)(this,e)}));var Be=Ne},7239:function(e,t,n){"use strict";n.d(t,{$:function(){return f},u:function(){return l}});var r=n(807),i=n(8322),s=n.n(i),o=self.setImmediate||self.setTimeout,a=32768;function c(e,t,n,i,s){(n>0||i<t.size)&&(t=t.slice(n,i)),(0,r.LX)(t,(function(t){e.append(t),s()}))}function u(e,t,n,r,i){(n>0||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),i()}function l(e,t){var n="string"==typeof e,i=n?e.length:e.size,l=Math.min(a,i),f=Math.ceil(i/l),d=0,h=n?new(s()):new(s().ArrayBuffer),p=n?u:c;function m(){o(y)}function v(){var e,n=(e=h.end(!0),(0,r.r3)(e));t(n),h.destroy()}function y(){var t=d*l;d++,p(h,e,t,t+l,d<f?m:v)}y()}function f(e){return s().hash(e)}},347:function(e,t,n){"use strict";n.d(t,{GE:function(){return y},H:function(){return _},OD:function(){return b},Q1:function(){return g},Vj:function(){return w},Y3:function(){return h},b6:function(){return p},d9:function(){return f},sP:function(){return v},yq:function(){return m}});var r,i=n(2733),s=n(7187),o=n.n(s),a=n(2045),c=n(7239),u=Function.prototype.toString,l=u.call(Object);function f(e){var t,n,r;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=f(e[n]);return t}if(e instanceof Date&&isFinite(e))return e.toISOString();if(function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}(e))return function(e){return e instanceof ArrayBuffer?e.slice(0):e.slice(0,e.size,e.type)}(e);if(!function(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==l}(e))return e;for(n in t={},e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=f(e[n]);void 0!==i&&(t[n]=i)}return t}try{localStorage.setItem("_pouch_check_localstorage",1),r=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){r=!1}function d(){return r}const h="function"==typeof queueMicrotask?queueMicrotask:function(e){Promise.resolve().then(e)};class p extends(o()){constructor(){super(),this._listeners={},d()&&addEventListener("storage",(e=>{this.emit(e.key)}))}addListener(e,t,n,r){if(!this._listeners[t]){var i=!1,s=this;this._listeners[t]=o,this.on(e,o)}function o(){if(s._listeners[t])if(i)i="waiting";else{i=!0;var e=function(e,t){for(var n={},r=0,i=t.length;r<i;r++){var s=t[r];s in e&&(n[s]=e[s])}return n}(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);n.changes(e).on("change",(function(e){e.seq>r.since&&!r.cancelled&&(r.since=e.seq,r.onChange(e))})).on("complete",(function(){"waiting"===i&&h(o),i=!1})).on("error",(function(){i=!1}))}}}removeListener(e,t){t in this._listeners&&(super.removeListener(e,this._listeners[t]),delete this._listeners[t])}notifyLocalWindows(e){d()&&(localStorage[e]="a"===localStorage[e]?"b":"a")}notify(e){this.emit(e),this.notifyLocalWindows(e)}}function m(e){if("undefined"!=typeof console&&"function"==typeof console[e]){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function v(e){var t={},n=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(r){r.doc||(r.doc={});var s=n&&function(e,t,n){try{return!e(t,n)}catch(e){var r="Filter function threw: "+e.toString();return(0,i.Tr)(i.y3,r)}}(e.filter,r.doc,t);if("object"==typeof s)return s;if(s)return!1;if(e.include_docs){if(!e.attachments)for(var o in r.doc._attachments)Object.prototype.hasOwnProperty.call(r.doc._attachments,o)&&(r.doc._attachments[o].stub=!0)}else delete r.doc;return!0}}function y(e){var t;if(e?"string"!=typeof e?t=(0,i.Tr)(i.JE):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=(0,i.Tr)(i.zG)):t=(0,i.Tr)(i.Xt),t)throw t}function g(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&(m("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())}function _(e,t,n){return e.get(t).catch((function(e){if(404!==e.status)throw e;return{}})).then((function(r){var i=r._rev,s=n(r);return s?(s._id=t,s._rev=i,function(e,t,n){return e.put(t).then((function(e){return{updated:!0,rev:e.rev}}),(function(r){if(409!==r.status)throw r;return _(e,t._id,n)}))}(e,s,n)):{updated:!1,rev:i}}))}function b(e,t){if(!t)return(0,a.Z)().replace(/-/g,"").toLowerCase();var n=Object.assign({},e);return delete n._rev_tree,(0,c.$)(JSON.stringify(n))}var w=a.Z},7651:function(e,t,n){"use strict";n.r(t);var r,i=n(8322),s=n.n(i),o=n(2045),a=n(3684),c=n(7187),u=n.n(c),l=Function.prototype.toString,f=l.call(Object);function d(e){var t,n,r;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=d(e[n]);return t}if(e instanceof Date&&isFinite(e))return e.toISOString();if(function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer||"undefined"!=typeof Blob&&e instanceof Blob}(e))return function(e){return e instanceof ArrayBuffer?e.slice(0):e.slice(0,e.size,e.type)}(e);if(!function(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==f}(e))return e;for(n in t={},e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=d(e[n]);void 0!==i&&(t[n]=i)}return t}function h(e){var t=!1;return function(...n){if(t)throw new Error("once called more than once");t=!0,e.apply(this,n)}}function p(e){return function(...t){t=d(t);var n=this,r="function"==typeof t[t.length-1]&&t.pop(),i=new Promise((function(r,i){var s;try{var o=h((function(e,t){e?i(e):r(t)}));t.push(o),(s=e.apply(n,t))&&"function"==typeof s.then&&r(s)}catch(e){i(e)}}));return r&&i.then((function(e){r(null,e)}),r),i}}function m(e,t){return p((function(...n){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var r=this;return function(e,t,n){if(e.constructor.listeners("debug").length){for(var r=["api",e.name,t],i=0;i<n.length-1;i++)r.push(n[i]);e.constructor.emit("debug",r);var s=n[n.length-1];n[n.length-1]=function(n,r){var i=["api",e.name,t];i=i.concat(n?["error",n]:["success",r]),e.constructor.emit("debug",i),s(n,r)}}}(r,e,n),this.taskqueue.isReady?t.apply(this,n):new Promise((function(t,i){r.taskqueue.addTask((function(s){s?i(s):t(r[e].apply(r,n))}))}))}))}function v(e,t){for(var n={},r=0,i=t.length;r<i;r++){var s=t[r];s in e&&(n[s]=e[s])}return n}function y(e){return e}function g(e){return[{ok:e}]}function _(e,t,n){var r=t.docs,i=new Map;r.forEach((function(e){i.has(e.id)?i.get(e.id).push(e):i.set(e.id,[e])}));var s=i.size,o=0,a=new Array(s),c=[];i.forEach((function(e,t){c.push(t)}));var u=0;!function r(){if(!(u>=c.length)){var l=Math.min(u+6,c.length),f=c.slice(u,l);!function(c,u){c.forEach((function(c,l){var f=u+l,d=i.get(c),h=v(d[0],["atts_since","attachments"]);h.open_revs=d.map((function(e){return e.rev})),h.open_revs=h.open_revs.filter(y);var p=y;0===h.open_revs.length&&(delete h.open_revs,p=g),["revs","attachments","binary","ajax","latest"].forEach((function(e){e in t&&(h[e]=t[e])})),e.get(c,h,(function(e,t){var i,u,l,d;i=e?[{error:e}]:p(t),u=c,l=i,a[f]={id:u,docs:l},++o===s&&(d=[],a.forEach((function(e){e.docs.forEach((function(t){d.push({id:e.id,docs:[t]})}))})),n(null,{results:d})),r()}))}))}(f,u),u+=f.length}}()}try{localStorage.setItem("_pouch_check_localstorage",1),r=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){r=!1}function b(){return r}const w="function"==typeof queueMicrotask?queueMicrotask:function(e){Promise.resolve().then(e)};class k extends(u()){constructor(){super(),this._listeners={},b()&&addEventListener("storage",(e=>{this.emit(e.key)}))}addListener(e,t,n,r){if(!this._listeners[t]){var i=!1,s=this;this._listeners[t]=o,this.on(e,o)}function o(){if(s._listeners[t])if(i)i="waiting";else{i=!0;var e=v(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);n.changes(e).on("change",(function(e){e.seq>r.since&&!r.cancelled&&(r.since=e.seq,r.onChange(e))})).on("complete",(function(){"waiting"===i&&w(o),i=!1})).on("error",(function(){i=!1}))}}}removeListener(e,t){t in this._listeners&&(super.removeListener(e,this._listeners[t]),delete this._listeners[t])}notifyLocalWindows(e){b()&&(localStorage[e]="a"===localStorage[e]?"b":"a")}notify(e){this.emit(e),this.notifyLocalWindows(e)}}function S(e){if("undefined"!=typeof console&&"function"==typeof console[e]){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function C(e){var t=0;return e||(t=2e3),function(e,t){var n=6e5;return e=parseInt(e,10)||0,(t=parseInt(t,10))!=t||t<=e?t=(e||1)<<1:t+=1,t>n&&(e=3e5,t=n),~~((t-e)*Math.random()+e)}(e,t)}function j(e,t){S("info","The above "+e+" is totally normal. "+t)}class O extends Error{constructor(e,t,n){super(),this.status=e,this.name=t,this.message=n,this.error=!0}toString(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})}}new O(401,"unauthorized","Name or password is incorrect.");var P=new O(400,"bad_request","Missing JSON list of 'docs'"),R=new O(404,"not_found","missing"),$=new O(409,"conflict","Document update conflict"),E=new O(400,"bad_request","_id field must contain a string"),x=new O(412,"missing_id","_id is required for puts"),I=new O(400,"bad_request","Only reserved document ids may start with underscore."),A=(new O(412,"precondition_failed","Database not open"),new O(500,"unknown_error","Database encountered an unknown error")),T=new O(500,"badarg","Some query argument is invalid"),D=(new O(400,"invalid_request","Request was invalid"),new O(400,"query_parse_error","Some query parameter is invalid")),q=new O(500,"doc_validation","Bad special document member"),N=new O(400,"bad_request","Something wrong with the request"),B=new O(400,"bad_request","Document must be a JSON object"),L=(new O(404,"not_found","Database not found"),new O(500,"indexed_db_went_bad","unknown")),F=(new O(500,"web_sql_went_bad","unknown"),new O(500,"levelDB_went_went_bad","unknown"),new O(403,"forbidden","Forbidden by design doc validate_doc_update function"),new O(400,"bad_request","Invalid rev format")),M=(new O(412,"file_exists","The database could not be created, the file already exists."),new O(412,"missing_stub","A pre-existing attachment stub wasn't found"));function U(e,t){function n(t){for(var n=Object.getOwnPropertyNames(e),r=0,i=n.length;r<i;r++)"function"!=typeof e[n[r]]&&(this[n[r]]=e[n[r]]);void 0===this.stack&&(this.stack=(new Error).stack),void 0!==t&&(this.reason=t)}return n.prototype=O.prototype,new n(t)}function z(e){if("object"!=typeof e){var t=e;(e=A).data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),"stack"in e||(e.stack=(new Error).stack),e}function K(e){var t={},n=e.filter&&"function"==typeof e.filter;return t.query=e.query_params,function(r){r.doc||(r.doc={});var i=n&&function(e,t,n){try{return!e(t,n)}catch(e){var r="Filter function threw: "+e.toString();return U(N,r)}}(e.filter,r.doc,t);if("object"==typeof i)return i;if(i)return!1;if(e.include_docs){if(!e.attachments)for(var s in r.doc._attachments)Object.prototype.hasOwnProperty.call(r.doc._attachments,s)&&(r.doc._attachments[s].stub=!0)}else delete r.doc;return!0}}function W(e){var t;if(e?"string"!=typeof e?t=U(E):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=U(I)):t=U(x),t)throw t}function H(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&(S("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())}function J(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}function V(e){var t=J(e);return t?t.join("/"):null}new O(413,"invalid_url","Provided URL is invalid");var G=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Q="queryKey",Y=/(?:^|&)([^&=]*)=?([^&]*)/g,X=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function Z(e){for(var t=X.exec(e),n={},r=14;r--;){var i=G[r],s=t[r]||"",o=-1!==["user","password"].indexOf(i);n[i]=o?decodeURIComponent(s):s}return n[Q]={},n[G[12]].replace(Y,(function(e,t,r){t&&(n[Q][t]=r)})),n}function ee(e,t){var n=[],r=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n.push(i),r.push(t[i]));return n.push(e),Function.apply(null,n).apply(null,r)}function te(e,t,n){return e.get(t).catch((function(e){if(404!==e.status)throw e;return{}})).then((function(r){var i=r._rev,s=n(r);return s?(s._id=t,s._rev=i,function(e,t,n){return e.put(t).then((function(e){return{updated:!0,rev:e.rev}}),(function(r){if(409!==r.status)throw r;return te(e,t._id,n)}))}(e,s,n)):{updated:!1,rev:i}}))}var ne=function(e){return atob(e)},re=function(e){return btoa(e)};function ie(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}function se(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function oe(e,t){return ie([se(e)],{type:t})}function ae(e,t){return oe(ne(e),t)}function ce(e,t){var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(e){var n=e.target.result||"";if(r)return t(n);t(function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return t}(n))},r?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}function ue(e,t){ce(e,(function(e){t(e)}))}function le(e,t){ue(e,(function(e){t(re(e))}))}var fe=self.setImmediate||self.setTimeout;function de(e,t,n,r,i){(n>0||r<t.size)&&(t=t.slice(n,r)),function(e,t){var n=new FileReader;n.onloadend=function(e){var n=e.target.result||new ArrayBuffer(0);t(n)},n.readAsArrayBuffer(e)}(t,(function(t){e.append(t),i()}))}function he(e,t,n,r,i){(n>0||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),i()}function pe(e,t){var n="string"==typeof e,r=n?e.length:e.size,i=Math.min(32768,r),o=Math.ceil(r/i),a=0,c=n?new(s()):new(s().ArrayBuffer),u=n?he:de;function l(){fe(d)}function f(){var e,n=(e=c.end(!0),re(e));t(n),c.destroy()}function d(){var t=a*i;a++,u(c,e,t,t+i,a<o?l:f)}d()}function me(e){return s().hash(e)}function ve(e,t){if(!t)return(0,o.Z)().replace(/-/g,"").toLowerCase();var n=Object.assign({},e);return delete n._rev_tree,me(JSON.stringify(n))}var ye=o.Z;function ge(e){for(var t,n,r,i,s=e.rev_tree.slice();i=s.pop();){var o=i.ids,a=o[2],c=i.pos;if(a.length)for(var u=0,l=a.length;u<l;u++)s.push({pos:c+1,ids:a[u]});else{var f=!!o[1].deleted,d=o[0];t&&!(r!==f?r:n!==c?n<c:t<d)||(t=d,n=c,r=f)}}return n+"-"+t}function _e(e,t){for(var n,r=e.slice();n=r.pop();)for(var i=n.pos,s=n.ids,o=s[2],a=t(0===o.length,i,s[0],n.ctx,s[1]),c=0,u=o.length;c<u;c++)r.push({pos:i+1,ids:o[c],ctx:a})}function be(e,t){return e.pos-t.pos}function we(e){var t=[];_e(e,(function(e,n,r,i,s){e&&t.push({rev:n+"-"+r,pos:n,opts:s})})),t.sort(be).reverse();for(var n=0,r=t.length;n<r;n++)delete t[n].pos;return t}function ke(e){for(var t=ge(e),n=we(e.rev_tree),r=[],i=0,s=n.length;i<s;i++){var o=n[i];o.rev===t||o.opts.deleted||r.push(o.rev)}return r}function Se(e){for(var t,n=[],r=e.slice();t=r.pop();){var i=t.pos,s=t.ids,o=s[0],a=s[1],c=s[2],u=0===c.length,l=t.history?t.history.slice():[];l.push({id:o,opts:a}),u&&n.push({pos:i+1-l.length,ids:l});for(var f=0,d=c.length;f<d;f++)r.push({pos:i+1,ids:c[f],history:l})}return n.reverse()}function Ce(e,t){return e.pos-t.pos}function je(e,t,n){var r=function(e,t,n){for(var r,i=0,s=e.length;i<s;)n(e[r=i+s>>>1],t)<0?i=r+1:s=r;return i}(e,t,n);e.splice(r,0,t)}function Oe(e,t){for(var n,r,i=t,s=e.length;i<s;i++){var o=e[i],a=[o.id,o.opts,[]];r?(r[2].push(a),r=a):n=r=a}return n}function Pe(e,t){return e[0]<t[0]?-1:1}function Re(e,t){for(var n=[{tree1:e,tree2:t}],r=!1;n.length>0;){var i=n.pop(),s=i.tree1,o=i.tree2;(s[1].status||o[1].status)&&(s[1].status="available"===s[1].status||"available"===o[1].status?"available":"missing");for(var a=0;a<o[2].length;a++)if(s[2][0]){for(var c=!1,u=0;u<s[2].length;u++)s[2][u][0]===o[2][a][0]&&(n.push({tree1:s[2][u],tree2:o[2][a]}),c=!0);c||(r="new_branch",je(s[2],o[2][a],Pe))}else r="new_leaf",s[2][0]=o[2][a]}return{conflicts:r,tree:e}}function $e(e,t,n){var r,i=[],s=!1,o=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var a=0,c=e.length;a<c;a++){var u=e[a];if(u.pos===t.pos&&u.ids[0]===t.ids[0])r=Re(u.ids,t.ids),i.push({pos:u.pos,ids:r.tree}),s=s||r.conflicts,o=!0;else if(!0!==n){var l=u.pos<t.pos?u:t,f=u.pos<t.pos?t:u,d=f.pos-l.pos,h=[],p=[];for(p.push({ids:l.ids,diff:d,parent:null,parentIdx:null});p.length>0;){var m=p.pop();if(0!==m.diff)for(var v=m.ids[2],y=0,g=v.length;y<g;y++)p.push({ids:v[y],diff:m.diff-1,parent:m.ids,parentIdx:y});else m.ids[0]===f.ids[0]&&h.push(m)}var _=h[0];_?(r=Re(_.ids,f.ids),_.parent[2][_.parentIdx]=r.tree,i.push({pos:l.pos,ids:l.ids}),s=s||r.conflicts,o=!0):i.push(u)}else i.push(u)}return o||i.push(t),i.sort(Ce),{tree:i,conflicts:s||"internal_node"}}function Ee(e,t,n){var r=$e(e,t),i=function(e,t){for(var n,r,i=Se(e),s=0,o=i.length;s<o;s++){var a,c=i[s],u=c.ids;if(u.length>t){n||(n={});var l=u.length-t;a={pos:c.pos+l,ids:Oe(u,l)};for(var f=0;f<l;f++){var d=c.pos+f+"-"+u[f].id;n[d]=!0}}else a={pos:c.pos,ids:Oe(u,0)};r=r?$e(r,a,!0).tree:[a]}return n&&_e(r,(function(e,t,r){delete n[t+"-"+r]})),{tree:r,revs:n?Object.keys(n):[]}}(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function xe(e){return e.ids}function Ie(e,t){t||(t=ge(e));for(var n,r=t.substring(t.indexOf("-")+1),i=e.rev_tree.map(xe);n=i.pop();){if(n[0]===r)return!!n[1].deleted;i=i.concat(n[2])}}function Ae(e){return"string"==typeof e&&e.startsWith("_local/")}function Te(e,t,n){var r=[{rev:e._rev}];"all_docs"===n.style&&(r=we(t.rev_tree).map((function(e){return{rev:e.rev}})));var i={id:t.id,changes:r,doc:e};return Ie(t,e._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=ke(t),i.doc._conflicts.length||delete i.doc._conflicts),i}class De extends(u()){constructor(e,t,n){super(),this.db=e;var r=(t=t?d(t):{}).complete=h(((t,n)=>{var r;t?(r="error",("listenerCount"in this?this.listenerCount(r):u().listenerCount(this,r))>0&&this.emit("error",t)):this.emit("complete",n),this.removeAllListeners(),e.removeListener("destroyed",i)}));n&&(this.on("complete",(function(e){n(null,e)})),this.on("error",n));const i=()=>{this.cancel()};e.once("destroyed",i),t.onChange=(e,t,n)=>{this.isCancelled||function(e,t,n,r){try{e.emit("change",t,n,r)}catch(e){S("error",'Error in .on("change", function):',e)}}(this,e,t,n)};var s=new Promise((function(e,n){t.complete=function(t,r){t?n(t):e(r)}}));this.once("cancel",(function(){e.removeListener("destroyed",i),t.complete(null,{status:"cancelled"})})),this.then=s.then.bind(s),this.catch=s.catch.bind(s),this.then((function(e){r(null,e)}),r),e.taskqueue.isReady?this.validateChanges(t):e.taskqueue.addTask((e=>{e?t.complete(e):this.isCancelled?this.emit("cancel"):this.validateChanges(t)}))}cancel(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")}validateChanges(e){var t=e.complete;He._changesFilterPlugin?He._changesFilterPlugin.validate(e,(n=>{if(n)return t(n);this.doChanges(e)})):this.doChanges(e)}doChanges(e){var t=e.complete;if("live"in(e=d(e))&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=Te,"latest"===e.since&&(e.since="now"),e.since||(e.since=0),"now"!==e.since){if(He._changesFilterPlugin){if(He._changesFilterPlugin.normalize(e),He._changesFilterPlugin.shouldFilter(this,e))return He._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach((function(t){t in e&&S("warn",'The "'+t+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')}));"descending"in e||(e.descending=!1),e.limit=0===e.limit?1:e.limit,e.complete=t;var n=this.db._changes(e);if(n&&"function"==typeof n.cancel){const e=this.cancel;this.cancel=(...t)=>{n.cancel(),e.apply(this,t)}}}else this.db.info().then((n=>{this.isCancelled?t(null,{status:"cancelled"}):(e.since=n.update_seq,this.doChanges(e))}),t)}}function qe(e,t){return function(n,r){n||r[0]&&r[0].error?((n=n||r[0]).docId=t,e(n)):e(null,r.length?r[0]:r)}}function Ne(e,t){return e._id===t._id?(e._revisions?e._revisions.start:0)-(t._revisions?t._revisions.start:0):e._id<t._id?-1:1}function Be(e){var t=e._compactionQueue[0],n=t.opts,r=t.callback;e.get("_local/compaction").catch((function(){return!1})).then((function(t){t&&t.last_seq&&(n.last_seq=t.last_seq),e._compact(n,(function(t,n){t?r(t):r(null,n),w((function(){e._compactionQueue.shift(),e._compactionQueue.length&&Be(e)}))}))}))}function Le(e){return null===e||"object"!=typeof e||Array.isArray(e)}const Fe=/^\d+-[^-]*$/;function Me(e){return"string"==typeof e&&Fe.test(e)}class Ue extends(u()){_setup(){this.post=m("post",(function(e,t,n){if("function"==typeof t&&(n=t,t={}),Le(e))return n(U(B));this.bulkDocs({docs:[e]},t,qe(n,e._id))})).bind(this),this.put=m("put",(function(e,t,n){if("function"==typeof t&&(n=t,t={}),Le(e))return n(U(B));if(W(e._id),"_rev"in e&&!Me(e._rev))return n(U(F));if(Ae(e._id)&&"function"==typeof this._putLocal)return e._deleted?this._removeLocal(e,n):this._putLocal(e,n);const r=n=>{"function"==typeof this._put&&!1!==t.new_edits?this._put(e,t,n):this.bulkDocs({docs:[e]},t,qe(n,e._id))};var i,s,o,a;t.force&&e._rev?(s=(i=e._rev.split("-"))[1],o=parseInt(i[0],10)+1,a=ve(),e._revisions={start:o,ids:[a,s]},e._rev=o+"-"+a,t.new_edits=!1,r((function(t){var r=t?null:{ok:!0,id:e._id,rev:e._rev};n(t,r)}))):r(n)})).bind(this),this.putAttachment=m("putAttachment",(function(e,t,n,r,i){var s=this;function o(e){var n="_rev"in e?parseInt(e._rev,10):0;return e._attachments=e._attachments||{},e._attachments[t]={content_type:i,data:r,revpos:++n},s.put(e)}return"function"==typeof i&&(i=r,r=n,n=null),void 0===i&&(i=r,r=n,n=null),i||S("warn","Attachment",t,"on document",e,"is missing content_type"),s.get(e).then((function(e){if(e._rev!==n)throw U($);return o(e)}),(function(t){if(t.reason===R.message)return o({_id:e});throw t}))})).bind(this),this.removeAttachment=m("removeAttachment",(function(e,t,n,r){this.get(e,((e,i)=>{if(e)r(e);else if(i._rev===n){if(!i._attachments)return r();delete i._attachments[t],0===Object.keys(i._attachments).length&&delete i._attachments,this.put(i,r)}else r(U($))}))})).bind(this),this.remove=m("remove",(function(e,t,n,r){var i;"string"==typeof t?(i={_id:e,_rev:t},"function"==typeof n&&(r=n,n={})):(i=e,"function"==typeof t?(r=t,n={}):(r=n,n=t)),(n=n||{}).was_delete=!0;var s={_id:i._id,_rev:i._rev||n.rev,_deleted:!0};if(Ae(s._id)&&"function"==typeof this._removeLocal)return this._removeLocal(i,r);this.bulkDocs({docs:[s]},n,qe(r,s._id))})).bind(this),this.revsDiff=m("revsDiff",(function(e,t,n){"function"==typeof t&&(n=t,t={});var r=Object.keys(e);if(!r.length)return n(null,{});var i=0,s=new Map;function o(e,t){s.has(e)||s.set(e,{missing:[]}),s.get(e).missing.push(t)}r.forEach((function(t){this._getRevisionTree(t,(function(a,c){if(a&&404===a.status&&"missing"===a.message)s.set(t,{missing:e[t]});else{if(a)return n(a);!function(t,n){var r=e[t].slice(0);_e(n,(function(e,n,i,s,a){var c=n+"-"+i,u=r.indexOf(c);-1!==u&&(r.splice(u,1),"available"!==a.status&&o(t,c))})),r.forEach((function(e){o(t,e)}))}(t,c)}if(++i===r.length){var u={};return s.forEach((function(e,t){u[t]=e})),n(null,u)}}))}),this)})).bind(this),this.bulkGet=m("bulkGet",(function(e,t){_(this,e,t)})).bind(this),this.compactDocument=m("compactDocument",(function(e,t,n){this._getRevisionTree(e,((r,i)=>{if(r)return n(r);var s=function(e){var t={},n=[];return _e(e,(function(e,r,i,s){var o=r+"-"+i;return e&&(t[o]=0),void 0!==s&&n.push({from:s,to:o}),o})),n.reverse(),n.forEach((function(e){void 0===t[e.from]?t[e.from]=1+t[e.to]:t[e.from]=Math.min(t[e.from],1+t[e.to])})),t}(i),o=[],a=[];Object.keys(s).forEach((function(e){s[e]>t&&o.push(e)})),_e(i,(function(e,t,n,r,i){var s=t+"-"+n;"available"===i.status&&-1!==o.indexOf(s)&&a.push(s)})),this._doCompaction(e,a,n)}))})).bind(this),this.compact=m("compact",(function(e,t){"function"==typeof e&&(t=e,e={}),e=e||{},this._compactionQueue=this._compactionQueue||[],this._compactionQueue.push({opts:e,callback:t}),1===this._compactionQueue.length&&Be(this)})).bind(this),this.get=m("get",(function(e,t,n){if("function"==typeof t&&(n=t,t={}),t=t||{},"string"!=typeof e)return n(U(E));if(Ae(e)&&"function"==typeof this._getLocal)return this._getLocal(e,n);var r=[];const i=()=>{var i=[],s=r.length;if(!s)return n(null,i);r.forEach((r=>{this.get(e,{rev:r,revs:t.revs,latest:t.latest,attachments:t.attachments,binary:t.binary},(function(e,t){if(e)i.push({missing:r});else{for(var o,a=0,c=i.length;a<c;a++)if(i[a].ok&&i[a].ok._rev===t._rev){o=!0;break}o||i.push({ok:t})}--s||n(null,i)}))}))};if(!t.open_revs)return this._get(e,t,((r,i)=>{if(r)return r.docId=e,n(r);var s=i.doc,o=i.metadata,a=i.ctx;if(t.conflicts){var c=ke(o);c.length&&(s._conflicts=c)}if(Ie(o,s._rev)&&(s._deleted=!0),t.revs||t.revs_info){for(var u=s._rev.split("-"),l=parseInt(u[0],10),f=u[1],d=Se(o.rev_tree),h=null,p=0;p<d.length;p++){var m=d[p];const e=m.ids.findIndex((e=>e.id===f));(e===l-1||!h&&-1!==e)&&(h=m)}if(!h)return(r=new Error("invalid rev tree")).docId=e,n(r);const i=s._rev.split("-")[1],a=h.ids.findIndex((e=>e.id===i))+1;var v=h.ids.length-a;if(h.ids.splice(a,v),h.ids.reverse(),t.revs&&(s._revisions={start:h.pos+h.ids.length-1,ids:h.ids.map((function(e){return e.id}))}),t.revs_info){var y=h.pos+h.ids.length;s._revs_info=h.ids.map((function(e){return{rev:--y+"-"+e.id,status:e.opts.status}}))}}if(t.attachments&&s._attachments){var g=s._attachments,_=Object.keys(g).length;if(0===_)return n(null,s);Object.keys(g).forEach((e=>{this._getAttachment(s._id,e,g[e],{binary:t.binary,metadata:o,ctx:a},(function(t,r){var i=s._attachments[e];i.data=r,delete i.stub,delete i.length,--_||n(null,s)}))}))}else{if(s._attachments)for(var b in s._attachments)Object.prototype.hasOwnProperty.call(s._attachments,b)&&(s._attachments[b].stub=!0);n(null,s)}}));if("all"===t.open_revs)this._getRevisionTree(e,(function(e,t){if(e)return n(e);r=we(t).map((function(e){return e.rev})),i()}));else{if(!Array.isArray(t.open_revs))return n(U(A,"function_clause"));r=t.open_revs;for(var s=0;s<r.length;s++)if(!Me(r[s]))return n(U(F));i()}})).bind(this),this.getAttachment=m("getAttachment",(function(e,t,n,r){n instanceof Function&&(r=n,n={}),this._get(e,n,((i,s)=>i?r(i):s.doc._attachments&&s.doc._attachments[t]?(n.ctx=s.ctx,n.binary=!0,n.metadata=s.metadata,void this._getAttachment(e,t,s.doc._attachments[t],n,r)):r(U(R))))})).bind(this),this.allDocs=m("allDocs",(function(e,t){if("function"==typeof e&&(t=e,e={}),e.skip=void 0!==e.skip?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return t(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter((function(t){return t in e}))[0];if(n)return void t(U(D,"Query parameter `"+n+"` is not compatible with multi-get"));if(!H(this)&&(function(e){var t="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):e.skip>0?e.keys.slice(e.skip):e.keys;e.keys=t,e.skip=0,delete e.limit,e.descending&&(t.reverse(),e.descending=!1)}(e),0===e.keys.length))return this._allDocs({limit:0},t)}return this._allDocs(e,t)})).bind(this),this.close=m("close",(function(e){return this._closed=!0,this.emit("closed"),this._close(e)})).bind(this),this.info=m("info",(function(e){this._info(((t,n)=>{if(t)return e(t);n.db_name=n.db_name||this.name,n.auto_compaction=!(!this.auto_compaction||H(this)),n.adapter=this.adapter,e(null,n)}))})).bind(this),this.id=m("id",(function(e){return this._id(e)})).bind(this),this.bulkDocs=m("bulkDocs",(function(e,t,n){if("function"==typeof t&&(n=t,t={}),t=t||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return n(U(P));for(var r=0;r<e.docs.length;++r){const t=e.docs[r];if(Le(t))return n(U(B));if("_rev"in t&&!Me(t._rev))return n(U(F))}var i;if(e.docs.forEach((function(e){e._attachments&&Object.keys(e._attachments).forEach((function(t){i=i||function(e){return"_"===e.charAt(0)&&e+" is not a valid attachment name, attachment names cannot start with '_'"}(t),e._attachments[t].content_type||S("warn","Attachment",t,"on document",e._id,"is missing content_type")}))})),i)return n(U(N,i));"new_edits"in t||(t.new_edits=!("new_edits"in e)||e.new_edits);var s=this;t.new_edits||H(s)||e.docs.sort(Ne),function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var s=r[i];n._attachments[s]=v(n._attachments[s],["data","digest","content_type","length","revpos","stub"])}}}(e.docs);var o=e.docs.map((function(e){return e._id}));this._bulkDocs(e,t,(function(e,r){if(e)return n(e);if(t.new_edits||(r=r.filter((function(e){return e.error}))),!H(s))for(var i=0,a=r.length;i<a;i++)r[i].id=r[i].id||o[i];n(null,r)}))})).bind(this),this.registerDependentDatabase=m("registerDependentDatabase",(function(e,t){var n=d(this.__opts);this.__opts.view_adapter&&(n.adapter=this.__opts.view_adapter);var r=new this.constructor(e,n);te(this,"_local/_pouch_dependentDbs",(function(t){return t.dependentDbs=t.dependentDbs||{},!t.dependentDbs[e]&&(t.dependentDbs[e]=!0,t)})).then((function(){t(null,{db:r})})).catch(t)})).bind(this),this.destroy=m("destroy",(function(e,t){"function"==typeof e&&(t=e,e={});var n=!("use_prefix"in this)||this.use_prefix;const r=()=>{this._destroy(e,((e,n)=>{if(e)return t(e);this._destroyed=!0,this.emit("destroyed"),t(null,n||{ok:!0})}))};if(H(this))return r();this.get("_local/_pouch_dependentDbs",((e,i)=>{if(e)return 404!==e.status?t(e):r();var s=i.dependentDbs,o=this.constructor,a=Object.keys(s).map((e=>{var t=n?e.replace(new RegExp("^"+o.prefix),""):e;return new o(t,this.__opts).destroy()}));Promise.all(a).then(r,t)}))})).bind(this)}_compact(e,t){var n,r={return_docs:!1,last_seq:e.last_seq||0,since:e.last_seq||0},i=[],s=0;const o=e=>{this.activeTasks.update(n,{completed_items:++s}),i.push(this.compactDocument(e.id,0))},a=e=>{this.activeTasks.remove(n,e),t(e)},c=e=>{var r=e.last_seq;Promise.all(i).then((()=>te(this,"_local/compaction",(e=>(!e.last_seq||e.last_seq<r)&&(e.last_seq=r,e))))).then((()=>{this.activeTasks.remove(n),t(null,{ok:!0})})).catch(a)};this.info().then((e=>{n=this.activeTasks.add({name:"database_compaction",total_items:e.update_seq-r.last_seq}),this.changes(r).on("change",o).on("complete",c).on("error",a)}))}changes(e,t){return"function"==typeof e&&(t=e,e={}),(e=e||{}).return_docs="return_docs"in e?e.return_docs:!e.live,new De(this,e,t)}type(){return"function"==typeof this._type?this._type():this.adapter}}Ue.prototype.purge=m("_purge",(function(e,t,n){if(void 0===this._purge)return n(U(A,"Purge is not implemented in the "+this.adapter+" adapter."));var r=this;r._getRevisionTree(e,((i,s)=>{if(i)return n(i);if(!s)return n(U(R));let o;try{o=function(e,t){let n=[];const r=e.slice();let i;for(;i=r.pop();){const{pos:e,ids:s}=i,o=`${e}-${s[0]}`,a=s[2];if(n.push(o),o===t){if(0!==a.length)throw new Error("The requested revision is not a leaf");return n.reverse()}(0===a.length||a.length>1)&&(n=[]);for(let t=0,n=a.length;t<n;t++)r.push({pos:e+1,ids:a[t]})}if(0===n.length)throw new Error("The requested revision does not exist");return n.reverse()}(s,t)}catch(i){return n(i.message||i)}r._purge(e,o,((i,s)=>{if(i)return n(i);(function(e,t,n){return e.get("_local/purges").then((function(e){const r=e.purgeSeq+1;return e.purges.push({docId:t,rev:n,purgeSeq:r}),e.purges.length>self.purged_infos_limit&&e.purges.splice(0,e.purges.length-self.purged_infos_limit),e.purgeSeq=r,e})).catch((function(e){if(404!==e.status)throw e;return{_id:"_local/purges",purges:[{docId:t,rev:n,purgeSeq:0}],purgeSeq:0}})).then((function(t){return e.put(t)}))})(r,e,t).then((function(){return n(null,s)}))}))}))}));class ze{constructor(){this.isReady=!1,this.failed=!1,this.queue=[]}execute(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()}fail(e){this.failed=e,this.execute()}ready(e){this.isReady=!0,this.db=e,this.execute()}addTask(e){this.queue.push(e),this.failed&&this.execute()}}function Ke(e,t){let n=function(...e){if(!(this instanceof n))return new n(...e);t.apply(this,e)};var r,i;return i=e,(r=n).prototype=Object.create(i.prototype,{constructor:{value:r}}),n}class We extends Ue{constructor(e,t){super(),this._setup(e,t)}_setup(e,t){if(super._setup(),t=t||{},e&&"object"==typeof e&&(e=(t=e).name,delete t.name),void 0===t.deterministic_revs&&(t.deterministic_revs=!0),this.__opts=t=d(t),this.auto_compaction=t.auto_compaction,this.purged_infos_limit=t.purged_infos_limit||1e3,this.prefix=He.prefix,"string"!=typeof e)throw new Error("Missing/invalid DB name");var n=function(e,t){var n=e.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=He.adapters,i=He.preferredAdapters,s=He.prefix,o=t.adapter;if(!o)for(var a=0;a<i.length&&"idb"===(o=i[a])&&"websql"in r&&b()&&localStorage["_pouch__websqldb_"+s+e];++a)S("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');var c=r[o];return{name:c&&"use_prefix"in c&&!c.use_prefix?e:s+e,adapter:o}}((t.prefix||"")+e,t);if(t.name=n.name,t.adapter=t.adapter||n.adapter,this.name=e,this._adapter=t.adapter,He.emit("debug",["adapter","Picked adapter: ",t.adapter]),!He.adapters[t.adapter]||!He.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);if(t.view_adapter&&(!He.adapters[t.view_adapter]||!He.adapters[t.view_adapter].valid()))throw new Error("Invalid View Adapter: "+t.view_adapter);this.taskqueue=new ze,this.adapter=t.adapter,He.adapters[t.adapter].call(this,t,(e=>{if(e)return this.taskqueue.fail(e);!function(e){function t(t){e.removeListener("closed",n),t||e.constructor.emit("destroyed",e.name)}function n(){e.removeListener("destroyed",t),e.constructor.emit("unref",e)}e.once("destroyed",t),e.once("closed",n),e.constructor.emit("ref",e)}(this),this.emit("created",this),He.emit("created",this.name),this.taskqueue.ready(this)}))}}const He=Ke(We,(function(e,t){We.prototype._setup.call(this,e,t)}));var Je=fetch,Ve=Headers;He.adapters={},He.preferredAdapters=[],He.prefix="_pouch_";var Ge=new(u());function Qe(e,t){for(var n=e,r=0,i=t.length;r<i&&(n=n[t[r]]);r++);return n}function Ye(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var s=e[r];r>0&&"\\"===e[r-1]&&("$"===s||"."===s)?n=n.substring(0,n.length-1)+s:"."===s?(t.push(n),n=""):n+=s}return t.push(n),t}!function(e){Object.keys(u().prototype).forEach((function(t){"function"==typeof u().prototype[t]&&(e[t]=Ge[t].bind(Ge))}));var t=e._destructionListeners=new Map;e.on("ref",(function(e){t.has(e.name)||t.set(e.name,[]),t.get(e.name).push(e)})),e.on("unref",(function(e){if(t.has(e.name)){var n=t.get(e.name),r=n.indexOf(e);r<0||(n.splice(r,1),n.length>1?t.set(e.name,n):t.delete(e.name))}})),e.on("destroyed",(function(e){if(t.has(e)){var n=t.get(e);t.delete(e),n.forEach((function(e){e.emit("destroyed",!0)}))}}))}(He),He.adapter=function(e,t,n){t.valid()&&(He.adapters[e]=t,n&&He.preferredAdapters.push(e))},He.plugin=function(e){if("function"==typeof e)e(He);else{if("object"!=typeof e||0===Object.keys(e).length)throw new Error('Invalid plugin: got "'+e+'", expected an object or a function');Object.keys(e).forEach((function(t){He.prototype[t]=e[t]}))}return this.__defaults&&(He.__defaults=Object.assign({},this.__defaults)),He},He.defaults=function(e){let t=Ke(He,(function(e,n){n=n||{},e&&"object"==typeof e&&(e=(n=e).name,delete n.name),n=Object.assign({},t.__defaults,n),He.call(this,e,n)}));return t.preferredAdapters=He.preferredAdapters.slice(),Object.keys(He).forEach((function(e){e in t||(t[e]=He[e])})),t.__defaults=Object.assign({},this.__defaults,e),t},He.fetch=function(e,t){return Je(e,t)},He.prototype.activeTasks=He.activeTasks=new class{constructor(){this.tasks={}}list(){return Object.values(this.tasks)}add(e){const t=(0,o.Z)();return this.tasks[t]={id:t,name:e.name,total_items:e.total_items,created_at:(new Date).toJSON()},t}get(e){return this.tasks[e]}remove(e,t){return delete this.tasks[e],this.tasks}update(e,t){const n=this.tasks[e];if(void 0!==n){const r={id:n.id,name:n.name,created_at:n.created_at,total_items:t.total_items||n.total_items,completed_items:t.completed_items||n.completed_items,updated_at:(new Date).toJSON()};this.tasks[e]=r}return this.tasks}};var Xe=["$or","$nor","$not"];function Ze(e){return Xe.indexOf(e)>-1}function et(e){return Object.keys(e)[0]}function tt(e){var t={},n={$or:!0,$nor:!0};return e.forEach((function(e){Object.keys(e).forEach((function(r){var i=e[r];if("object"!=typeof i&&(i={$eq:i}),Ze(r))if(i instanceof Array){if(n[r])return n[r]=!1,void(t[r]=i);var s=[];t[r].forEach((function(e){Object.keys(i).forEach((function(t){var n=i[t],r=Math.max(Object.keys(e).length,Object.keys(n).length),o=tt([e,n]);Object.keys(o).length<=r||s.push(o)}))})),t[r]=s}else t[r]=tt([i]);else{var o=t[r]=t[r]||{};Object.keys(i).forEach((function(e){var t=i[e];return"$gt"===e||"$gte"===e?function(e,t,n){void 0===n.$eq&&(void 0!==n.$gte?"$gte"===e?t>n.$gte&&(n.$gte=t):t>=n.$gte&&(delete n.$gte,n.$gt=t):void 0!==n.$gt?"$gte"===e?t>n.$gt&&(delete n.$gt,n.$gte=t):t>n.$gt&&(n.$gt=t):n[e]=t)}(e,t,o):"$lt"===e||"$lte"===e?function(e,t,n){void 0===n.$eq&&(void 0!==n.$lte?"$lte"===e?t<n.$lte&&(n.$lte=t):t<=n.$lte&&(delete n.$lte,n.$lt=t):void 0!==n.$lt?"$lte"===e?t<n.$lt&&(delete n.$lt,n.$lte=t):t<n.$lt&&(n.$lt=t):n[e]=t)}(e,t,o):"$ne"===e?function(e,t){"$ne"in t?t.$ne.push(e):t.$ne=[e]}(t,o):"$eq"===e?function(e,t){delete t.$gt,delete t.$gte,delete t.$lt,delete t.$lte,delete t.$ne,t.$eq=e}(t,o):"$regex"===e?function(e,t){"$regex"in t?t.$regex.push(e):t.$regex=[e]}(t,o):void(o[e]=t)}))}}))})),t}function nt(e){for(var t in e){if(Array.isArray(e))for(var n in e)e[n].$and&&(e[n]=tt(e[n].$and));var r=e[t];"object"==typeof r&&nt(r)}return e}function rt(e,t){for(var n in e){"$and"===n&&(t=!0);var r=e[n];"object"==typeof r&&(t=rt(r,t))}return t}function it(e){var t=d(e);rt(t,!1)&&"$and"in(t=nt(t))&&(t=tt(t.$and)),["$or","$nor"].forEach((function(e){e in t&&t[e].forEach((function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n],i=e[r];"object"==typeof i&&null!==i||(e[r]={$eq:i})}}))})),"$not"in t&&(t.$not=tt([t.$not]));for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],s=t[i];"object"==typeof s&&null!==s||(s={$eq:s}),t[i]=s}return st(t),t}function st(e){Object.keys(e).forEach((function(t){var n=e[t];Array.isArray(n)?n.forEach((function(e){e&&"object"==typeof e&&st(e)})):"$ne"===t?e.$ne=[n]:"$regex"===t?e.$regex=[n]:n&&"object"==typeof n&&st(n)}))}function ot(e,t){if(e===t)return 0;e=at(e),t=at(t);var n=ft(e),r=ft(t);if(n-r!=0)return n-r;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return function(e,t){return e===t?0:e>t?1:-1}(e,t)}return Array.isArray(e)?function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=ot(e[r],t[r]);if(0!==i)return i}return e.length===t.length?0:e.length>t.length?1:-1}(e,t):function(e,t){for(var n=Object.keys(e),r=Object.keys(t),i=Math.min(n.length,r.length),s=0;s<i;s++){var o=ot(n[s],r[s]);if(0!==o)return o;if(0!==(o=ot(e[n[s]],t[r[s]])))return o}return n.length===r.length?0:n.length>r.length?1:-1}(e,t)}function at(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=at(t[r])}else{if(e instanceof Date)return e.toJSON();if(null!==e)for(var i in e={},t)if(Object.prototype.hasOwnProperty.call(t,i)){var s=t[i];void 0!==s&&(e[i]=at(s))}}}return e}function ct(e){return ft(e=at(e))+""+function(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return function(e){if(0===e)return"1";var t,n=e.toExponential().split(/e\+?/),r=parseInt(n[1],10),i=e<0,s=i?"0":"2",o=function(e){for(var t="",n=3-e.length;t.length<n;)t+="0";return t}(t=((i?-r:r)- -324).toString())+t;s+=""+o;var a=Math.abs(parseFloat(n[0]));i&&(a=10-a);var c=a.toFixed(20);return s+""+c.replace(/\.?0+$/,"")}(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,s="";if(t)for(;++r<i;)s+=ct(n[r]);else for(;++r<i;){var o=n[r];s+=ct(o)+ct(e[o])}return s}return""}(e)+"\0"}function ut(e,t){var n,r=t;if("1"===e[t])n=0,t++;else{var i="0"===e[t];t++;var s="",o=e.substring(t,t+3),a=parseInt(o,10)+-324;for(i&&(a=-a),t+=3;;){var c=e[t];if("\0"===c)break;s+=c,t++}n=1===(s=s.split(".")).length?parseInt(s,10):parseFloat(s[0]+"."+s[1]),i&&(n-=10),0!==a&&(n=parseFloat(n+"e"+a))}return{num:n,length:t-r}}function lt(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,s=r.index;Array.isArray(i)?i.push(n):s===e.length-2?i[e.pop()]=n:e.push(n)}}function ft(e){var t=["boolean","number","string","object"].indexOf(typeof e);return~t?null===e?1:Array.isArray(e)?5:t<3?t+2:t+3:Array.isArray(e)?5:void 0}function dt(e,t,n){return n.every((function(n){var r=t[n],i=Ye(n),s=Qe(e,i);return Ze(n)?function(e,t,n){return"$or"===e?t.some((function(e){return dt(n,e,Object.keys(e))})):"$not"===e?!dt(n,t,Object.keys(t)):!t.find((function(e){return dt(n,e,Object.keys(e))}))}(n,r,e):ht(r,e,i,s)}))}function ht(e,t,n,r){return!e||("object"==typeof e?Object.keys(e).every((function(i){var s=e[i];if(0===i.indexOf("$"))return pt(i,t,s,n,r);var o=Ye(i);if(void 0===r&&"object"!=typeof s&&o.length>0)return!1;var a=Qe(r,o);return"object"==typeof s?ht(s,t,n,a):pt("$eq",t,s,o,a)})):e===r)}function pt(e,t,n,r,i){if(!gt[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return gt[e](t,n,r,i)}function mt(e){return null!=e}function vt(e){return void 0!==e}function yt(e,t){return t.some((function(t){return e instanceof Array?e.some((function(e){return 0===ot(t,e)})):0===ot(t,e)}))}var gt={$elemMatch:function(e,t,n,r){return!!Array.isArray(r)&&0!==r.length&&("object"==typeof r[0]&&null!==r[0]?r.some((function(e){return dt(e,t,Object.keys(t))})):r.some((function(r){return ht(t,e,n,r)})))},$allMatch:function(e,t,n,r){return!!Array.isArray(r)&&0!==r.length&&("object"==typeof r[0]&&null!==r[0]?r.every((function(e){return dt(e,t,Object.keys(t))})):r.every((function(r){return ht(t,e,n,r)})))},$eq:function(e,t,n,r){return vt(r)&&0===ot(r,t)},$gte:function(e,t,n,r){return vt(r)&&ot(r,t)>=0},$gt:function(e,t,n,r){return vt(r)&&ot(r,t)>0},$lte:function(e,t,n,r){return vt(r)&&ot(r,t)<=0},$lt:function(e,t,n,r){return vt(r)&&ot(r,t)<0},$exists:function(e,t,n,r){return t?vt(r):!vt(r)},$mod:function(e,t,n,r){return mt(r)&&function(e,t){return"number"==typeof e&&parseInt(e,10)===e&&e%t[0]===t[1]}(r,t)},$ne:function(e,t,n,r){return t.every((function(e){return 0!==ot(r,e)}))},$in:function(e,t,n,r){return mt(r)&&yt(r,t)},$nin:function(e,t,n,r){return mt(r)&&!yt(r,t)},$size:function(e,t,n,r){return mt(r)&&Array.isArray(r)&&function(e,t){return e.length===t}(r,t)},$all:function(e,t,n,r){return Array.isArray(r)&&function(e,t){return t.every((function(t){return e.some((function(e){return 0===ot(t,e)}))}))}(r,t)},$regex:function(e,t,n,r){return mt(r)&&"string"==typeof r&&t.every((function(e){return function(e,t){return new RegExp(t).test(e)}(r,e)}))},$type:function(e,t,n,r){return function(e,t){switch(t){case"null":return null===e;case"boolean":return"boolean"==typeof e;case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"array":return e instanceof Array;case"object":return"[object Object]"==={}.toString.call(e)}}(r,t)}};function _t(e,t){if(e.selector&&e.filter&&"_selector"!==e.filter){var n="string"==typeof e.filter?e.filter:"function";return t(new Error('selector invalid for filter "'+n+'"'))}t()}function bt(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=V(e.view):e.filter=V(e.filter))}function wt(e,t){return t.filter&&"string"==typeof t.filter&&!t.doc_ids&&!H(e.db)}function kt(e,t){var n=t.complete;if("_view"===t.filter){if(!t.view||"string"!=typeof t.view){var r=U(N,"`view` filter parameter not found or invalid.");return n(r)}var i=J(t.view);e.db.get("_design/"+i[0],(function(r,s){if(e.isCancelled)return n(null,{status:"cancelled"});if(r)return n(z(r));var o=s&&s.views&&s.views[i[1]]&&s.views[i[1]].map;if(!o)return n(U(R,s.views?"missing json key: "+i[1]:"missing json key: views"));t.filter=ee(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+o+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{}),e.doChanges(t)}))}else if(t.selector)t.filter=function(e){return function(e,t){if("object"!=typeof t)throw new Error("Selector error: expected a JSON object");var n=function(e,t,n){if(e=e.filter((function(e){return dt(e.doc,t.selector,n)})),t.sort){var r=function(e){function t(t){return e.map((function(e){var n=Ye(et(e));return Qe(t,n)}))}return function(e,n){var r,i,s=ot(t(e.doc),t(n.doc));return 0!==s?s:(r=e.doc._id)<(i=n.doc._id)?-1:r>i?1:0}}(t.sort);e=e.sort(r),"string"!=typeof t.sort[0]&&"desc"===(i=t.sort[0])[et(i)]&&(e=e.reverse())}var i;if("limit"in t||"skip"in t){var s=t.skip||0,o=("limit"in t?t.limit:e.length)+s;e=e.slice(s,o)}return e}([{doc:e}],{selector:t=it(t)},Object.keys(t));return n&&1===n.length}(e,t.selector)},e.doChanges(t);else{var s=J(t.filter);e.db.get("_design/"+s[0],(function(r,i){if(e.isCancelled)return n(null,{status:"cancelled"});if(r)return n(z(r));var o=i&&i.filters&&i.filters[s[1]];if(!o)return n(U(R,i&&i.filters?"missing json key: "+s[1]:"missing json key: filters"));t.filter=ee('"use strict";\nreturn '+o+";",{}),e.doChanges(t)}))}}function St(e){return e.reduce((function(e,t){return e[t]=!0,e}),{})}He.plugin((function(e){e._changesFilterPlugin={validate:_t,normalize:bt,shouldFilter:wt,filter:kt}})),He.version="9.0.0";var Ct=St(["_id","_rev","_access","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),jt=St(["_access","_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function Ot(e){if(!/^\d+-/.test(e))return U(F);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function Pt(e,t,n){var r,i,s;n||(n={deterministic_revs:!0});var o={status:"available"};if(e._deleted&&(o.deleted=!0),t)if(e._id||(e._id=ye()),i=ve(e,n.deterministic_revs),e._rev){if((s=Ot(e._rev)).error)return s;e._rev_tree=[{pos:s.prefix,ids:[s.id,{status:"missing"},[[i,o,[]]]]}],r=s.prefix+1}else e._rev_tree=[{pos:1,ids:[i,o,[]]}],r=1;else if(e._revisions&&(e._rev_tree=function(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,i=[r[0],t,[]],s=1,o=r.length;s<o;s++)i=[r[s],{status:"missing"},[i]];return[{pos:n,ids:i}]}(e._revisions,o),r=e._revisions.start,i=e._revisions.ids[0]),!e._rev_tree){if((s=Ot(e._rev)).error)return s;r=s.prefix,i=s.id,e._rev_tree=[{pos:r,ids:[i,o,[]]}]}W(e._id),e._rev=r+"-"+i;var a={metadata:{},data:{}};for(var c in e)if(Object.prototype.hasOwnProperty.call(e,c)){var u="_"===c[0];if(u&&!Ct[c]){var l=U(q,c);throw l.message=q.message+": "+c,l}u&&!jt[c]?a.metadata[c.slice(1)]=e[c]:a.data[c]=e[c]}return a}function Rt(e,t,n){if(e.stub)return n();"string"==typeof e.data?function(e,t,n){var r=function(e){try{return ne(e)}catch(e){return{error:U(T,"Attachment is not a valid base64 string")}}}(e.data);if(r.error)return n(r.error);e.length=r.length,e.data="blob"===t?oe(r,e.content_type):"base64"===t?re(r):r,pe(r,(function(t){e.digest="md5-"+t,n()}))}(e,t,n):function(e,t,n){pe(e.data,(function(r){e.digest="md5-"+r,e.length=e.data.size||e.data.length||0,"binary"===t?ue(e.data,(function(t){e.data=t,n()})):"base64"===t?le(e.data,(function(t){e.data=t,n()})):n()}))}(e,t,n)}var $t="document-store",Et="by-sequence",xt="attach-store",It="attach-seq-store",At="meta-store",Tt="local-store",Dt="detect-blob-support";function qt(e){try{return JSON.stringify(e)}catch(t){return a.stringify(e)}}function Nt(e){return function(t){var n="unknown_error";t.target&&t.target.error&&(n=t.target.error.name||t.target.error.message),e(U(L,n,t.type))}}function Bt(e,t,n){return{data:qt(e),winningRev:t,deletedOrLocal:n?"1":"0",seq:e.seq,id:e.id}}function Lt(e){if(!e)return null;var t=function(e){try{return JSON.parse(e)}catch(t){return a.parse(e)}}(e.data);return t.winningRev=e.winningRev,t.deleted="1"===e.deletedOrLocal,t.seq=e.seq,t}function Ft(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function Mt(e,t,n,r){n?r(e?"string"!=typeof e?e:ae(e,t):ie([""],{type:t})):e?"string"!=typeof e?ce(e,(function(e){r(re(e))})):r(e):r("")}function Ut(e,t,n,r){var i=Object.keys(e._attachments||{});if(!i.length)return r&&r();var s=0;function o(){++s===i.length&&r&&r()}i.forEach((function(r){t.attachments&&t.include_docs?function(e,t){var r=e._attachments[t],i=r.digest;n.objectStore(xt).get(i).onsuccess=function(e){r.body=e.target.result.body,o()}}(e,r):(e._attachments[r].stub=!0,o())}))}function zt(e,t){return Promise.all(e.map((function(e){if(e.doc&&e.doc._attachments){var n=Object.keys(e.doc._attachments);return Promise.all(n.map((function(n){var r=e.doc._attachments[n];if("body"in r){var i=r.body,s=r.content_type;return new Promise((function(o){Mt(i,s,t,(function(t){e.doc._attachments[n]=Object.assign(v(r,["digest","content_type"]),{data:t}),o()}))}))}})))}})))}function Kt(e,t,n){var r=[],i=n.objectStore(Et),s=n.objectStore(xt),o=n.objectStore(It),a=e.length;function c(){--a||r.length&&r.forEach((function(e){o.index("digestSeq").count(IDBKeyRange.bound(e+"::",e+"::ï¿¿",!1,!1)).onsuccess=function(t){t.target.result||s.delete(e)}}))}e.forEach((function(e){var n=i.index("_doc_id_rev"),s=t+"::"+e;n.getKey(s).onsuccess=function(e){var t=e.target.result;if("number"!=typeof t)return c();i.delete(t),o.index("seq").openCursor(IDBKeyRange.only(t)).onsuccess=function(e){var t=e.target.result;if(t){var n=t.value.digestSeq.split("::")[0];r.push(n),o.delete(t.primaryKey),t.continue()}else c()}}}))}function Wt(e,t,n){try{return{txn:e.transaction(t,n)}}catch(e){return{error:e}}}var Ht=new k;function Jt(e,t,n,r,i){var s,o,a;function c(e){o=e.target.result,s&&i(s,o,a)}function u(e){s=e.target.result,o&&i(s,o,a)}function l(e){var t=e.target.result;if(!t)return i();i([t.key],[t.value],t)}-1===r&&(r=1e3),"function"==typeof e.getAll&&"function"==typeof e.getAllKeys&&r>1&&!n?(a={continue:function(){if(!s.length)return i();var n,a=s[s.length-1];if(t&&t.upper)try{n=IDBKeyRange.bound(a,t.upper,!0,t.upperOpen)}catch(e){if("DataError"===e.name&&0===e.code)return i()}else n=IDBKeyRange.lowerBound(a,!0);t=n,s=null,o=null,e.getAll(t,r).onsuccess=c,e.getAllKeys(t,r).onsuccess=u}},e.getAll(t,r).onsuccess=c,e.getAllKeys(t,r).onsuccess=u):n?e.openCursor(t,"prev").onsuccess=l:e.openCursor(t).onsuccess=l}var Vt=!1,Gt=[];function Qt(){!Vt&&Gt.length&&(Vt=!0,Gt.shift()())}var Yt,Xt=new Map,Zt=new Map;function en(e,t){var n=this;!function(t,r,i){Gt.push((function(){var t;t=function(e,t){!function(e,t,n,r){try{e(t,n)}catch(t){r.emit("error",t)}}(r,e,t,i),Vt=!1,w((function(){Qt()}))},function(e,t,n){var r=t.name,i=null,s=null;function o(e){return function(t,n){t&&t instanceof Error&&!t.reason&&s&&(t.reason=s),e(t,n)}}function a(e,t){var n=e.objectStore($t);n.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),n.openCursor().onsuccess=function(e){var r=e.target.result;if(r){var i=r.value,s=Ie(i);i.deletedOrLocal=s?"1":"0",n.put(i),r.continue()}else t()}}function c(e,t){var n=e.objectStore(Tt),r=e.objectStore($t),i=e.objectStore(Et);r.openCursor().onsuccess=function(e){var s=e.target.result;if(s){var o=s.value,a=o.id,c=Ae(a),u=ge(o);if(c){var l=a+"::"+u,f=a+"::",d=a+"::~",h=i.index("_doc_id_rev"),p=IDBKeyRange.bound(f,d,!1,!1),m=h.openCursor(p);m.onsuccess=function(e){if(m=e.target.result){var t=m.value;t._doc_id_rev===l&&n.put(t),i.delete(m.primaryKey),m.continue()}else r.delete(s.primaryKey),s.continue()}}else s.continue()}else t&&t()}}function u(e,t){var n=e.objectStore(Et),r=e.objectStore(xt),i=e.objectStore(It);r.count().onsuccess=function(e){if(!e.target.result)return t();n.openCursor().onsuccess=function(e){var n=e.target.result;if(!n)return t();for(var r=n.value,s=n.primaryKey,o=Object.keys(r._attachments||{}),a={},c=0;c<o.length;c++)a[r._attachments[o[c]].digest]=!0;var u=Object.keys(a);for(c=0;c<u.length;c++){var l=u[c];i.put({seq:s,digestSeq:l+"::"+s})}n.continue()}}}function l(e){var t=e.objectStore(Et),n=e.objectStore($t);n.openCursor().onsuccess=function(e){var r=e.target.result;if(r){var i=function(e){return e.data?Lt(e):(e.deleted="1"===e.deletedOrLocal,e)}(r.value);if(i.winningRev=i.winningRev||ge(i),i.seq)return s();!function(){var e=i.id+"::",n=i.id+"::ï¿¿",r=t.index("_doc_id_rev").openCursor(IDBKeyRange.bound(e,n)),o=0;r.onsuccess=function(e){var t=e.target.result;if(!t)return i.seq=o,s();var n=t.primaryKey;n>o&&(o=n),t.continue()}}()}function s(){var e=Bt(i,i.winningRev,i.deleted);n.put(e).onsuccess=function(){r.continue()}}}}e._meta=null,e._remote=!1,e.type=function(){return"idb"},e._id=p((function(t){t(null,e._meta.instanceId)})),e._bulkDocs=function(n,r,s){!function(e,t,n,r,i,s){for(var o,a,c,u,l,f,d,h,p=t.docs,m=0,v=p.length;m<v;m++){var y=p[m];y._id&&Ae(y._id)||(y=p[m]=Pt(y,n.new_edits,e)).error&&!d&&(d=y)}if(d)return s(d);var g=!1,_=0,b=new Array(p.length),w=new Map,k=!1,S=r._meta.blobSupport?"blob":"base64";function C(){g=!0,j()}function j(){h&&g&&(h.docCount+=_,f.put(h))}function O(){k||(Ht.notify(r._meta.name),s(null,b))}function P(e,t,n,r,i,s,o,a){e.metadata.winningRev=t,e.metadata.deleted=n;var c=e.data;if(c._id=e.metadata.id,c._rev=e.metadata.rev,r&&(c._deleted=!0),c._attachments&&Object.keys(c._attachments).length)return function(e,t,n,r,i,s){var o=e.data,a=0,c=Object.keys(o._attachments);function l(){a===c.length&&E(e,t,n,r,i,s)}function f(){a++,l()}c.forEach((function(n){var r=e.data._attachments[n];if(r.stub)a++,l();else{var i=r.data;delete r.data,r.revpos=parseInt(t,10),function(e,t,n){u.count(e).onsuccess=function(r){if(r.target.result)return n();var i={digest:e,body:t};u.put(i).onsuccess=n}}(r.digest,i,f)}}))}(e,t,n,i,o,a);_+=s,j(),E(e,t,n,i,o,a)}function E(e,t,n,i,s,u){var f=e.data,d=e.metadata;function h(s){var c=e.stemmedRevs||[];i&&r.auto_compaction&&(c=c.concat(function(e){var t=[];return _e(e.rev_tree,(function(e,n,r,i,s){"available"!==s.status||e||(t.push(n+"-"+r),s.status="missing")})),t}(e.metadata))),c&&c.length&&Kt(c,e.metadata.id,o),d.seq=s.target.result;var u=Bt(d,t,n);a.put(u).onsuccess=p}function p(){b[s]={ok:!0,id:d.id,rev:d.rev},w.set(e.metadata.id,e.metadata),function(e,t,n){var r=0,i=Object.keys(e.data._attachments||{});if(!i.length)return n();function s(){++r===i.length&&n()}function o(n){var r=e.data._attachments[n].digest,i=l.put({seq:t,digestSeq:r+"::"+t});i.onsuccess=s,i.onerror=function(e){e.preventDefault(),e.stopPropagation(),s()}}for(var a=0;a<i.length;a++)o(i[a])}(e,d.seq,u)}f._doc_id_rev=d.id+"::"+d.rev,delete f._id,delete f._rev;var m=c.put(f);m.onsuccess=h,m.onerror=function(e){e.preventDefault(),e.stopPropagation(),c.index("_doc_id_rev").getKey(f._doc_id_rev).onsuccess=function(e){c.put(f,e.target.result).onsuccess=h}}}!function(e,t,n){if(!e.length)return n();var r,i=0;function s(){i++,e.length===i&&(r?n(r):n())}e.forEach((function(e){var n=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],i=0;if(!n.length)return s();function o(e){r=e,++i===n.length&&s()}for(var a in e.data._attachments)Object.prototype.hasOwnProperty.call(e.data._attachments,a)&&Rt(e.data._attachments[a],t,o)}))}(p,S,(function(t){if(t)return s(t);!function(){var t=Wt(i,[$t,Et,xt,Tt,It,At],"readwrite");if(t.error)return s(t.error);(o=t.txn).onabort=Nt(s),o.ontimeout=Nt(s),o.oncomplete=O,a=o.objectStore($t),c=o.objectStore(Et),u=o.objectStore(xt),l=o.objectStore(It),(f=o.objectStore(At)).get(At).onsuccess=function(e){h=e.target.result,j()},function(e){var t=[];if(p.forEach((function(e){e.data&&e.data._attachments&&Object.keys(e.data._attachments).forEach((function(n){var r=e.data._attachments[n];r.stub&&t.push(r.digest)}))})),!t.length)return e();var n,r=0;t.forEach((function(i){!function(e,t){u.get(e).onsuccess=function(n){if(n.target.result)t();else{var r=U(M,"unknown stub attachment with digest "+e);r.status=412,t(r)}}}(i,(function(i){i&&!n&&(n=i),++r===t.length&&e(n)}))}))}((function(t){if(t)return k=!0,s(t);!function(){if(p.length)for(var t=0,i=0,s=p.length;i<s;i++){var c=p[i];c._id&&Ae(c._id)?u():a.get(c.metadata.id).onsuccess=l}function u(){++t===p.length&&function(e,t,n,r,i,s,o,a,c){e=e||1e3;var u=a.new_edits,l=new Map,f=0,d=t.length;function h(){++f===d&&c&&c()}t.forEach((function(e,t){if(e._id&&Ae(e._id)){var r=e._deleted?"_removeLocal":"_putLocal";n[r](e,{ctx:i},(function(e,n){s[t]=e||n,h()}))}else{var o=e.metadata.id;l.has(o)?(d--,l.get(o).push([e,t])):l.set(o,[[e,t]])}})),l.forEach((function(t,n){var i=0;function c(){++i<t.length?l():h()}function l(){var l=t[i],f=l[0],d=l[1];if(r.has(n))!function(e,t,n,r,i,s,o,a){if(function(e,t){for(var n,r=e.slice(),i=t.split("-"),s=parseInt(i[0],10),o=i[1];n=r.pop();){if(n.pos===s&&n.ids[0]===o)return!0;for(var a=n.ids[2],c=0,u=a.length;c<u;c++)r.push({pos:n.pos+1,ids:a[c]})}return!1}(t.rev_tree,n.metadata.rev)&&!a)return r[i]=n,s();var c=t.winningRev||ge(t),u="deleted"in t?t.deleted:Ie(t,c),l="deleted"in n.metadata?n.metadata.deleted:Ie(n.metadata),f=/^1-/.test(n.metadata.rev);if(u&&!l&&a&&f){var d=n.data;d._rev=c,d._id=n.metadata.id,n=Pt(d,a)}var h=Ee(t.rev_tree,n.metadata.rev_tree[0],e);if(a&&(u&&l&&"new_leaf"!==h.conflicts||!u&&"new_leaf"!==h.conflicts||u&&!l&&"new_branch"===h.conflicts)){var p=U($);return r[i]=p,s()}var m=n.metadata.rev;n.metadata.rev_tree=h.tree,n.stemmedRevs=h.stemmedRevs||[],t.rev_map&&(n.metadata.rev_map=t.rev_map);var v=ge(n.metadata),y=Ie(n.metadata,v),g=u===y?0:u<y?-1:1;o(n,v,y,m===v?y:Ie(n.metadata,m),!0,g,i,s)}(e,r.get(n),f,s,d,c,o,u);else{var h=Ee([],f.metadata.rev_tree[0],e);f.metadata.rev_tree=h.tree,f.stemmedRevs=h.stemmedRevs||[],function(e,t,n){var r=ge(e.metadata),i=Ie(e.metadata,r);if("was_delete"in a&&i)return s[t]=U(R,"deleted"),n();if(u&&function(e){return"missing"===e.metadata.rev_tree[0].ids[1].status}(e)){var c=U($);return s[t]=c,n()}o(e,r,i,i,!1,i?0:1,t,n)}(f,d,c)}}l()}))}(e.revs_limit,p,r,w,o,b,P,n,C)}function l(e){var t=Lt(e.target.result);t&&w.set(t.id,t),u()}}()}))}()}))}(t,n,r,e,i,o(s))},e._get=function(e,t,n){var r,s,o,a=t.ctx;if(!a){var c=Wt(i,[$t,Et,xt],"readonly");if(c.error)return n(c.error);a=c.txn}function u(){n(o,{doc:r,metadata:s,ctx:a})}a.objectStore($t).get(e).onsuccess=function(e){if(!(s=Lt(e.target.result)))return o=U(R,"missing"),u();var n;if(t.rev)n=t.latest?function(e,t){for(var n,r=t.rev_tree.slice();n=r.pop();){var i=n.pos,s=n.ids,o=s[0],a=s[1],c=s[2],u=0===c.length,l=n.history?n.history.slice():[];if(l.push({id:o,pos:i,opts:a}),u)for(var f=0,d=l.length;f<d;f++){var h=l[f];if(h.pos+"-"+h.id===e)return i+"-"+o}for(var p=0,m=c.length;p<m;p++)r.push({pos:i+1,ids:c[p],history:l})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}(t.rev,s):t.rev;else if(n=s.winningRev,Ie(s))return o=U(R,"deleted"),u();var i=a.objectStore(Et),c=s.id+"::"+n;i.index("_doc_id_rev").get(c).onsuccess=function(e){if((r=e.target.result)&&(r=Ft(r)),!r)return o=U(R,"missing"),u();u()}}},e._getAttachment=function(e,t,n,r,s){var o;if(r.ctx)o=r.ctx;else{var a=Wt(i,[$t,Et,xt],"readonly");if(a.error)return s(a.error);o=a.txn}var c=n.digest,u=n.content_type;o.objectStore(xt).get(c).onsuccess=function(e){Mt(e.target.result.body,u,r.binary,(function(e){s(null,e)}))}},e._info=function(t){var n,r,s=Wt(i,[At,Et],"readonly");if(s.error)return t(s.error);var o=s.txn;o.objectStore(At).get(At).onsuccess=function(e){r=e.target.result.docCount},o.objectStore(Et).openKeyCursor(null,"prev").onsuccess=function(e){var t=e.target.result;n=t?t.key:0},o.oncomplete=function(){t(null,{doc_count:r,update_seq:n,idb_attachment_format:e._meta.blobSupport?"binary":"base64"})}},e._allDocs=function(e,t){!function(e,t,n){var r,i,s="startkey"in e&&e.startkey,o="endkey"in e&&e.endkey,a="key"in e&&e.key,c="keys"in e&&e.keys,u=e.skip||0,l="number"==typeof e.limit?e.limit:-1,f=!1!==e.inclusive_end;if(!c&&(r=function(e,t,n,r,i){try{if(e&&t)return i?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return i?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return i?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(e){return{error:e}}return null}(s,o,f,a,e.descending),(i=r&&r.error)&&("DataError"!==i.name||0!==i.code)))return n(U(L,i.name,i.message));var d=[$t,Et,At];e.attachments&&d.push(xt);var h=Wt(t,d,"readonly");if(h.error)return n(h.error);var p=h.txn;p.oncomplete=function(){e.attachments?zt(w,e.binary).then(j):j()},p.onabort=Nt(n);var m,v,y=p.objectStore($t),g=p.objectStore(Et),_=p.objectStore(At),b=g.index("_doc_id_rev"),w=[];function k(t,n){var r={id:n.id,key:n.id,value:{rev:t}};n.deleted?c&&(w.push(r),r.value.deleted=!0,r.doc=null):u--<=0&&(w.push(r),e.include_docs&&function(t,n,r){var i=t.id+"::"+r;b.get(i).onsuccess=function(r){if(n.doc=Ft(r.target.result)||{},e.conflicts){var i=ke(t);i.length&&(n.doc._conflicts=i)}Ut(n.doc,e,p)}}(n,r,t))}function S(e){for(var t=0,n=e.length;t<n&&w.length!==l;t++){var r=e[t];if(r.error&&c)w.push(r);else{var i=Lt(r);k(i.winningRev,i)}}}function C(e,t,n){n&&(S(t),w.length<l&&n.continue())}function j(){var t={total_rows:m,offset:e.skip,rows:w};e.update_seq&&void 0!==v&&(t.update_seq=v),n(null,t)}_.get(At).onsuccess=function(e){m=e.target.result.docCount},e.update_seq&&(g.openKeyCursor(null,"prev").onsuccess=e=>{var t=e.target.result;t&&t.key&&(v=t.key)}),i||0===l||(c?function(e,t,n){var r=new Array(e.length),i=0;e.forEach((function(s,o){t.get(s).onsuccess=function(t){t.target.result?r[o]=t.target.result:r[o]={key:s,error:"not_found"},++i===e.length&&n(e,r,{})}}))}(c,y,C):-1===l?function(e,t,n){if("function"!=typeof e.getAll){var r=[];e.openCursor(t).onsuccess=function(e){var t=e.target.result;t?(r.push(t.value),t.continue()):n({target:{result:r}})}}else e.getAll(t).onsuccess=n}(y,r,(function(t){var n=t.target.result;e.descending&&(n=n.reverse()),S(n)})):Jt(y,r,e.descending,l+u,C))}(e,i,o(t))},e._changes=function(t){return function(e,t,n,r){if((e=d(e)).continuous){var i=n+":"+ye();return Ht.addListener(n,i,t,e),Ht.notify(n),{cancel:function(){Ht.removeListener(n,i)}}}var s=e.doc_ids&&new Set(e.doc_ids);e.since=e.since||0;var o=e.since,a="limit"in e?e.limit:-1;0===a&&(a=1);var c,u,l,f,h=[],p=0,m=K(e),v=new Map;function y(e,t,n,r){if(n.seq!==t)return r();if(n.winningRev===e._rev)return r(n,e);var i=e._id+"::"+n.winningRev;f.get(i).onsuccess=function(e){r(n,Ft(e.target.result))}}function g(){e.complete(null,{results:h,last_seq:o})}var _=[$t,Et];e.attachments&&_.push(xt);var b=Wt(r,_,"readonly");if(b.error)return e.complete(b.error);(c=b.txn).onabort=Nt(e.complete),c.oncomplete=function(){!e.continuous&&e.attachments?zt(h).then(g):g()},u=c.objectStore(Et),l=c.objectStore($t),f=u.index("_doc_id_rev"),Jt(u,e.since&&!e.descending?IDBKeyRange.lowerBound(e.since,!0):null,e.descending,a,(function(t,n,r){if(r&&t.length){var i=new Array(t.length),u=new Array(t.length),f=0;n.forEach((function(n,o){!function(e,t,n){if(s&&!s.has(e._id))return n();var r=v.get(e._id);if(r)return y(e,t,r,n);l.get(e._id).onsuccess=function(i){r=Lt(i.target.result),v.set(e._id,r),y(e,t,r,n)}}(Ft(n),t[o],(function(n,s){u[o]=n,i[o]=s,++f===t.length&&function(){for(var t=[],n=0,s=i.length;n<s&&p!==a;n++){var o=i[n];if(o){var c=u[n];t.push(d(c,o))}}Promise.all(t).then((function(t){for(var n=0,r=t.length;n<r;n++)t[n]&&e.onChange(t[n])})).catch(e.complete),p!==a&&r.continue()}()}))}))}function d(t,n){var r=e.processChange(n,t,e);o=r.seq=t.seq;var i=m(r);return"object"==typeof i?Promise.reject(i):i?(p++,e.return_docs&&h.push(r),e.attachments&&e.include_docs?new Promise((function(t){Ut(n,e,c,(function(){zt([r],e.binary).then((function(){t(r)}))}))})):Promise.resolve(r)):Promise.resolve()}}))}(t,e,r,i)},e._close=function(e){i.close(),Xt.delete(r),e()},e._getRevisionTree=function(e,t){var n=Wt(i,[$t],"readonly");if(n.error)return t(n.error);n.txn.objectStore($t).get(e).onsuccess=function(e){var n=Lt(e.target.result);n?t(null,n.rev_tree):t(U(R))}},e._doCompaction=function(e,t,n){var r=Wt(i,[$t,Et,xt,It],"readwrite");if(r.error)return n(r.error);var s=r.txn;s.objectStore($t).get(e).onsuccess=function(n){var r=Lt(n.target.result);_e(r.rev_tree,(function(e,n,r,i,s){var o=n+"-"+r;-1!==t.indexOf(o)&&(s.status="missing")})),Kt(t,e,s);var i=r.winningRev,o=r.deleted;s.objectStore($t).put(Bt(r,i,o))},s.onabort=Nt(n),s.oncomplete=function(){n()}},e._getLocal=function(e,t){var n=Wt(i,[Tt],"readonly");if(n.error)return t(n.error);var r=n.txn.objectStore(Tt).get(e);r.onerror=Nt(t),r.onsuccess=function(e){var n=e.target.result;n?(delete n._doc_id_rev,t(null,n)):t(U(R))}},e._putLocal=function(e,t,n){"function"==typeof t&&(n=t,t={}),delete e._revisions;var r=e._rev,s=e._id;e._rev=r?"0-"+(parseInt(r.split("-")[1],10)+1):"0-1";var o,a=t.ctx;if(!a){var c=Wt(i,[Tt],"readwrite");if(c.error)return n(c.error);(a=c.txn).onerror=Nt(n),a.oncomplete=function(){o&&n(null,o)}}var u,l=a.objectStore(Tt);r?(u=l.get(s)).onsuccess=function(i){var s=i.target.result;s&&s._rev===r?l.put(e).onsuccess=function(){o={ok:!0,id:e._id,rev:e._rev},t.ctx&&n(null,o)}:n(U($))}:((u=l.add(e)).onerror=function(e){n(U($)),e.preventDefault(),e.stopPropagation()},u.onsuccess=function(){o={ok:!0,id:e._id,rev:e._rev},t.ctx&&n(null,o)})},e._removeLocal=function(e,t,n){"function"==typeof t&&(n=t,t={});var r,s=t.ctx;if(!s){var o=Wt(i,[Tt],"readwrite");if(o.error)return n(o.error);(s=o.txn).oncomplete=function(){r&&n(null,r)}}var a=e._id,c=s.objectStore(Tt),u=c.get(a);u.onerror=Nt(n),u.onsuccess=function(i){var s=i.target.result;s&&s._rev===e._rev?(c.delete(a),r={ok:!0,id:a,rev:"0-0"},t.ctx&&n(null,r)):n(U(R))}},e._destroy=function(e,t){Ht.removeAllListeners(r);var n=Zt.get(r);n&&n.result&&(n.result.close(),Xt.delete(r));var i=indexedDB.deleteDatabase(r);i.onsuccess=function(){Zt.delete(r),b()&&r in localStorage&&delete localStorage[r],t(null,{ok:!0})},i.onerror=Nt(t)};var f=Xt.get(r);if(f)return i=f.idb,e._meta=f.global,w((function(){n(null,e)}));var h=indexedDB.open(r,5);Zt.set(r,h),h.onupgradeneeded=function(e){var t=e.target.result;if(e.oldVersion<1)return function(e){var t=e.createObjectStore($t,{keyPath:"id"});e.createObjectStore(Et,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.createObjectStore(xt,{keyPath:"digest"}),e.createObjectStore(At,{keyPath:"id",autoIncrement:!1}),e.createObjectStore(Dt),t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),e.createObjectStore(Tt,{keyPath:"_id"});var n=e.createObjectStore(It,{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}(t);var n=e.currentTarget.transaction;e.oldVersion<3&&function(e){e.createObjectStore(Tt,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}(t),e.oldVersion<4&&function(e){var t=e.createObjectStore(It,{autoIncrement:!0});t.createIndex("seq","seq"),t.createIndex("digestSeq","digestSeq",{unique:!0})}(t);var r=[a,c,u,l],i=e.oldVersion;!function e(){var t=r[i-1];i++,t&&t(n,e)}()},h.onsuccess=function(t){(i=t.target.result).onversionchange=function(){i.close(),Xt.delete(r)},i.onabort=function(e){S("error","Database has a global failure",e.target.error),s=e.target.error,i.close(),Xt.delete(r)};var o,a,c,u,l=i.transaction([At,Dt,$t],"readwrite"),f=!1;function d(){void 0!==c&&f&&(e._meta={name:r,instanceId:u,blobSupport:c},Xt.set(r,{idb:i,global:e._meta}),n(null,e))}function h(){if(void 0!==a&&void 0!==o){var e=r+"_id";e in o?u=o[e]:o[e]=u=ye(),o.docCount=a,l.objectStore(At).put(o)}}l.objectStore(At).get(At).onsuccess=function(e){o=e.target.result||{id:At},h()},function(e){e.objectStore($t).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(e){!function(e){a=e,h()}(e.target.result)}}(l),Yt||(Yt=function(e,t){return new Promise((function(n){var r=ie([""]);let i;{const n="key";i=e.objectStore(t).put(r,n)}i.onsuccess=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);n(t||!e||parseInt(e[1],10)>=43)},i.onerror=e.onabort=function(e){e.preventDefault(),e.stopPropagation(),n(!1)}})).catch((function(){return!1}))}(l,Dt)),Yt.then((function(e){c=e,d()})),l.oncomplete=function(){f=!0,d()},l.onabort=Nt(n)},h.onerror=function(e){var t=e.target.error&&e.target.error.message;t?-1!==t.indexOf("stored database is a higher version")&&(t=new Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):t="Failed to open indexedDB, are you in private browsing mode?",S("error",t),n(U(L,t))}}(n,e,t)})),Qt()}(0,t,n.constructor)}en.valid=function(){try{return"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}};const tn=5e3,nn={};function rn(e){const t=e.doc||e.ok,n=t&&t._attachments;n&&Object.keys(n).forEach((function(e){const t=n[e];t.data=ae(t.data,t.content_type)}))}function sn(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):e.startsWith("_local/")?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function on(e){return e._attachments&&Object.keys(e._attachments)?Promise.all(Object.keys(e._attachments).map((function(t){const n=e._attachments[t];if(n.data&&"string"!=typeof n.data)return new Promise((function(e){le(n.data,e)})).then((function(e){n.data=e}))}))):Promise.resolve()}function an(e,t){return cn(e,e.db+"/"+t)}function cn(e,t){const n=e.path?"/":"";return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+n+t}function un(e){const t=Object.keys(e);return 0===t.length?"":"?"+t.map((t=>t+"="+encodeURIComponent(e[t]))).join("&")}function ln(e,t){const n=this,r=function(e,t){if(function(e){if(!e.prefix)return!1;const t=Z(e.prefix).protocol;return"http"===t||"https"===t}(t)){const n=t.name.substr(t.prefix.length);e=t.prefix.replace(/\/?$/,"/")+encodeURIComponent(n)}const n=Z(e);(n.user||n.password)&&(n.auth={username:n.user,password:n.password});const r=n.path.replace(/(^\/|\/$)/g,"").split("/");return n.db=r.pop(),-1===n.db.indexOf("%")&&(n.db=encodeURIComponent(n.db)),n.path=r.join("/"),n}(e.name,e),i=an(r,"");e=d(e);const s=async function(t,n){if((n=n||{}).headers=n.headers||new Ve,n.credentials="include",e.auth||r.auth){const t=e.auth||r.auth,i=t.username+":"+t.password,s=re(unescape(encodeURIComponent(i)));n.headers.set("Authorization","Basic "+s)}const i=e.headers||{};Object.keys(i).forEach((function(e){n.headers.append(e,i[e])})),function(e){const t="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",n=-1!==t.indexOf("msie"),r=-1!==t.indexOf("trident"),i=-1!==t.indexOf("edge"),s=!("method"in e)||"GET"===e.method;return(n||r||i)&&s}(n)&&(t+=(-1===t.indexOf("?")?"?":"&")+"_nonce="+Date.now());const s=e.fetch||Je;return await s(t,n)};function o(e,t){return m(e,(function(...e){u().then((function(){return t.apply(this,e)})).catch((function(t){e.pop()(t)}))})).bind(n)}async function a(e,t){const n={};(t=t||{}).headers=t.headers||new Ve,t.headers.get("Content-Type")||t.headers.set("Content-Type","application/json"),t.headers.get("Accept")||t.headers.set("Accept","application/json");const r=await s(e,t);n.ok=r.ok,n.status=r.status;const i=await r.json();if(n.data=i,!n.ok)throw n.data.status=n.status,z(n.data);return Array.isArray(n.data)&&(n.data=n.data.map((function(e){return e.error||e.missing?z(e):e}))),n}let c;async function u(){return e.skip_setup?Promise.resolve():c||(c=a(i).catch((function(e){return e&&e.status&&404===e.status?(j(404,"PouchDB is just detecting if the remote exists."),a(i,{method:"PUT"})):Promise.reject(e)})).catch((function(e){return!(!e||!e.status||412!==e.status)||Promise.reject(e)})),c.catch((function(){c=null})),c)}function l(e){return e.split("/").map(encodeURIComponent).join("/")}w((function(){t(null,n)})),n._remote=!0,n.type=function(){return"http"},n.id=o("id",(async function(e){let t;try{const e=await s(cn(r,""));t=await e.json()}catch(e){t={}}e(null,t&&t.uuid?t.uuid+r.db:an(r,""))})),n.compact=o("compact",(async function(e,t){"function"==typeof e&&(t=e,e={}),e=d(e),await a(an(r,"_compact"),{method:"POST"}),function r(){n.info((function(n,i){i&&!i.compact_running?t(null,{ok:!0}):setTimeout(r,e.interval||200)}))}()})),n.bulkGet=m("bulkGet",(function(e,t){const n=this;async function i(t){const n={};e.revs&&(n.revs=!0),e.attachments&&(n.attachments=!0),e.latest&&(n.latest=!0);try{const i=await a(an(r,"_bulk_get"+un(n)),{method:"POST",body:JSON.stringify({docs:e.docs})});e.attachments&&e.binary&&i.data.results.forEach((function(e){e.docs.forEach(rn)})),t(null,i.data)}catch(e){t(e)}}function s(){const r=Math.ceil(e.docs.length/50);let i=0;const s=new Array(r);function o(e){return function(n,o){s[e]=o.results,++i===r&&t(null,{results:s.flat()})}}for(let t=0;t<r;t++){const r=v(e,["revs","attachments","binary","latest"]);r.docs=e.docs.slice(50*t,Math.min(e.docs.length,50*(t+1))),_(n,r,o(t))}}const o=cn(r,""),c=nn[o];"boolean"!=typeof c?i((function(e,n){e?(nn[o]=!1,j(e.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),s()):(nn[o]=!0,t(null,n))})):c?i(t):s()})),n._info=async function(e){try{await u();const t=await s(an(r,"")),n=await t.json();n.host=an(r,""),e(null,n)}catch(t){e(t)}},n.fetch=async function(e,t){await u();const n="/"===e.substring(0,1)?cn(r,e.substring(1)):an(r,e);return s(n,t)},n.get=o("get",(async function(e,t,n){"function"==typeof t&&(n=t,t={});const i={};function o(e){const n=e._attachments,i=n&&Object.keys(n);var o;if(n&&i.length)return o=i.map((function(i){return function(){return async function(i){const o=n[i],a=sn(e._id)+"/"+l(i)+"?rev="+e._rev,c=await s(an(r,a));let u,f;if(u="buffer"in c?await c.buffer():await c.blob(),t.binary){const e=Object.getOwnPropertyDescriptor(u.__proto__,"type");e&&!e.set||(u.type=o.content_type),f=u}else f=await new Promise((function(e){le(u,e)}));delete o.stub,delete o.length,o.data=f}(i)}})),new Promise((function(e,t){var n,r=0,i=0,s=0,a=o.length;function c(){++s===a?n?t(n):e():f()}function u(){r--,c()}function l(e){r--,n=n||e,c()}function f(){for(;r<5&&i<a;)r++,o[i++]().then(u,l)}f()}))}(t=d(t)).revs&&(i.revs=!0),t.revs_info&&(i.revs_info=!0),t.latest&&(i.latest=!0),t.open_revs&&("all"!==t.open_revs&&(t.open_revs=JSON.stringify(t.open_revs)),i.open_revs=t.open_revs),t.rev&&(i.rev=t.rev),t.conflicts&&(i.conflicts=t.conflicts),t.update_seq&&(i.update_seq=t.update_seq),e=sn(e);const c=an(r,e+un(i));try{const e=await a(c);t.attachments&&await(u=e.data,Array.isArray(u)?Promise.all(u.map((function(e){if(e.ok)return o(e.ok)}))):o(u)),n(null,e.data)}catch(t){t.docId=e,n(t)}var u})),n.remove=o("remove",(async function(e,t,n,i){let s;"string"==typeof t?(s={_id:e,_rev:t},"function"==typeof n&&(i=n,n={})):(s=e,"function"==typeof t?(i=t,n={}):(i=n,n=t));const o=s._rev||n.rev,c=an(r,sn(s._id))+"?rev="+o;try{i(null,(await a(c,{method:"DELETE"})).data)}catch(e){i(e)}})),n.getAttachment=o("getAttachment",(async function(e,t,n,i){"function"==typeof n&&(i=n,n={});const o=n.rev?"?rev="+n.rev:"",a=an(r,sn(e))+"/"+l(t)+o;let c;try{const e=await s(a,{method:"GET"});if(!e.ok)throw e;let t;if(c=e.headers.get("content-type"),t="undefined"==typeof process||process.browser||"function"!=typeof e.buffer?await e.blob():await e.buffer(),"undefined"!=typeof process&&!process.browser){const e=Object.getOwnPropertyDescriptor(t.__proto__,"type");e&&!e.set||(t.type=c)}i(null,t)}catch(e){i(e)}})),n.removeAttachment=o("removeAttachment",(async function(e,t,n,i){const s=an(r,sn(e)+"/"+l(t))+"?rev="+n;try{i(null,(await a(s,{method:"DELETE"})).data)}catch(e){i(e)}})),n.putAttachment=o("putAttachment",(async function(e,t,n,i,s,o){"function"==typeof s&&(o=s,s=i,i=n,n=null);const c=sn(e)+"/"+l(t);let u=an(r,c);if(n&&(u+="?rev="+n),"string"==typeof i){let t;try{t=ne(i)}catch(e){return o(U(T,"Attachment is not a valid base64 string"))}i=t?oe(t,s):""}try{o(null,(await a(u,{headers:new Ve({"Content-Type":s}),method:"PUT",body:i})).data)}catch(e){o(e)}})),n._bulkDocs=async function(e,t,n){e.new_edits=t.new_edits;try{await u(),await Promise.all(e.docs.map(on)),n(null,(await a(an(r,"_bulk_docs"),{method:"POST",body:JSON.stringify(e)})).data)}catch(e){n(e)}},n._put=async function(e,t,n){try{await u(),await on(e),n(null,(await a(an(r,sn(e._id)),{method:"PUT",body:JSON.stringify(e)})).data)}catch(t){t.docId=e&&e._id,n(t)}},n.allDocs=o("allDocs",(async function(e,t){"function"==typeof e&&(t=e,e={});const n={};let i,s="GET";(e=d(e)).conflicts&&(n.conflicts=!0),e.update_seq&&(n.update_seq=!0),e.descending&&(n.descending=!0),e.include_docs&&(n.include_docs=!0),e.attachments&&(n.attachments=!0),e.key&&(n.key=JSON.stringify(e.key)),e.start_key&&(e.startkey=e.start_key),e.startkey&&(n.startkey=JSON.stringify(e.startkey)),e.end_key&&(e.endkey=e.end_key),e.endkey&&(n.endkey=JSON.stringify(e.endkey)),void 0!==e.inclusive_end&&(n.inclusive_end=!!e.inclusive_end),void 0!==e.limit&&(n.limit=e.limit),void 0!==e.skip&&(n.skip=e.skip);const o=un(n);void 0!==e.keys&&(s="POST",i={keys:e.keys});try{const n=await a(an(r,"_all_docs"+o),{method:s,body:JSON.stringify(i)});e.include_docs&&e.attachments&&e.binary&&n.data.rows.forEach(rn),t(null,n.data)}catch(e){t(e)}})),n._changes=function(e){const t="batch_size"in e?e.batch_size:25;(e=d(e)).continuous&&!("heartbeat"in e)&&(e.heartbeat=1e4);let n="timeout"in e?e.timeout:3e4;"timeout"in e&&e.timeout&&n-e.timeout<tn&&(n=e.timeout+tn),"heartbeat"in e&&e.heartbeat&&n-e.heartbeat<tn&&(n=e.heartbeat+tn);const i={};"timeout"in e&&e.timeout&&(i.timeout=e.timeout);const s=void 0!==e.limit&&e.limit;let o=s;if(e.style&&(i.style=e.style),(e.include_docs||e.filter&&"function"==typeof e.filter)&&(i.include_docs=!0),e.attachments&&(i.attachments=!0),e.continuous&&(i.feed="longpoll"),e.seq_interval&&(i.seq_interval=e.seq_interval),e.conflicts&&(i.conflicts=!0),e.descending&&(i.descending=!0),e.update_seq&&(i.update_seq=!0),"heartbeat"in e&&e.heartbeat&&(i.heartbeat=e.heartbeat),e.filter&&"string"==typeof e.filter&&(i.filter=e.filter),e.view&&"string"==typeof e.view&&(i.filter="_view",i.view=e.view),e.query_params&&"object"==typeof e.query_params)for(const t in e.query_params)Object.prototype.hasOwnProperty.call(e.query_params,t)&&(i[t]=e.query_params[t]);let c,l="GET";e.doc_ids?(i.filter="_doc_ids",l="POST",c={doc_ids:e.doc_ids}):e.selector&&(i.filter="_selector",l="POST",c={selector:e.selector});const f=new AbortController;let h;const p=async function(n,d){if(e.aborted)return;i.since=n,"object"==typeof i.since&&(i.since=JSON.stringify(i.since)),e.descending?s&&(i.limit=o):i.limit=!s||o>t?t:o;const p=an(r,"_changes"+un(i)),m={signal:f.signal,method:l,body:JSON.stringify(c)};if(h=n,!e.aborted)try{await u(),d(null,(await a(p,m)).data)}catch(e){d(e)}},m={results:[]},v=function(n,r){if(e.aborted)return;let i=0;if(r&&r.results){i=r.results.length,m.last_seq=r.last_seq;let t=null,n=null;"number"==typeof r.pending&&(t=r.pending),"string"!=typeof m.last_seq&&"number"!=typeof m.last_seq||(n=m.last_seq),e.query_params,r.results=r.results.filter((function(r){o--;const i=K(e)(r);return i&&(e.include_docs&&e.attachments&&e.binary&&rn(r),e.return_docs&&m.results.push(r),e.onChange(r,t,n)),i}))}else if(n)return e.aborted=!0,void e.complete(n);r&&r.last_seq&&(h=r.last_seq);const a=s&&o<=0||r&&i<t||e.descending;(!e.continuous||s&&o<=0)&&a?e.complete(null,m):w((function(){p(h,v)}))};return p(e.since||0,v),{cancel:function(){e.aborted=!0,f.abort()}}},n.revsDiff=o("revsDiff",(async function(e,t,n){"function"==typeof t&&(n=t,t={});try{n(null,(await a(an(r,"_revs_diff"),{method:"POST",body:JSON.stringify(e)})).data)}catch(e){n(e)}})),n._close=function(e){e()},n._destroy=async function(e,t){try{t(null,await a(an(r,""),{method:"DELETE"}))}catch(e){404===e.status?t(null,{ok:!0}):t(e)}}}ln.valid=function(){return!0};class fn extends Error{constructor(e){super(),this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,fn)}catch(e){}}}class dn extends Error{constructor(e){super(),this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,dn)}catch(e){}}}class hn extends Error{constructor(e){super(),this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,hn)}catch(e){}}}function pn(e,t){return t&&e.then((function(e){w((function(){t(null,e)}))}),(function(e){w((function(){t(e)}))})),e}function mn(e,t){return function(){var n=arguments,r=this;return e.add((function(){return t.apply(r,n)}))}}function vn(e){var t=new Set(e),n=new Array(t.size),r=-1;return t.forEach((function(e){n[++r]=e})),n}function yn(e){var t=new Array(e.size),n=-1;return e.forEach((function(e,r){t[++n]=r})),t}function gn(e){return new hn("builtin "+e+" function requires map values to be numbers or number arrays")}function _n(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];if("number"!=typeof i){if(!Array.isArray(i))throw gn("_sum");t="number"==typeof t?[t]:t;for(var s=0,o=i.length;s<o;s++){var a=i[s];if("number"!=typeof a)throw gn("_sum");void 0===t[s]?t.push(a):t[s]+=a}}else"number"==typeof t?t+=i:t[0]+=i}return t}var bn=S.bind(null,"log"),wn=Array.isArray,kn=JSON.parse;function Sn(e,t){return ee("return ("+e.replace(/;\s*$/,"")+");",{emit:t,sum:_n,log:bn,isArray:wn,toJSON:kn})}class Cn{constructor(){this.promise=Promise.resolve()}add(e){return this.promise=this.promise.catch((()=>{})).then((()=>e())),this.promise}finish(){return this.promise}}function jn(e){if(!e)return"undefined";switch(typeof e){case"function":case"string":return e.toString();default:return JSON.stringify(e)}}async function On(e,t,n,r,i,s){const o=function(e,t){return jn(e)+jn(t)+"undefined"}(n,r);let a;if(!i&&(a=e._cachedViews=e._cachedViews||{},a[o]))return a[o];const c=e.info().then((async function(c){const u=c.db_name+"-mrview-"+(i?"temp":me(o));await te(e,"_local/"+s,(function(e){e.views=e.views||{};let n=t;-1===n.indexOf("/")&&(n=t+"/"+t);const r=e.views[n]=e.views[n]||{};if(!r[u])return r[u]=!0,e}));const l=(await e.registerDependentDatabase(u)).db;l.auto_compaction=!0;const f={name:u,db:l,sourceDB:e,adapter:e.adapter,mapFun:n,reduceFun:r};let d;try{d=await f.db.get("_local/lastSeq")}catch(e){if(404!==e.status)throw e}return f.seq=d?d.seq:0,a&&f.db.once("destroyed",(function(){delete a[o]})),f}));return a&&(a[o]=c),c}const Pn={},Rn=new Cn;function $n(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function En(e,t,n){try{e.emit("error",t)}catch(e){S("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),S("error",t,n)}}var xn=function(e,t){return _n(t)},In=function(e,t){return t.length},An=function(e,t){return{sum:_n(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:function(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];t+=i*i}return t}(t)}},Tn=function(e){function t(e,t,n){try{t(n)}catch(r){En(e,r,{fun:t,doc:n})}}function n(e,t,n,r,i){try{return{output:t(n,r,i)}}catch(s){return En(e,s,{fun:t,keys:n,values:r,rereduce:i}),{error:s}}}function r(e,t){const n=ot(e.key,t.key);return 0!==n?n:ot(e.value,t.value)}function i(e,t,n){return n=n||0,"number"==typeof t?e.slice(n,t+n):n>0?e.slice(n):e}function s(e){const t=e.value;return t&&"object"==typeof t&&t._id||e.id}function o(e){return function(t){return e.include_docs&&e.attachments&&e.binary&&function(e){for(const t of e.rows){const e=t.doc&&t.doc._attachments;if(e)for(const t of Object.keys(e)){const n=e[t];e[t].data=ae(n.data,n.content_type)}}}(t),t}}function a(e,t,n,r){let i=t[e];void 0!==i&&(r&&(i=encodeURIComponent(JSON.stringify(i))),n.push(e+"="+i))}function c(e){if(void 0!==e){const t=Number(e);return isNaN(t)||t!==parseInt(e,10)?e:t}}function u(e){if(e){if("number"!=typeof e)return new fn(`Invalid value for integer: "${e}"`);if(e<0)return new fn(`Invalid value for positive integer: "${e}"`)}}function l(e,t){const n=e.descending?"endkey":"startkey",r=e.descending?"startkey":"endkey";if(void 0!==e[n]&&void 0!==e[r]&&ot(e[n],e[r])>0)throw new fn("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(t.reduce&&!1!==e.reduce){if(e.include_docs)throw new fn("{include_docs:true} is invalid for reduce");if(e.keys&&e.keys.length>1&&!e.group&&!e.group_level)throw new fn("Multi-key fetches for reduce views must use {group: true}")}for(const t of["group_level","limit","skip"]){const n=u(e[t]);if(n)throw n}}function f(e){return function(t){if(404===t.status)return e;throw t}}function d(e){const t="string"==typeof e?e:e.name;let n=Pn[t];return n||(n=Pn[t]=new Cn),n}async function h(e,n){return mn(d(e),(function(){return async function(e,n){let i,s,o;const a=function(e,t){if("function"==typeof e&&2===e.length){var n=e;return function(e){return n(e,t)}}return Sn(e.toString(),t)}(e.mapFun,(function(e,t){const n={id:s._id,key:at(e)};null!=t&&(n.value=at(t)),i.push(n)}));let c=e.seq||0;function u(t,n){return function(){return function(e,t,n){var r="_local/lastSeq";return e.db.get(r).catch(f({_id:r,seq:0})).then((function(r){var i=yn(t);return Promise.all(i.map((function(n){return async function(e,t,n){const r="_local/doc_"+e,i={_id:r,keys:[]},s=n.get(e),o=s[0],a=s[1],c=await(function(e){return 1===e.length&&/^1-/.test(e[0].rev)}(a)?Promise.resolve(i):t.db.get(r).catch(f(i))),u=await function(e){return e.keys.length?t.db.allDocs({keys:e.keys,include_docs:!0}):Promise.resolve({rows:[]})}(c);return function(e,t){const n=[],r=new Set;for(const e of t.rows){const t=e.doc;if(t&&(n.push(t),r.add(t._id),t._deleted=!o.has(t._id),!t._deleted)){const e=o.get(t._id);"value"in e&&(t.value=e.value)}}const i=yn(o);for(const e of i)if(!r.has(e)){const t={_id:e},r=o.get(e);"value"in r&&(t.value=r.value),n.push(t)}return e.keys=vn(i.concat(e.keys)),n.push(e),n}(c,u)}(n,e,t)}))).then((function(t){var i=t.flat();return r.seq=n,i.push(r),e.db.bulkDocs({docs:i})})).then((()=>function(e){return e.sourceDB.get("_local/purges").then((function(t){const n=t.purgeSeq;return e.db.get("_local/purgeSeq").then((function(e){return e._rev})).catch(f(void 0)).then((function(t){return e.db.put({_id:"_local/purgeSeq",_rev:t,purgeSeq:n})}))})).catch((function(e){if(404!==e.status)throw e}))}(e)))}))}(e,t,n)}}let l=0;const d={view:e.name,indexed_docs:l};e.sourceDB.emit("indexing",d);const h=new Cn;function p(e){const t=new Map;let n;for(let r=0,i=e.length;r<i;r++){const i=e[r],s=[i.key,i.id];r>0&&0===ot(i.key,n)&&s.push(r),t.set(ct(s),i),n=i.key}return t}try{await e.sourceDB.info().then((function(t){o=e.sourceDB.activeTasks.add({name:"view_indexing",total_items:t.update_seq-c})})),await async function d(){return function(f,m){const v=f.results;if(!v.length&&!m.length)return;for(const e of m)if(v.findIndex((function(t){return t.id===e.docId}))<0){const t={_id:e.docId,doc:{_id:e.docId,_deleted:1},changes:[]};e.doc&&(t.doc=e.doc,t.changes.push({rev:e.doc._rev})),v.push(t)}const y=function(n){const o=new Map;for(const u of n){if("_"!==u.doc._id[0]){i=[],s=u.doc,s._deleted||t(e.sourceDB,a,s),i.sort(r);const n=p(i);o.set(u.doc._id,[n,u.changes])}c=u.seq}return o}(v);h.add(u(y,c)),l+=v.length;const g={view:e.name,last_seq:f.last_seq,results_count:v.length,indexed_docs:l};return e.sourceDB.emit("indexing",g),e.sourceDB.activeTasks.update(o,{completed_items:l}),v.length<n.changes_batch_size?void 0:d()}(await e.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:c,limit:n.changes_batch_size}),await e.db.get("_local/purgeSeq").then((function(e){return e.purgeSeq})).catch(f(-1)).then((function(t){return e.sourceDB.get("_local/purges").then((function(n){const r=n.purges.filter((function(e,n){return n>t})).map((e=>e.docId)),i=r.filter((function(e,t){return r.indexOf(e)===t}));return Promise.all(i.map((function(t){return e.sourceDB.get(t).then((function(e){return{docId:t,doc:e}})).catch(f({docId:t}))})))})).catch(f([]))})))}(),await h.finish(),e.seq=c,e.sourceDB.activeTasks.remove(o)}catch(t){e.sourceDB.activeTasks.remove(o,t)}}(e,n)}))()}function p(e,t){return mn(d(e),(function(){return async function(e,t){let r;const o=e.reduceFun&&!1!==t.reduce,a=t.skip||0;async function c(t){t.include_docs=!0;const n=await e.db.allDocs(t);return r=n.total_rows,n.rows.map((function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){const t=Object.keys(e.doc.value).sort(),n=["id","key","value"];if(!(t<n||t>n))return e.doc.value}const t=function(e){for(var t=[],n=[],r=0;;){var i=e[r++];if("\0"!==i)switch(i){case"1":t.push(null);break;case"2":t.push("1"===e[r]),r++;break;case"3":var s=ut(e,r);t.push(s.num),r+=s.length;break;case"4":for(var o="";;){var a=e[r];if("\0"===a)break;o+=a,r++}o=o.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(o);break;case"5":var c={element:[],index:t.length};t.push(c.element),n.push(c);break;case"6":var u={element:{},index:t.length};t.push(u.element),n.push(u);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===t.length)return t.pop();lt(t,n)}}}(e.doc._id);return{key:t[0],id:t[1],value:"value"in e.doc?e.doc.value:null}}))}async function u(c){let u;if(u=o?function(e,t,r){0===r.group_level&&delete r.group_level;const s=r.group||r.group_level,o=function(e){var t=e.toString(),n=function(e){if(/^_sum/.test(e))return xn;if(/^_count/.test(e))return In;if(/^_stats/.test(e))return An;if(/^_/.test(e))throw new Error(e+" is not a supported reduce function.")}(t);return n||Sn(t)}(e.reduceFun),a=[],c=isNaN(r.group_level)?Number.POSITIVE_INFINITY:r.group_level;for(const e of t){const t=a[a.length-1];let n=s?e.key:null;s&&Array.isArray(n)&&(n=n.slice(0,c)),t&&0===ot(t.groupKey,n)?(t.keys.push([e.key,e.id]),t.values.push(e.value)):a.push({keys:[[e.key,e.id]],values:[e.value],groupKey:n})}t=[];for(const r of a){const i=n(e.sourceDB,o,r.keys,r.values,!1);if(i.error&&i.error instanceof hn)throw i.error;t.push({value:i.error?null:i.output,key:r.groupKey})}return{rows:i(t,r.limit,r.skip)}}(e,c,t):void 0===t.keys?{total_rows:r,offset:a,rows:c}:{total_rows:r,offset:a,rows:i(c,t.limit,t.skip)},t.update_seq&&(u.update_seq=e.seq),t.include_docs){const n=vn(c.map(s)),r=await e.sourceDB.allDocs({keys:n,include_docs:!0,conflicts:t.conflicts,attachments:t.attachments,binary:t.binary}),i=new Map;for(const e of r.rows)i.set(e.id,e.doc);for(const e of c){const t=s(e),n=i.get(t);n&&(e.doc=n)}}return u}if(void 0===t.keys||t.keys.length||(t.limit=0,delete t.keys),void 0!==t.keys){const e=t.keys.map((function(e){const n={startkey:ct([e]),endkey:ct([e,{}])};return t.update_seq&&(n.update_seq=!0),c(n)}));return u((await Promise.all(e)).flat())}{const e={descending:t.descending};let n,r;if(t.update_seq&&(e.update_seq=!0),"start_key"in t&&(n=t.start_key),"startkey"in t&&(n=t.startkey),"end_key"in t&&(r=t.end_key),"endkey"in t&&(r=t.endkey),void 0!==n&&(e.startkey=t.descending?ct([n,{}]):ct([n])),void 0!==r){let n=!1!==t.inclusive_end;t.descending&&(n=!n),e.endkey=ct(n?[r,{}]:[r])}if(void 0!==t.key){const n=ct([t.key]),r=ct([t.key,{}]);e.descending?(e.endkey=n,e.startkey=r):(e.startkey=n,e.endkey=r)}return o||("number"==typeof t.limit&&(e.limit=t.limit),e.skip=a),u(await c(e))}}(e,t)}))()}async function m(t,n,r){if("function"==typeof t._query)return function(e,t,n){return new Promise((function(r,i){e._query(t,n,(function(e,t){if(e)return i(e);r(t)}))}))}(t,n,r);if(H(t))return async function(e,t,n){let r,i,s=[],c="GET";if(a("reduce",n,s),a("include_docs",n,s),a("attachments",n,s),a("limit",n,s),a("descending",n,s),a("group",n,s),a("group_level",n,s),a("skip",n,s),a("stale",n,s),a("conflicts",n,s),a("startkey",n,s,!0),a("start_key",n,s,!0),a("endkey",n,s,!0),a("end_key",n,s,!0),a("inclusive_end",n,s),a("key",n,s,!0),a("update_seq",n,s),s=s.join("&"),s=""===s?"":"?"+s,void 0!==n.keys){const e=2e3,i=`keys=${encodeURIComponent(JSON.stringify(n.keys))}`;i.length+s.length+1<=e?s+=("?"===s[0]?"&":"?")+i:(c="POST","string"==typeof t?r={keys:n.keys}:t.keys=n.keys)}if("string"==typeof t){const a=$n(t),u=await e.fetch("_design/"+a[0]+"/_view/"+a[1]+s,{headers:new Ve({"Content-Type":"application/json"}),method:c,body:JSON.stringify(r)});i=u.ok;const l=await u.json();if(!i)throw l.status=u.status,z(l);for(const e of l.rows)if(e.value&&e.value.error&&"builtin_reduce_error"===e.value.error)throw new Error(e.reason);return new Promise((function(e){e(l)})).then(o(n))}r=r||{};for(const e of Object.keys(t))Array.isArray(t[e])?r[e]=t[e]:r[e]=t[e].toString();const u=await e.fetch("_temp_view"+s,{headers:new Ve({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(r)});i=u.ok;const l=await u.json();if(!i)throw l.status=u.status,z(l);return new Promise((function(e){e(l)})).then(o(n))}(t,n,r);const i={changes_batch_size:t.__opts.view_update_changes_batch_size||50};if("string"!=typeof n)return l(r,n),Rn.add((async function(){const s=await On(t,"temp_view/temp_view",n.map,n.reduce,!0,e);return o=h(s,i).then((function(){return p(s,r)})),a=function(){return s.db.destroy()},o.then((function(e){return a().then((function(){return e}))}),(function(e){return a().then((function(){throw e}))}));var o,a})),Rn.finish();{const s=n,o=$n(s),a=o[0],c=o[1],u=await t.get("_design/"+a);if(!(n=u.views&&u.views[c]))throw new dn(`ddoc ${u._id} has no view named ${c}`);(function(e,t){var n=e.views&&e.views[t];if("string"!=typeof n.map)throw new dn("ddoc "+e._id+" has no string view named "+t+", instead found object of type: "+typeof n.map)})(u,c),l(r,n);const f=await On(t,s,n.map,n.reduce,!1,e);return"ok"===r.stale||"update_after"===r.stale?("update_after"===r.stale&&w((function(){h(f,i)})),p(f,r)):(await h(f,i),p(f,r))}}var v;return{query:function(e,t,n){const r=this;"function"==typeof t&&(n=t,t={}),t=t?function(e){return e.group_level=c(e.group_level),e.limit=c(e.limit),e.skip=c(e.skip),e}(t):{},"function"==typeof e&&(e={map:e});const i=Promise.resolve().then((function(){return m(r,e,t)}));return pn(i,n),i},viewCleanup:(v=function(){const t=this;return"function"==typeof t._viewCleanup?function(e){return new Promise((function(t,n){e._viewCleanup((function(e,r){if(e)return n(e);t(r)}))}))}(t):H(t)?async function(e){return(await e.fetch("_view_cleanup",{headers:new Ve({"Content-Type":"application/json"}),method:"POST"})).json()}(t):async function(t){try{const n=await t.get("_local/"+e),r=new Map;for(const e of Object.keys(n.views)){const t=$n(e),n="_design/"+t[0],i=t[1];let s=r.get(n);s||(s=new Set,r.set(n,s)),s.add(i)}const i={keys:yn(r),include_docs:!0},s=await t.allDocs(i),o={};for(const e of s.rows){const t=e.key.substring(8);for(const i of r.get(e.key)){let r=t+"/"+i;n.views[r]||(r=i);const s=Object.keys(n.views[r]),a=e.doc&&e.doc.views&&e.doc.views[i];for(const e of s)o[e]=o[e]||a}}const a=Object.keys(o).filter((function(e){return!o[e]})).map((function(e){return mn(d(e),(function(){return new t.constructor(e,t.__opts).destroy()}))()}));return Promise.all(a).then((function(){return{ok:!0}}))}catch(e){if(404===e.status)return{ok:!0};throw e}}(t)},function(...e){var t=e.pop(),n=v.apply(this,e);return"function"==typeof t&&pn(n,t),n})}}("mrviews"),Dn={query:function(e,t,n){return Tn.query.call(this,e,t,n)},viewCleanup:function(e){return Tn.viewCleanup.call(this,e)}};function qn(e,t){var n=Object.keys(t._attachments);return Promise.all(n.map((function(n){return e.getAttachment(t._id,n,{rev:t._rev})})))}var Nn="pouchdb";function Bn(e,t,n,r,i){return e.get(t).catch((function(n){if(404===n.status)return"http"!==e.adapter&&"https"!==e.adapter||j(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:t,history:[],replicator:Nn,version:1};throw n})).then((function(s){if(!i.cancelled&&s.last_seq!==n)return s.history=(s.history||[]).filter((function(e){return e.session_id!==r})),s.history.unshift({last_seq:n,session_id:r}),s.history=s.history.slice(0,5),s.version=1,s.replicator=Nn,s.session_id=r,s.last_seq=n,e.put(s).catch((function(s){if(409===s.status)return Bn(e,t,n,r,i);throw s}))}))}class Ln{constructor(e,t,n,r,i={writeSourceCheckpoint:!0,writeTargetCheckpoint:!0}){this.src=e,this.target=t,this.id=n,this.returnValue=r,this.opts=i,void 0===i.writeSourceCheckpoint&&(i.writeSourceCheckpoint=!0),void 0===i.writeTargetCheckpoint&&(i.writeTargetCheckpoint=!0)}writeCheckpoint(e,t){var n=this;return this.updateTarget(e,t).then((function(){return n.updateSource(e,t)}))}updateTarget(e,t){return this.opts.writeTargetCheckpoint?Bn(this.target,this.id,e,t,this.returnValue):Promise.resolve(!0)}updateSource(e,t){if(this.opts.writeSourceCheckpoint){var n=this;return Bn(this.src,this.id,e,t,this.returnValue).catch((function(e){if(zn(e))return n.opts.writeSourceCheckpoint=!1,!0;throw e}))}return Promise.resolve(!0)}getCheckpoint(){var e=this;return e.opts.writeSourceCheckpoint||e.opts.writeTargetCheckpoint?e.opts&&e.opts.writeSourceCheckpoint&&!e.opts.writeTargetCheckpoint?e.src.get(e.id).then((function(e){return e.last_seq||0})).catch((function(e){if(404!==e.status)throw e;return 0})):e.target.get(e.id).then((function(t){return e.opts&&e.opts.writeTargetCheckpoint&&!e.opts.writeSourceCheckpoint?t.last_seq||0:e.src.get(e.id).then((function(e){return t.version!==e.version?0:(n=t.version?t.version.toString():"undefined")in Fn?Fn[n](t,e):0;var n}),(function(n){if(404===n.status&&t.last_seq)return e.src.put({_id:e.id,last_seq:0}).then((function(){return 0}),(function(n){return zn(n)?(e.opts.writeSourceCheckpoint=!1,t.last_seq):0}));throw n}))})).catch((function(e){if(404!==e.status)throw e;return 0})):Promise.resolve(0)}}var Fn={undefined:function(e,t){return 0===ot(e.last_seq,t.last_seq)?t.last_seq:0},1:function(e,t){return(n=t,r=e,n.session_id===r.session_id?{last_seq:n.last_seq,history:n.history}:Mn(n.history,r.history)).last_seq;var n,r}};function Mn(e,t){var n=e[0],r=e.slice(1),i=t[0],s=t.slice(1);return n&&0!==t.length?Un(n.session_id,t)?{last_seq:n.last_seq,history:e}:Un(i.session_id,r)?{last_seq:i.last_seq,history:s}:Mn(r,s):{last_seq:0,history:[]}}function Un(e,t){var n=t[0],r=t.slice(1);return!(!e||0===t.length)&&(e===n.session_id||Un(e,r))}function zn(e){return"number"==typeof e.status&&4===Math.floor(e.status/100)}function Kn(e,t,n,r,i){return this instanceof Ln?Kn:new Ln(e,t,n,r,i)}function Wn(e,t,n,r,i){var s,o,a,c,u=[],l={seq:0,changes:[],docs:[]},f=!1,h=!1,p=!1,m=0,v=0,y=n.continuous||n.live||!1,g=n.batch_size||100,_=n.batches_limit||10,b=n.style||"all_docs",k=!1,S=n.doc_ids,j=n.selector,O=[],P=ye();i=i||{ok:!0,start_time:(new Date).toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var R={};function $(){return a?Promise.resolve():function(e,t,n){var r=n.doc_ids?n.doc_ids.sort(ot):"",i=n.filter?n.filter.toString():"",s="",o="",a="";return n.selector&&(a=JSON.stringify(n.selector)),n.filter&&n.query_params&&(s=JSON.stringify(function(e){return Object.keys(e).sort(ot).reduce((function(t,n){return t[n]=e[n],t}),{})}(n.query_params))),n.filter&&"_view"===n.filter&&(o=n.view.toString()),Promise.all([e.id(),t.id()]).then((function(e){var t=e[0]+e[1]+i+o+s+r+a;return new Promise((function(e){pe(t,e)}))})).then((function(e){return"_local/"+e.replace(/\//g,".").replace(/\+/g,"_")}))}(e,t,n).then((function(i){var s;o=i,s=!1===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===n.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},a=new Kn(e,t,o,r,s)}))}function E(){if(O=[],0!==s.docs.length){var e=s.docs,o={timeout:n.timeout};return t.bulkDocs({docs:e,new_edits:!1},o).then((function(t){if(r.cancelled)throw q(),new Error("cancelled");var n=Object.create(null);t.forEach((function(e){e.error&&(n[e.id]=e)}));var s=Object.keys(n).length;i.doc_write_failures+=s,i.docs_written+=e.length-s,e.forEach((function(e){var t=n[e._id];if(t){i.errors.push(t);var s=(t.name||"").toLowerCase();if("unauthorized"!==s&&"forbidden"!==s)throw t;r.emit("denied",d(t))}else O.push(e)}))}),(function(t){throw i.doc_write_failures+=e.length,t}))}}function x(){if(s.error)throw new Error("There was a problem getting docs.");i.last_seq=v=s.seq;var t=d(i);return O.length&&(t.docs=O,"number"==typeof s.pending&&(t.pending=s.pending,delete s.pending),r.emit("change",t)),f=!0,e.info().then((function(t){var n=e.activeTasks.get(c);if(s&&n){var r=n.completed_items||0,i=parseInt(t.update_seq,10)-parseInt(m,10);e.activeTasks.update(c,{completed_items:r+s.changes.length,total_items:i})}})),a.writeCheckpoint(s.seq,P).then((function(){if(r.emit("checkpoint",{checkpoint:s.seq}),f=!1,r.cancelled)throw q(),new Error("cancelled");s=void 0,F()})).catch((function(e){throw W(e),e}))}function I(){return function(e,t,n,r){n=d(n);var i=[],s=!0;return Promise.resolve().then((function(){var o=function(e){var t=[];return Object.keys(e).forEach((function(n){e[n].missing.forEach((function(e){t.push({id:n,rev:e})}))})),{docs:t,revs:!0,latest:!0}}(n);if(o.docs.length)return e.bulkGet(o).then((function(n){if(r.cancelled)throw new Error("cancelled");return Promise.all(n.results.map((function(n){return Promise.all(n.docs.map((function(n){var r=n.ok;return n.error&&(s=!1),r&&r._attachments?function(e,t,n){var r=H(t)&&!H(e),i=Object.keys(n._attachments);return r?e.get(n._id).then((function(r){return Promise.all(i.map((function(i){return function(e,t,n){return!e._attachments||!e._attachments[n]||e._attachments[n].digest!==t._attachments[n].digest}(r,n,i)?t.getAttachment(n._id,i):e.getAttachment(r._id,i)})))})).catch((function(e){if(404!==e.status)throw e;return qn(t,n)})):qn(t,n)}(t,e,r).then((e=>{var t=Object.keys(r._attachments);return e.forEach((function(e,n){var i=r._attachments[t[n]];delete i.stub,delete i.length,i.data=e})),r})):r})))}))).then((function(e){i=i.concat(e.flat().filter(Boolean))}))}))})).then((function(){return{ok:s,docs:i}}))}(e,t,s.diffs,r).then((function(e){s.error=!e.ok,e.docs.forEach((function(e){delete s.diffs[e._id],i.docs_read++,s.docs.push(e)}))}))}function A(){var e;r.cancelled||s||(0!==u.length?(s=u.shift(),r.emit("checkpoint",{start_next_batch:s.seq}),(e={},s.changes.forEach((function(t){r.emit("checkpoint",{revs_diff:t}),"_user/"!==t.id&&(e[t.id]=t.changes.map((function(e){return e.rev})))})),t.revsDiff(e).then((function(e){if(r.cancelled)throw q(),new Error("cancelled");s.diffs=e}))).then(I).then(E).then(x).then(A).catch((function(e){D("batch processing terminated with error",e)}))):T(!0))}function T(e){0!==l.changes.length?(e||h||l.changes.length>=g)&&(u.push(l),l={seq:0,changes:[],docs:[]},"pending"!==r.state&&"stopped"!==r.state||(r.state="active",r.emit("active")),A()):0!==u.length||s||((y&&R.live||h)&&(r.state="pending",r.emit("paused")),h&&q())}function D(e,t){p||(t.message||(t.message=e),i.ok=!1,i.status="aborting",u=[],l={seq:0,changes:[],docs:[]},q(t))}function q(s){if(!(p||r.cancelled&&(i.status="cancelled",f)))if(i.status=i.status||"complete",i.end_time=(new Date).toISOString(),i.last_seq=v,p=!0,e.activeTasks.remove(c,s),s){(s=U(s)).result=i;var o=(s.name||"").toLowerCase();"unauthorized"===o||"forbidden"===o?(r.emit("error",s),r.removeAllListeners()):function(e,t,n,r){if(!1===e.retry)return t.emit("error",n),void t.removeAllListeners();if("function"!=typeof e.back_off_function&&(e.back_off_function=C),t.emit("requestError",n),"active"===t.state||"pending"===t.state){t.emit("paused",n),t.state="stopped";var i=function(){e.current_back_off=0};t.once("paused",(function(){t.removeListener("active",i)})),t.once("active",i)}e.current_back_off=e.current_back_off||0,e.current_back_off=e.back_off_function(e.current_back_off),setTimeout(r,e.current_back_off)}(n,r,s,(function(){Wn(e,t,n,r)}))}else r.emit("complete",i),r.removeAllListeners()}function N(t,i,s){if(r.cancelled)return q();if("number"==typeof i&&(l.pending=i),K(n)(t))l.seq=t.seq||s,l.changes.push(t),r.emit("checkpoint",{pending_batch:l.seq}),w((function(){T(0===u.length&&R.live)}));else{var o=e.activeTasks.get(c);if(o){var a=o.completed_items||0;e.activeTasks.update(c,{completed_items:++a})}}}function B(e){if(k=!1,r.cancelled)return q();if(e.results.length>0)R.since=e.results[e.results.length-1].seq,F(),T(!0);else{var t=function(){y?(R.live=!0,F()):h=!0,T(!0)};s||0!==e.results.length?t():(f=!0,a.writeCheckpoint(e.last_seq,P).then((function(){if(f=!1,i.last_seq=v=e.last_seq,r.cancelled)throw q(),new Error("cancelled");t()})).catch(W))}}function L(e){if(k=!1,r.cancelled)return q();D("changes rejected",e)}function F(){if(!k&&!h&&u.length<_){k=!0,r._changes&&(r.removeListener("cancel",r._abortChanges),r._changes.cancel()),r.once("cancel",i);var t=e.changes(R).on("change",N);t.then(s,s),t.then(B).catch(L),n.retry&&(r._changes=t,r._abortChanges=i)}function i(){t.cancel()}function s(){r.removeListener("cancel",i)}}function M(t){return e.info().then((function(r){var i=void 0===n.since?parseInt(r.update_seq,10)-parseInt(t,10):parseInt(r.update_seq,10);return c=e.activeTasks.add({name:`${y?"continuous ":""}replication from ${r.db_name}`,total_items:i}),t}))}function z(){$().then((function(){if(!r.cancelled)return a.getCheckpoint().then(M).then((function(e){m=e,R={since:v=e,limit:g,batch_size:g,style:b,doc_ids:S,selector:j,return_docs:!0},n.filter&&("string"!=typeof n.filter?R.include_docs=!0:R.filter=n.filter),"heartbeat"in n&&(R.heartbeat=n.heartbeat),"timeout"in n&&(R.timeout=n.timeout),n.query_params&&(R.query_params=n.query_params),n.view&&(R.view=n.view),F()}));q()})).catch((function(e){D("getCheckpoint rejected with ",e)}))}function W(e){f=!1,D("writeCheckpoint completed with error",e)}r.ready(e,t),r.cancelled?q():(r._addedListeners||(r.once("cancel",q),"function"==typeof n.complete&&(r.once("error",n.complete),r.once("complete",(function(e){n.complete(null,e)}))),r._addedListeners=!0),void 0===n.since?z():$().then((function(){return f=!0,a.writeCheckpoint(n.since,P)})).then((function(){f=!1,r.cancelled?q():(v=n.since,z())})).catch(W))}class Hn extends(u()){constructor(){super(),this.cancelled=!1,this.state="pending";const e=new Promise(((e,t)=>{this.once("complete",e),this.once("error",t)}));this.then=function(t,n){return e.then(t,n)},this.catch=function(t){return e.catch(t)},this.catch((function(){}))}cancel(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")}ready(e,t){if(this._readyCalled)return;this._readyCalled=!0;const n=()=>{this.cancel()};function r(){e.removeListener("destroyed",n),t.removeListener("destroyed",n)}e.once("destroyed",n),t.once("destroyed",n),this.once("complete",r),this.once("error",r)}}function Jn(e,t){var n=t.PouchConstructor;return"string"==typeof e?new n(e,t):e}function Vn(e,t,n,r){if("function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw U(N,"`doc_ids` filter parameter is not a list.");n.complete=r,(n=d(n)).continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;var i=new Hn(n);return Wn(Jn(e,n),Jn(t,n),n,i),i}function Gn(e,t,n,r){return"function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),(n=d(n)).PouchConstructor=n.PouchConstructor||this,e=Jn(e,n),t=Jn(t,n),new Qn(e,t,n,r)}class Qn extends(u()){constructor(e,t,n,r){super(),this.canceled=!1;const i=n.push?Object.assign({},n,n.push):n,s=n.pull?Object.assign({},n,n.pull):n;this.push=Vn(e,t,i),this.pull=Vn(t,e,s),this.pushPaused=!0,this.pullPaused=!0;const o=e=>{this.emit("change",{direction:"pull",change:e})},a=e=>{this.emit("change",{direction:"push",change:e})},c=e=>{this.emit("denied",{direction:"push",doc:e})},u=e=>{this.emit("denied",{direction:"pull",doc:e})},l=()=>{this.pushPaused=!0,this.pullPaused&&this.emit("paused")},f=()=>{this.pullPaused=!0,this.pushPaused&&this.emit("paused")},d=()=>{this.pushPaused=!1,this.pullPaused&&this.emit("active",{direction:"push"})},h=()=>{this.pullPaused=!1,this.pushPaused&&this.emit("active",{direction:"pull"})};let p={};const m=e=>(t,n)=>{("change"===t&&(n===o||n===a)||"denied"===t&&(n===u||n===c)||"paused"===t&&(n===f||n===l)||"active"===t&&(n===h||n===d))&&(t in p||(p[t]={}),p[t][e]=!0,2===Object.keys(p[t]).length&&this.removeAllListeners(t))};function v(e,t,n){-1==e.listeners(t).indexOf(n)&&e.on(t,n)}n.live&&(this.push.on("complete",this.pull.cancel.bind(this.pull)),this.pull.on("complete",this.push.cancel.bind(this.push))),this.on("newListener",(function(e){"change"===e?(v(this.pull,"change",o),v(this.push,"change",a)):"denied"===e?(v(this.pull,"denied",u),v(this.push,"denied",c)):"active"===e?(v(this.pull,"active",h),v(this.push,"active",d)):"paused"===e&&(v(this.pull,"paused",f),v(this.push,"paused",l))})),this.on("removeListener",(function(e){"change"===e?(this.pull.removeListener("change",o),this.push.removeListener("change",a)):"denied"===e?(this.pull.removeListener("denied",u),this.push.removeListener("denied",c)):"active"===e?(this.pull.removeListener("active",h),this.push.removeListener("active",d)):"paused"===e&&(this.pull.removeListener("paused",f),this.push.removeListener("paused",l))})),this.pull.on("removeListener",m("pull")),this.push.on("removeListener",m("push"));const y=Promise.all([this.push,this.pull]).then((e=>{const t={push:e[0],pull:e[1]};return this.emit("complete",t),r&&r(null,t),this.removeAllListeners(),t}),(e=>{if(this.cancel(),r?r(e):this.emit("error",e),this.removeAllListeners(),r)throw e}));this.then=function(e,t){return y.then(e,t)},this.catch=function(e){return y.catch(e)}}cancel(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())}}He.plugin((function(e){e.adapter("idb",en,!0)})).plugin((function(e){e.adapter("http",ln,!1),e.adapter("https",ln,!1)})).plugin(Dn).plugin((function(e){e.replicate=Vn,e.sync=Gn,Object.defineProperty(e.prototype,"replicate",{get:function(){var e=this;return void 0===this.replicateMethods&&(this.replicateMethods={from:function(t,n,r){return e.constructor.replicate(t,e,n,r)},to:function(t,n,r){return e.constructor.replicate(e,t,n,r)}}),this.replicateMethods}}),e.prototype.sync=function(e,t,n){return this.constructor.sync(this,e,t,n)}})),t.default=He},8660:function(e,t,n){var r;!function(e){!function(){var t="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=i(e);function i(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===t.Reflect?t.Reflect=e:r=i(t.Reflect,r),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,o={__proto__:[]}instanceof Array,a=!s&&!o,c={create:s?function(){return T(Object.create(null))}:o?function(){return T({__proto__:null})}:function(){return T({})},has:a?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:a?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),l="object"==typeof process&&"true"==="MISSING_ENV_VAR".REFLECT_METADATA_USE_MAP_POLYFILL,f=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,s)},t.prototype.entries=function(){return new n(this._keys,this._values,o)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[i]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function s(e,t){return t}function o(e,t){return[e,t]}}():Map,d=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new f}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}():Set,h=new(l||"function"!=typeof WeakMap?function(){var e=c.create(),n=r();return function(){function e(){this._key=r()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=r()},e}();function r(){var t;do{t="@@WeakMap@@"+o()}while(c.has(e,t));return e[t]=!0,t}function i(e,r){if(!t.call(e,n)){if(!r)return;Object.defineProperty(e,n,{value:c.create()})}return e[n]}function s(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function o(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):s(new Uint8Array(e),e):s(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<16;++r){var i=t[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function p(e,t,n){var r=h.get(e);if(S(r)){if(!n)return;r=new f,h.set(e,r)}var i=r.get(t);if(S(i)){if(!n)return;i=new f,r.set(t,i)}return i}function m(e,t,n){if(v(e,t,n))return!0;var r=A(t);return!C(r)&&m(e,r,n)}function v(e,t,n){var r=p(t,n,!1);return!S(r)&&!!r.has(e)}function y(e,t,n){if(v(e,t,n))return g(e,t,n);var r=A(t);return C(r)?void 0:y(e,r,n)}function g(e,t,n){var r=p(t,n,!1);if(!S(r))return r.get(e)}function _(e,t,n,r){p(n,r,!0).set(e,t)}function b(e,t){var n=w(e,t),r=A(e);if(null===r)return n;var i=b(r,t);if(i.length<=0)return n;if(n.length<=0)return i;for(var s=new d,o=[],a=0,c=n;a<c.length;a++){var u=c[a];s.has(u)||(s.add(u),o.push(u))}for(var l=0,f=i;l<f.length;l++)u=f[l],s.has(u)||(s.add(u),o.push(u));return o}function w(e,t){var n=[],r=p(e,t,!1);if(S(r))return n;for(var s=function(e){var t=E(e,i);if(!R(t))throw new TypeError;var n=t.call(e);if(!j(n))throw new TypeError;return n}(r.keys()),o=0;;){var a=x(s);if(!a)return n.length=o,n;var c=a.value;try{n[o]=c}catch(e){try{I(s)}finally{throw e}}o++}}function k(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function S(e){return void 0===e}function C(e){return null===e}function j(e){return"object"==typeof e?null!==e:"function"==typeof e}function O(e){var t=function(e){switch(k(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var t="string",n=E(e,r);if(void 0!==n){var i=n.call(e,t);if(j(i))throw new TypeError;return i}return function(e){var t,n,r=e.toString;if(R(r)&&!j(n=r.call(e)))return n;if(R(t=e.valueOf)&&!j(n=t.call(e)))return n;throw new TypeError}(e)}(e);return"symbol"==typeof t?t:function(e){return""+e}(t)}function P(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function R(e){return"function"==typeof e}function $(e){return"function"==typeof e}function E(e,t){var n=e[t];if(null!=n){if(!R(n))throw new TypeError;return n}}function x(e){var t=e.next();return!t.done&&t}function I(e){var t=e.return;t&&t.call(e)}function A(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===u)return t;if(t!==u)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i||i===e?t:i}function T(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,n,r){if(S(n)){if(!P(e))throw new TypeError;if(!$(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!S(r)&&!C(r)){if(!$(r))throw new TypeError;t=r}}return t}(e,t)}if(!P(e))throw new TypeError;if(!j(t))throw new TypeError;if(!j(r)&&!S(r)&&!C(r))throw new TypeError;return C(r)&&(r=void 0),function(e,t,n,r){for(var i=e.length-1;i>=0;--i){var s=(0,e[i])(t,n,r);if(!S(s)&&!C(s)){if(!j(s))throw new TypeError;r=s}}return r}(e,t,n=O(n),r)})),e("metadata",(function(e,t){return function(n,r){if(!j(n))throw new TypeError;if(!S(r)&&!function(e){switch(k(e)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;_(e,t,n,r)}})),e("defineMetadata",(function(e,t,n,r){if(!j(n))throw new TypeError;return S(r)||(r=O(r)),_(e,t,n,r)})),e("hasMetadata",(function(e,t,n){if(!j(t))throw new TypeError;return S(n)||(n=O(n)),m(e,t,n)})),e("hasOwnMetadata",(function(e,t,n){if(!j(t))throw new TypeError;return S(n)||(n=O(n)),v(e,t,n)})),e("getMetadata",(function(e,t,n){if(!j(t))throw new TypeError;return S(n)||(n=O(n)),y(e,t,n)})),e("getOwnMetadata",(function(e,t,n){if(!j(t))throw new TypeError;return S(n)||(n=O(n)),g(e,t,n)})),e("getMetadataKeys",(function(e,t){if(!j(e))throw new TypeError;return S(t)||(t=O(t)),b(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!j(e))throw new TypeError;return S(t)||(t=O(t)),w(e,t)})),e("deleteMetadata",(function(e,t,n){if(!j(t))throw new TypeError;S(n)||(n=O(n));var r=p(t,n,!1);if(S(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var i=h.get(t);return i.delete(n),i.size>0||h.delete(t),!0}))}(r)}()}(r||(r={}))},8322:function(e){e.exports=function(){"use strict";var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function t(e,t){var n=e[0],r=e[1],i=e[2],s=e[3];r=((r+=((i=((i+=((s=((s+=((n=((n+=(r&i|~r&s)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+t[1]-389564586|0)<<12|s>>>20)+n|0)&n|~s&r)+t[2]+606105819|0)<<17|i>>>15)+s|0)&s|~i&n)+t[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r&i|~r&s)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+t[5]+1200080426|0)<<12|s>>>20)+n|0)&n|~s&r)+t[6]-1473231341|0)<<17|i>>>15)+s|0)&s|~i&n)+t[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r&i|~r&s)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+t[9]-1958414417|0)<<12|s>>>20)+n|0)&n|~s&r)+t[10]-42063|0)<<17|i>>>15)+s|0)&s|~i&n)+t[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r&i|~r&s)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+t[13]-40341101|0)<<12|s>>>20)+n|0)&n|~s&r)+t[14]-1502002290|0)<<17|i>>>15)+s|0)&s|~i&n)+t[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r&s|i&~s)+t[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+t[6]-1069501632|0)<<9|s>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|i>>>18)+s|0)&n|s&~n)+t[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r&s|i&~s)+t[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+t[10]+38016083|0)<<9|s>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|i>>>18)+s|0)&n|s&~n)+t[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r&s|i&~s)+t[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+t[14]-1019803690|0)<<9|s>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|i>>>18)+s|0)&n|s&~n)+t[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r&s|i&~s)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+t[2]-51403784|0)<<9|s>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|i>>>18)+s|0)&n|s&~n)+t[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r^i^s)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+t[8]-2022574463|0)<<11|s>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|i>>>16)+s|0)^s^n)+t[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r^i^s)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+t[4]+1272893353|0)<<11|s>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|i>>>16)+s|0)^s^n)+t[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r^i^s)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+t[0]-358537222|0)<<11|s>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|i>>>16)+s|0)^s^n)+t[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((s=((s+=((n=((n+=(r^i^s)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+t[12]-421815835|0)<<11|s>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|i>>>16)+s|0)^s^n)+t[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((s=((s+=(r^((n=((n+=(i^(r|~s))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+t[7]+1126891415|0)<<10|s>>>22)+n|0)^((i=((i+=(n^(s|~r))+t[14]-1416354905|0)<<15|i>>>17)+s|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((s=((s+=(r^((n=((n+=(i^(r|~s))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+t[3]-1894986606|0)<<10|s>>>22)+n|0)^((i=((i+=(n^(s|~r))+t[10]-1051523|0)<<15|i>>>17)+s|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((s=((s+=(r^((n=((n+=(i^(r|~s))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+t[15]-30611744|0)<<10|s>>>22)+n|0)^((i=((i+=(n^(s|~r))+t[6]-1560198380|0)<<15|i>>>17)+s|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((s=((s+=(r^((n=((n+=(i^(r|~s))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+t[11]-1120210379|0)<<10|s>>>22)+n|0)^((i=((i+=(n^(s|~r))+t[2]+718787259|0)<<15|i>>>17)+s|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+i|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=s+e[3]|0}function n(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function i(e){var r,i,s,o,a,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=u;r+=64)t(l,n(e.substring(r-64,r)));for(i=(e=e.substring(r-64)).length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<i;r+=1)s[r>>2]|=e.charCodeAt(r)<<(r%4<<3);if(s[r>>2]|=128<<(r%4<<3),r>55)for(t(l,s),r=0;r<16;r+=1)s[r]=0;return o=(o=8*u).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),c=parseInt(o[1],16)||0,s[14]=a,s[15]=c,t(l,s),l}function s(t){var n,r="";for(n=0;n<4;n+=1)r+=e[t>>8*n+4&15]+e[t>>8*n&15];return r}function o(e){var t;for(t=0;t<e.length;t+=1)e[t]=s(e[t]);return e.join("")}function a(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function c(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function u(){this.reset()}return o(i("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(t,n){var r,i,s,o,a=this.byteLength,c=e(t,a),u=a;return void 0!==n&&(u=e(n,a)),c>u?new ArrayBuffer(0):(r=u-c,i=new ArrayBuffer(r),s=new Uint8Array(i),o=new Uint8Array(this,c,r),s.set(o),i)}}(),u.prototype.append=function(e){return this.appendBinary(a(e)),this},u.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var r,i=this._buff.length;for(r=64;r<=i;r+=64)t(this._hash,n(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},u.prototype.end=function(e){var t,n,r=this._buff,i=r.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)s[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(s,i),n=o(this._hash),e&&(n=c(n)),this.reset(),n},u.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},u.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},u.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},u.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},u.prototype._finish=function(e,n){var r,i,s,o=n;if(e[o>>2]|=128<<(o%4<<3),o>55)for(t(this._hash,e),o=0;o<16;o+=1)e[o]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),s=parseInt(r[1],16)||0,e[14]=i,e[15]=s,t(this._hash,e)},u.hash=function(e,t){return u.hashBinary(a(e),t)},u.hashBinary=function(e,t){var n=o(i(e));return t?c(n):n},u.ArrayBuffer=function(){this.reset()},u.ArrayBuffer.prototype.append=function(e){var n,i,s,o,a=(i=this._buff.buffer,s=e,(o=new Uint8Array(i.byteLength+s.byteLength)).set(new Uint8Array(i)),o.set(new Uint8Array(s),i.byteLength),o),c=a.length;for(this._length+=e.byteLength,n=64;n<=c;n+=64)t(this._hash,r(a.subarray(n-64,n)));return this._buff=n-64<c?new Uint8Array(a.buffer.slice(n-64)):new Uint8Array(0),this},u.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)s[t>>2]|=r[t]<<(t%4<<3);return this._finish(s,i),n=o(this._hash),e&&(n=c(n)),this.reset(),n},u.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},u.ArrayBuffer.prototype.getState=function(){var e,t=u.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},u.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e){var t,n=e.length,r=new ArrayBuffer(n),i=new Uint8Array(r);for(t=0;t<n;t+=1)i[t]=e.charCodeAt(t);return i}(e.buff),u.prototype.setState.call(this,e)},u.ArrayBuffer.prototype.destroy=u.prototype.destroy,u.ArrayBuffer.prototype._finish=u.prototype._finish,u.ArrayBuffer.hash=function(e,n){var i=o(function(e){var n,i,s,o,a,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=u;n+=64)t(l,r(e.subarray(n-64,n)));for(i=(e=n-64<u?e.subarray(n-64):new Uint8Array(0)).length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<i;n+=1)s[n>>2]|=e[n]<<(n%4<<3);if(s[n>>2]|=128<<(n%4<<3),n>55)for(t(l,s),n=0;n<16;n+=1)s[n]=0;return o=(o=8*u).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(o[2],16),c=parseInt(o[1],16)||0,s[14]=a,s[15]=c,t(l,s),l}(new Uint8Array(e)));return n?c(i):i},u}()},4096:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigService=void 0;const s=n(651);let o=t.ConfigService=class{constructor(e){this._config=e,this.defaultConfig={appPrefix:"USPACY.APP",couchDbUrl:"https://couchdb.uspacy.tech"}}get config(){return Object.assign(Object.assign({},this._config),this.defaultConfig)}};t.ConfigService=o=r([(0,s.injectable)(),i("design:paramtypes",[Object])],o)},3919:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return s(t,e),t},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=void 0;const l=a(n(7218)),f=n(651),d=n(4096),h=n(5432),p=n(1475);let m=t.HttpClient=r=class{constructor(e,t,n){var r;this.tokenService=e,this.configService=t,this.sessionService=n,this.client=l.default.create(Object.assign({},null===(r=this.configService.config)||void 0===r?void 0:r.httpClientConfig)),this.setupInterceptors()}setupInterceptors(){this.client.interceptors.request.use(this.handleRequest.bind(this),this.handleRequestError.bind(this)),this.client.interceptors.response.use(this.handleResponse.bind(this),this.handleResponseError.bind(this))}handleRequest(e){var t;return u(this,void 0,void 0,(function*(){const n=!1!==e.useAuth;yield this.resolveBusy();const r=yield this.tokenService.getToken();if(n&&r&&((null===(t=e.headers)||void 0===t?void 0:t.Authorization)||(e.headers=Object.assign(Object.assign({},e.headers),{Authorization:`Bearer ${r}`}))),!e.baseURL&&r){const t=yield this.tokenService.decodeToken(r);e.baseURL=`https://${t.domain}`}return e.url&&e.urlParams&&(e.url=Object.entries(e.urlParams).reduce(((e,[t,n])=>e.replace(`:${t}`,encodeURIComponent(String(n)))),e.url)),e}))}handleRequestError(e){var t;return u(this,void 0,void 0,(function*(){throw e instanceof l.AxiosError&&401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(yield this.logout()),e}))}handleResponse(e){return r.isBusy=!1,e}handleResponseError(e){var t;return u(this,void 0,void 0,(function*(){if(401===(null===(t=e.response)||void 0===t?void 0:t.status)&&e.config&&!e.config._retry){e.config._retry=!0;try{const t=yield this.tokenService.refreshToken();return yield this.tokenService.setToken(t.jwt),e.config.headers.Authorization=`Bearer ${t.jwt}`,this.client(e.config)}catch(e){throw yield this.logout(),e}}throw e}))}logout(){return u(this,void 0,void 0,(function*(){yield this.tokenService.removeToken(),yield this.tokenService.removeRefreshToken(),this.sessionService.removeRememberSession(),"undefined"!=typeof window&&setTimeout((()=>window.location.reload()),500)}))}resolveBusy(){return u(this,void 0,void 0,(function*(){if(r.isBusy)yield this.whenWillIdle();else if(r.isBusy=!0,yield this.tokenService.isExpired())try{yield this.tokenService.refreshToken()}finally{r.isBusy=!1}else r.isBusy=!1}))}whenWillIdle(){return u(this,void 0,void 0,(function*(){let e=0;for(;r.isBusy&&e<r.MAX_RETRY_CHECK_BUSY;)yield new Promise((t=>setTimeout(t,500*e))),e++;if(r.isBusy)throw new Error("Timeout waiting for HttpClient to be idle")}))}};m.isBusy=!1,m.MAX_RETRY_CHECK_BUSY=5,t.HttpClient=m=r=o([(0,f.injectable)(),c("design:paramtypes",[p.TokensService,d.ConfigService,h.SessionService])],m)},5432:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionService=void 0;const s=n(651),o=n(3604);let a=t.SessionService=class{constructor(e){this.sessionStorage=e}setRememberSession(){return this.sessionStorage.storage.setRememberSession()}removeRememberSession(){return this.sessionStorage.storage.removeRememberSession()}isSetRememberSession(){return this.sessionStorage.storage.isSetRememberSession()}};t.SessionService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.SessionStorage])],a)},9692:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserSessionStorage=void 0;const o=s(n(646)),a=n(651),c=n(4096);let u=t.BrowserSessionStorage=class{constructor(e){this.configService=e,this.expires=30,this.KEY=`${this.configService.config.appPrefix}.rememberSession`}setRememberSession(){o.default.set(this.KEY,"true",{expires:this.expires,path:"/"})}removeRememberSession(){o.default.remove(this.KEY,{expires:this.expires,path:"/"})}isSetRememberSession(){return!!o.default.get(this.KEY)}};t.BrowserSessionStorage=u=r([(0,a.injectable)(),i("design:paramtypes",[c.ConfigService])],u)},3604:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStorage=void 0;const s=n(651),o=n(4096),a=n(9692),c=n(6845);let u=t.SessionStorage=class{constructor(e){this.configService=e,this.storage=this.resolveStorageService(e)}resolveStorageService(e){var t;return(null===(t=e.config)||void 0===t?void 0:t.sessionStorageService)?e.config.sessionStorageService:"undefined"!=typeof window?new a.BrowserSessionStorage(this.configService):new c.NodeSessionStorage}};t.SessionStorage=u=r([(0,s.injectable)(),i("design:paramtypes",[o.ConfigService])],u)},6845:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeSessionStorage=void 0,n.g.UspacyNodeSessionStorage={},t.NodeSessionStorage=class{constructor(){this.store=n.g.UspacyNodeSessionStorage,this.KEY="rememberSession",this.KEY_EXPIRED_DATE="rememberSessionExtireDate",this.expires=30}setRememberSession(){this.store[this.KEY]=!0,this.store[this.KEY_EXPIRED_DATE]=new Date(Date.now()+24*this.expires*60*60*1e3).getTime()}removeRememberSession(){delete this.store[this.KEY],delete this.store[this.KEY_EXPIRED_DATE]}isSetRememberSession(){return this.isExpired()&&this.removeRememberSession(),!!this.store[this.KEY]}isExpired(){return!this.store[this.KEY_EXPIRED_DATE]||this.store[this.KEY_EXPIRED_DATE]<Date.now()}}},2685:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserStorageService=void 0;const r=n(9483);t.BrowserStorageService=class{constructor(e,t="Uspacy"){this.storeName=e,this.name=t,this.table=(0,r.createInstance)({name:this.name,storeName:this.storeName})}setItem(e,t){return this.table.setItem(e,t)}getItem(e){return this.table.getItem(e)}removeItem(e){return this.table.removeItem(e)}}},7430:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StorageService=void 0;const r=n(651),i=n(2685),s=n(2985);(0,r.injectable)(),t.StorageService=class{constructor(e,t){this.storage=this.resolveStorageService(e,t)}resolveStorageService(e,t){var n;return(null===(n=t.config)||void 0===n?void 0:n.storageService)?t.config.storageService:"undefined"!=typeof window&&"indexedDB"in window?new i.BrowserStorageService(e):new s.NodeStorageService}setItem(e,t){return this.storage.setItem(e,t)}getItem(e){return this.storage.getItem(e)}removeItem(e){return this.storage.removeItem(e)}}},2985:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStorageService=void 0,n.g.UspacyNodeStorage={},t.NodeStorageService=class{constructor(){this.store=n.g.UspacyNodeStorage}getItem(e){return new Promise((t=>t(this.store[e])))}setItem(e,t){return this.store[e]=t,Promise.resolve(t)}removeItem(e){return this.store[e]&&delete this.store[e],Promise.resolve()}}},1475:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TokensService=void 0;const a=o(n(7218)),c=o(n(6245)),u=n(651),l=n(4096),f=n(5432),d=n(7430);let h=t.TokensService=class{constructor(e,t){this.sessionService=e,this.configService=t,this.storageService=new d.StorageService("tokens",t)}setToken(e){return this.storageService.setItem("token",e)}getToken(){return this.storageService.getItem("token")}removeToken(){return this.storageService.removeItem("token")}setRefreshToken(e){return this.storageService.setItem("refreshToken",e)}getRefreshToken(){return this.storageService.getItem("refreshToken")}removeRefreshToken(){return this.storageService.removeItem("refreshToken")}decodeToken(e){return new Promise(((t,n)=>s(this,void 0,void 0,(function*(){try{const n=e||(yield this.getToken());if(!n)throw new Error("Token not provided");t((0,c.default)(n))}catch(e){n(e)}}))))}decodeRefreshToken(e){return new Promise(((t,n)=>s(this,void 0,void 0,(function*(){try{const n=e||(yield this.getRefreshToken());if(!n)throw new Error("Token not provided");t((0,c.default)(n))}catch(e){n(e)}}))))}refreshToken(e=!1){return new Promise(((t,n)=>s(this,void 0,void 0,(function*(){var r,i;if(!this.sessionService.isSetRememberSession()&&!e)return n(new Error(""));try{const e=yield this.getRefreshToken(),n=yield this.decodeRefreshToken(e),s=yield a.default.post("/auth/v1/auth/refresh_token",{},{headers:{Authorization:`Bearer ${e}`},baseURL:(null===(i=null===(r=this.configService.config)||void 0===r?void 0:r.httpClientConfig)||void 0===i?void 0:i.baseURL)||`https://${n.domain}`});yield this.setToken(s.data.jwt),yield this.setRefreshToken(s.data.refreshToken),t(s.data)}catch(e){n(e)}}))))}isExpired(){return s(this,void 0,void 0,(function*(){try{return(yield this.decodeToken()).exp<Math.floor(Date.now()/1e3)}catch(e){return!1}}))}getDomain(e){return s(this,void 0,void 0,(function*(){try{return(yield this.decodeToken(e)).domain}catch(e){return}}))}getUserRoles(e){return s(this,void 0,void 0,(function*(){try{return(yield this.decodeToken(e)).roles}catch(e){return}}))}};t.TokensService=h=r([(0,u.injectable)(),i("design:paramtypes",[f.SessionService,l.ConfigService])],h)},3607:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.uspacySdk=void 0,n(8660);const s=n(651),o=n(4096),a=n(3919),c=n(5432),u=n(1475),l=n(2406),f=n(8345),d=n(8782),h=n(9916),p=n(4659),m=n(6115),v=n(9037),y=n(7317),g=n(7842),_=n(5045),b=n(5887),w=n(8461),k=n(2915),S=n(9846),C=n(7895),j=n(7580),O=n(5680),P=n(406),R=n(8854),$=n(9042),E=n(5886),x=n(8129),I=n(6735),A=n(7478),T=n(6851),D=n(1688),q=n(588),N=n(3943),B=n(5410),L=n(2942),F=n(8161),M=n(9991),U=n(2862),z=n(8811),K=n(162),W=n(7543),H=n(2410),J=n(4176),V=n(2548),G=n(8993),Q=n(3504),Y=n(1682);let X=class{constructor(e,t,n,r,i,s,o,a,c,u,l,f,d,h,p,m,v,y,g,_,b,w,k,S,C,j,O,P,R,$,E,x,I,A,T,D,q,N,B,L,F,M,U,z,K){this.httpClient=e,this.authService=t,this.tokensService=n,this.sessionService=r,this.usersService=i,this.departmentsService=s,this.profileService=o,this.invatesService=a,this.commentsService=c,this.appsService=u,this.tasksService=l,this.tasksStagesService=f,this.tasksTimerService=d,this.groupsService=h,this.filesService=p,this.webhooksService=m,this.rolesService=v,this.notificationsService=y,this.newsFeedService=g,this.migrationsService=_,this.messengerService=b,this.emailService=w,this.automationsService=k,this.crmEntitiesService=S,this.crmCallsService=C,this.crmCompaniesService=j,this.crmContactsService=O,this.crmDealsService=P,this.crmLeadsService=R,this.crmTasksService=$,this.crmDealsFunnelsService=E,this.crmLeadsFunnelsService=x,this.crmDealsStagesService=I,this.crmLeadsStagesService=A,this.crmProductsService=T,this.crmProductTaxesService=D,this.crmProductUnitService=q,this.crmProductsCategoryService=N,this.crmProductsForEntityService=B,this.crmDocumentTemplatesService=L,this.crmRequisitesService=F,this.historyService=M,this.analyticsService=U,this.announcersService=z,this.pouchdbService=K}static createInstance(e){return s.container.register(o.ConfigService,{useValue:new o.ConfigService(e)}),s.container.resolve(this)}};X=r([(0,s.injectable)(),i("design:paramtypes",[a.HttpClient,h.AuthService,u.TokensService,c.SessionService,Q.UsersService,T.DepartmentsService,W.ProfileService,L.InvatesService,m.CommentsService,d.AppsService,J.TasksService,V.TasksStagesService,G.TasksTimerService,N.GroupsService,q.FilesService,Y.WebhooksService,H.RolesService,z.NotificationsService,U.NewsFeedService,M.MigrationsService,F.MessengerService,D.EmailService,p.AutomationsService,S.CrmEntitiesService,v.CrmCallsService,y.CrmCompaniesService,g.CrmContactsService,b.CrmDealsService,j.CrmLeadsService,A.CrmTasksService,_.CrmDealsFunnelsService,C.CrmLeadsFunnelsService,w.CrmDealsStagesService,O.CrmLeadsStagesService,$.CrmProductsService,E.CrmProductsTaxesService,x.CrmProductsUnitService,P.CrmProductsCategoryService,R.CrmProductsForEntityService,k.CrmDocumentTemplatesService,I.CrmRequisitesService,B.HistoryService,l.AnalyticsService,f.AnnouncersService,K.PouchdbService])],X),t.default=X,t.uspacySdk=X.createInstance()},2406:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsService=void 0;const s=n(651),o=n(3919);let a=t.AnalyticsService=class{constructor(e){this.httpClient=e,this.namespace="analytics-backend/v1",this.namespaceReports=`${this.namespace}/reports/`}getAnalyticsReportList(e,t){return this.httpClient.client.get(`${this.namespaceReports}`,{params:e,signal:t})}getAnalyticReport(e){return this.httpClient.client.get(`${this.namespaceReports}:id`,{urlParams:{id:e}})}createReport(e){return this.httpClient.client.post(`${this.namespaceReports}`,e)}updateReport(e,t){return this.httpClient.client.patch(`${this.namespaceReports}:id`,t,{urlParams:{id:e}})}deleteReport(e){return this.httpClient.client.delete(`${this.namespaceReports}:id`,{urlParams:{id:e}})}};t.AnalyticsService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},8345:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AnnouncersService=void 0;const o=n(651),a=n(3919);let c=t.AnnouncersService=class{constructor(e){this.httpClient=e,this.namespace="/announce"}getAnnouncers(e,t,n){return s(this,void 0,void 0,(function*(){return this.httpClient.client.get(this.namespace,{baseURL:n,params:{populate:e,locale:t},useAuth:!1})}))}};t.AnnouncersService=c=r([(0,o.injectable)(),i("design:paramtypes",[a.HttpClient])],c)},8782:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AppsService=void 0;const o=n(651),a=n(3919);let c=t.AppsService=class{constructor(e){this.httpClient=e,this.namespace="/apps/v1/apps"}getApps(e,t,n){return s(this,void 0,void 0,(function*(){return this.httpClient.client.get(this.namespace,{params:{page:e,list:n},headers:{"Accept-Language":t}})}))}getApp(e,t){return s(this,void 0,void 0,(function*(){return this.httpClient.client.get(`${this.namespace}/:id/`,{urlParams:{id:e},headers:{"Accept-Language":t}})}))}};t.AppsService=c=r([(0,o.injectable)(),i("design:paramtypes",[a.HttpClient])],c)},9916:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthService=void 0;const o=n(651),a=n(3919),c=n(5432),u=n(1475);let l=t.AuthService=class{constructor(e,t,n){this.tokenService=e,this.httpClient=t,this.sessionService=n,this.namespace="/auth/v1"}login({email:e,password:t,code:n,remember:r}){return s(this,void 0,void 0,(function*(){try{const i=yield this.httpClient.client.post(`${this.namespace}/auth/sign_in/`,{email:e,password:t,code:n});r&&this.sessionService.setRememberSession();const s=this.tokenService.setToken(i.data.jwt),o=this.tokenService.setRefreshToken(i.data.refreshToken);return yield Promise.all([s,o]),i}catch(e){return e}}))}confirmEmail(e){return this.httpClient.client.post(`${this.namespace}/auth/confirm_email/`,e)}refreshToken(e){return this.httpClient.client.post(`${this.namespace}/auth/refresh_token/`,null,{headers:{Authorization:`Bearer ${e}`}})}register(e){return this.httpClient.client.post(`${this.namespace}/auth/register/`,e)}signUp(e){return this.httpClient.client.post(`${this.namespace}/users/`,e)}forgotPassword(e){return this.httpClient.client.post(`${this.namespace}/users/forgot_password/`,{email:e})}resetPassword(e){return this.httpClient.client.post(`${this.namespace}/users/reset_password/`,e)}changePassword(e,t){return this.httpClient.client.post(`${this.namespace}/users/:userId/change_password/`,{password:t},{urlParams:{userId:e}})}changeMyPassword(e,t){return this.httpClient.client.post(`${this.namespace}/users/me/reset_password/`,{oldPassword:e,newPassword:t})}checkEmail(e){return this.httpClient.client.get(`${this.namespace}/users/check_email/`,{params:{email:e}})}checkPortalByDomain(e){return this.httpClient.client.get(`${this.namespace}/portals/`,{params:{domain:e}})}createPortal(e){return this.httpClient.client.post(`${this.namespace}/portals/`,e)}getInvoices(e){return this.httpClient.client.get(`${this.namespace}/invoices/`,{params:{limit:e}})}getInvoicesPdf(e){return this.httpClient.client.get(`${this.namespace}/invoices/:id/pdf/`,{urlParams:{id:e}})}getRatesList(){return this.httpClient.client.get(`${this.namespace}/rates/`)}getSubscription(){return this.httpClient.client.get(`${this.namespace}/subscriptions/`)}getCoupon(e){return this.httpClient.client.get(`${this.namespace}/coupons/${e}`)}subscriptionInvdividual(e){return this.httpClient.client.post(`${this.namespace}/subscriptions/individual`,e)}subscriptionLegal(e){return this.httpClient.client.post(`${this.namespace}/subscriptions/legal`,e)}activateDemo(){return this.httpClient.client.post(`${this.namespace}/subscriptions/demo`)}createPaymentIntent(e){return this.httpClient.client.post(`${this.namespace}/chargebee/payment_intent`,e)}createUsingPaymentIntent(e){return this.httpClient.client.post(`${this.namespace}/chargebee/create_using_payment_intent`,e)}disableSubscriptionsRenewal(e){return this.httpClient.client.post(`${this.namespace}/subscriptions/disable_renewal`,e)}downgrade(e){return this.httpClient.client.post(`${this.namespace}/subscriptions/downgrade`,e)}getUrlToRedirectAfterOAuth(e){return this.httpClient.client.get(`${this.namespace}/oauth/info`,{params:e,useAuth:!1})}getTariffsList(){return this.httpClient.client.get(`${this.namespace}/tariffs`)}getPortalSubscription(){return this.httpClient.client.get(`${this.namespace}/tariffs/subscription`)}createSubscriptionInvdividual(e){return this.httpClient.client.post(`${this.namespace}/tariffs/invoices/individual`,e)}createSubscriptionLegal(e){return this.httpClient.client.post(`${this.namespace}/tariffs/invoices/legal`,e)}activatingDemo(){return this.httpClient.client.post(`${this.namespace}/tariffs/demo`)}disableSubscriptionRenewal(){return this.httpClient.client.post(`${this.namespace}/tariffs/disable_renewal`)}downgradeTariff(e){return this.httpClient.client.post(`${this.namespace}/tariffs/downgrade`,e)}};t.AuthService=l=r([(0,o.injectable)(),i("design:paramtypes",[u.TokensService,a.HttpClient,c.SessionService])],l)},4659:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AutomationsService=void 0;const o=n(651),a=n(3919);let c=t.AutomationsService=class{constructor(e){this.httpClient=e,this.namespace="/automations-backend/v1/"}getAutomations(e,t,n){return s(this,void 0,void 0,(function*(){return this.httpClient.client.get(this.namespace,{params:{page:e,list:t,search:n}})}))}deleteAutomation(e){return this.httpClient.client.delete(`${this.namespace}:id`,{urlParams:{id:e}})}toggleAutomation(e,t){return this.httpClient.client.patch(`${this.namespace}:id`,t,{urlParams:{id:e}})}};t.AutomationsService=c=r([(0,o.injectable)(),i("design:paramtypes",[a.HttpClient])],c)},6115:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CommentsService=void 0;const s=n(651),o=n(3919);let a=t.CommentsService=class{constructor(e){this.httpClient=e,this.namespace="/comments/v1"}getCommentsList(e){return this.httpClient.client.get(`${this.namespace}/list_comments`,{params:e})}getComment(e){return this.httpClient.client.get(`${this.namespace}/comments/:id/`,{urlParams:{id:e}})}createComment(e){return this.httpClient.client.post(`${this.namespace}/comments`,e)}updateComment(e,t){return this.httpClient.client.patch(`${this.namespace}/comments/:id/`,t,{urlParams:{id:e}})}deleteComment(e){return this.httpClient.client.delete(`${this.namespace}/comments/:id/`,{urlParams:{id:e}})}readComments(e){return this.httpClient.client.post(`${this.namespace}/comments/read/`,{commentIds:e})}pinComment(e,t){return this.httpClient.client.patch(`${this.namespace}/comments/:id/pin`,{pinned:t},{urlParams:{id:e}})}};t.CommentsService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},3016:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CouchdbService=void 0;const o=n(651),a=n(8410),c=n(3919),u=n(1475);let l=t.CouchdbService=class{constructor(e,t){this.httpClient=e,this.tokenService=t,this.namespace="/settings-backend/v1"}getPartitionKey(e){return s(this,void 0,void 0,(function*(){const t=yield this.tokenService.decodeToken();return`${t.domain}-${t.id}-${e}`}))}find(e,t,n){return s(this,void 0,void 0,(function*(){const r=yield this.getPartitionKey(t);return this.httpClient.client.post(`${this.namespace}/${e}/_find`,{selector:{_id:{$gt:n||r,$lt:`${n||r}\\ufff0`}},limit:1e3,skip:0})}))}create(e,t,n,r=`:${(0,a.v4)()}`){return s(this,void 0,void 0,(function*(){const i=yield this.getPartitionKey(n);return this.httpClient.client.post(`${this.namespace}/${e}`,Object.assign({_id:i+r},t))}))}update(e,t,n,r){return s(this,void 0,void 0,(function*(){return this.httpClient.client.put(`${this.namespace}/${e}/${t}`,Object.assign(Object.assign({},r),{_rev:n,_id:t}))}))}bulkUpdate(e,t){return s(this,void 0,void 0,(function*(){return this.httpClient.client.post(`${this.namespace}/${e}/_bulk_docs`,{docs:t})}))}delete(e,t,n){return this.httpClient.client.delete(`${this.namespace}/${e}/${t}`,{params:{rev:n}})}};t.CouchdbService=l=r([(0,o.injectable)(),i("design:paramtypes",[c.HttpClient,u.TokensService])],l)},9037:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CrmCallsService=void 0;const s=n(651),o=n(3919);let a=t.CrmCallsService=class{constructor(e){this.httpClient=e,this.namespace="/crm/v1/events/call"}getCalls(){return this.httpClient.client.get(this.namespace)}getCallsWithFilters(e){return this.httpClient.client.get(this.namespace,{params:e})}createCall(e){return this.httpClient.client.post(this.namespace,e)}editCall(e,t){return this.httpClient.client.patch(`${this.namespace}/:id`,t,{urlParams:{id:e}})}getCall(e){return this.httpClient.client.get(`${this.namespace}/:id`,{urlParams:{id:e}})}deleteCall(e){return this.httpClient.client.delete(`${this.namespace}/:id`,{urlParams:{id:e}})}};t.CrmCallsService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},7317:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CrmCompaniesService=void 0;const s=n(651),o=n(3919);let a=t.CrmCompaniesService=class{constructor(e){this.httpClient=e,this.namespace="/crm/v1/entities/companies",this.entitiesNamespace="/crm/v1/entities"}getCompanies(){return this.httpClient.client.get(this.namespace,{params:{list:9999}})}createCompany(e){return this.httpClient.client.post(this.namespace,e)}updateCompany(e,t){return this.httpClient.client.patch(`${this.namespace}/:id`,t,{urlParams:{id:e}})}deleteCompany(e){return this.httpClient.client.delete(`${this.namespace}/:id`,{urlParams:{id:e}})}massCompaniesDeletion({entityIds:e,exceptIds:t,all:n,params:r}){return this.httpClient.client.delete(`${this.namespace}/mass_deletion${r}`,{data:{all:n,entity_ids:e,except_ids:t}})}massCompaniesEditing({entityIds:e,exceptIds:t,all:n,params:r,payload:i,settings:s}){return this.httpClient.client.patch(`${this.namespace}/mass_edit${r}`,{all:n,entity_ids:e,except_ids:t,payload:i,settings:s})}getCompaniesWithFilters(e,t,n,r){return this.httpClient.client.get((()=>n&&r?`${this.entitiesNamespace}/:relatedEntityType/:relatedEntityId/related/companies?${e}`:`${this.namespace}/?${e}`)(),{signal:t,urlParams:{relatedEntityType:r,relatedEntityId:n}})}getCompanyFields(){return this.httpClient.client.get(`${this.namespace}/fields`)}updateCompanyField(e){return this.httpClient.client.patch(`${this.namespace}/fields/:code`,e,{urlParams:{code:null==e?void 0:e.code}})}updateCompanyListValues(e){return this.httpClient.client.post(`${this.namespace}/lists/:code`,null==e?void 0:e.values,{urlParams:{code:null==e?void 0:e.code}})}createCompanyField(e){return this.httpClient.client.post(`${this.namespace}/fields`,e)}deleteCompanyListValues(e,t){return this.httpClient.client.delete(`${this.namespace}/lists/:code/:value`,{urlParams:{code:t,value:e}})}deleteCompanyField(e){return this.httpClient.client.delete(`${this.namespace}/fields/:code`,{urlParams:{code:e}})}};t.CrmCompaniesService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},7842:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CrmContactsService=void 0;const s=n(651),o=n(3919);let a=t.CrmContactsService=class{constructor(e){this.httpClient=e,this.namespace="/crm/v1/entities/contacts",this.entitiesNamespace="/crm/v1/entities"}getContacts(){return this.httpClient.client.get(this.namespace,{params:{list:9999}})}createContact(e){return this.httpClient.client.post(this.namespace,e)}updateContact(e,t){return this.httpClient.client.patch(`${this.namespace}/:id`,t,{urlParams:{id:e}})}deleteContact(e){return this.httpClient.client.delete(`${this.namespace}/:id`,{urlParams:{id:e}})}massContactsDeletion({entityIds:e,exceptIds:t,all:n,params:r}){return this.httpClient.client.delete(`${this.namespace}/mass_deletion${r}`,{data:{all:n,entity_ids:e,except_ids:t}})}massContactsEditing({entityIds:e,exceptIds:t,all:n,params:r,payload:i,settings:s}){return this.httpClient.client.patch(`${this.namespace}/mass_edit${r}`,{all:n,entity_ids:e,except_ids:t,payload:i,settings:s})}getContactsWithFilters(e,t,n,r){return this.httpClient.client.get((()=>n&&r?`${this.entitiesNamespace}/:relatedEntityType/:relatedEntityId/related/contacts?${e}`:`${this.namespace}?${e}`)(),{signal:t,urlParams:{relatedEntityType:r,relatedEntityId:n}})}getContactFields(){return this.httpClient.client.get(`${this.namespace}/fields`)}updateContactField(e){return this.httpClient.client.patch(`${this.namespace}/fields/:code`,e,{urlParams:{code:null==e?void 0:e.code}})}updateContactListValues(e){return this.httpClient.client.post(`${this.namespace}/lists/:code`,null==e?void 0:e.values,{urlParams:{code:null==e?void 0:e.code}})}createContactField(e){return this.httpClient.client.post(`${this.namespace}/fields`,e)}deleteContactListValues(e,t){return this.httpClient.client.delete(`${this.namespace}/lists/:code/:value`,{urlParams:{code:t,value:e}})}deleteContactField(e){return this.httpClient.client.delete(`${this.namespace}/fields/:code`,{urlParams:{code:e}})}};t.CrmContactsService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},5045:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CrmDealsFunnelsService=void 0;const s=n(651),o=n(3919);let a=t.CrmDealsFunnelsService=class{constructor(e){this.httpClient=e,this.namespace="/crm/v1/entities/deals",this.reasonsNamespace="/crm/v1/reasons"}getDealsFunnels(){return this.httpClient.client.get(`${this.namespace}/funnel`)}createDealsFunnel(e){return this.httpClient.client.post(`${this.namespace}/funnel`,e)}updateDealsFunnel(e,t){return this.httpClient.client.patch(`${this.namespace}/funnel/:id`,t,{urlParams:{id:e}})}deleteDealsFunnel(e){return this.httpClient.client.delete(`${this.namespace}/funnel/:id`,{urlParams:{id:e}})}createStageForDealsFunnel(e){return this.httpClient.client.post(`${this.namespace}/kanban/stage`,e)}updateStageForDealsFunnel(e,t){return this.httpClient.client.patch(`${this.namespace}/kanban/stage/:id`,t,{urlParams:{id:e}})}deleteStageForDealsFunnel(e){return this.httpClient.client.delete(`${this.namespace}/kanban/stage/:id`,{urlParams:{id:e}})}createReasonsForDealsFunnelStage(e){return this.httpClient.client.post(`${this.reasonsNamespace}/:funnelId`,e,{urlParams:{funnelId:e.funnelId}})}updateReasonsForDealsFunnelStage(e,t){return this.httpClient.client.patch(`${this.reasonsNamespace}/:id`,t,{urlParams:{id:e}})}deleteReasonsForDealsFunnelStage(e){return this.httpClient.client.delete(`${this.reasonsNamespace}/:id`,{urlParams:{id:e}})}getStagesForDealsFunnel(e){return this.httpClient.client.get(`${this.namespace}/kanban/stage`,{params:{funnel_id:e}})}};t.CrmDealsFunnelsService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},5887:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CrmDealsService=void 0;const s=n(651),o=n(3919);let a=t.CrmDealsService=class{constructor(e){this.httpClient=e,this.namespace="/crm/v1/entities/deals",this.entitiesNamespace="/crm/v1/entities"}getDeals(){return this.httpClient.client.get(this.namespace,{params:{list:9999}})}getDealsWithFilters(e,t,n,r){return this.httpClient.client.get((()=>n&&r?`${this.entitiesNamespace}/:relatedEntityType/:relatedEntityId/related/deals?${e}`:`${this.namespace}?${e}`)(),{signal:t,urlParams:{relatedEntityType:r,relatedEntityId:n}})}createDeal(e){return this.httpClient.client.post(this.namespace,e)}updateDeal(e,t){return this.httpClient.client.patch(`${this.namespace}/:id`,t,{urlParams:{id:e}})}deleteDeal(e){return this.httpClient.client.delete(`${this.namespace}/:id`,{urlParams:{id:e}})}massDealsDeletion({entityIds:e,exceptIds:t,all:n,params:r}){return this.httpClient.client.delete(`${this.namespace}/mass_deletion${r}`,{data:{all:n,entity_ids:e,except_ids:t}})}massDealsEditing({entityIds:e,exceptIds:t,all:n,params:r,payload:i,settings:s}){return this.httpClient.client.patch(`${this.namespace}/mass_edit${r}`,{all:n,entity_ids:e,except_ids:t,payload:i,settings:s})}getDealFields(){return this.httpClient.client.get(`${this.namespace}/fields`)}updateDealField(e){return this.httpClient.client.patch(`${this.namespace}/fields/:code`,e,{urlParams:{code:null==e?void 0:e.code}})}updateDealListValues(e){return this.httpClient.client.post(`${this.namespace}/lists/:code`,null==e?void 0:e.values,{urlParams:{code:null==e?void 0:e.code}})}createDealField(e){return this.httpClient.client.post(`${this.namespace}/fields`,e)}deleteDealListValues(e,t){return this.httpClient.client.delete(`${this.namespace}/lists/:code/:value`,{urlParams:{code:t,value:e}})}deleteDealField(e){return this.httpClient.client.delete(`${this.namespace}/fields/:code`,{urlParams:{code:e}})}moveDealFromStageToStage(e,t,n){return this.httpClient.client.post(`${this.namespace}/:entityId/move/stage/:stageId`,{reason_id:n},{urlParams:{entityId:e,stageId:t}})}};t.CrmDealsService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},8461:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CrmDealsStagesService=void 0;const s=n(651),o=n(3919);let a=t.CrmDealsStagesService=class{constructor(e){this.httpClient=e,this.namespace="/crm/v1/entities/deals",this.reasonsNamespace="/crm/v1/reasons"}getDealsStages(){return this.httpClient.client.get(`${this.namespace}/kanban/stage`)}createDealsStage(e){return this.httpClient.client.post(`${this.namespace}/kanban/stage`,e)}updateDealsStage(e,t){return this.httpClient.client.patch(`${this.namespace}/kanban/stage/:id`,t,{urlParams:{id:e}})}deleteDealsStage(e){return this.httpClient.client.delete(`${this.namespace}/kanban/stage/:id`,{urlParams:{id:e}})}getDealsReasons(e){return this.httpClient.client.get(`${this.reasonsNamespace}/:dealsId`,{urlParams:{dealsId:e}})}createDealsStageReasons(e,t){return this.httpClient.client.post(`${this.reasonsNamespace}/:dealsId`,t,{urlParams:{dealsId:e}})}updateDealsReason(e,t){return this.httpClient.client.patch(`${this.reasonsNamespace}/:id`,t,{urlParams:{id:e}})}deleteDealsReason(e){return this.httpClient.client.delete(`${this.reasonsNamespace}/:id`,{urlParams:{id:e}})}};t.CrmDealsStagesService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},2915:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CrmDocumentTemplatesService=void 0;const s=n(651),o=n(3919);let a=t.CrmDocumentTemplatesService=class{constructor(e){this.httpClient=e,this.namespace="/crm/v1/documents/templates"}getDocumentTemplates(e,t){return this.httpClient.client.get(this.namespace,{signal:t,params:e})}getDocumentTemplatesFields(e,t){return this.httpClient.client.get(`${this.namespace}/fields`,{signal:t,params:e})}createTemplate(e){return this.httpClient.client.post(this.namespace,e)}updateTemplate(e,t){return this.httpClient.client.patch(`${this.namespace}/:id`,t,{urlParams:{id:e}})}deleteTemplate(e){return this.httpClient.client.delete(`${this.namespace}/:id`,{urlParams:{id:e}})}deleteArrayTemplates(e){return this.httpClient.client.delete(`${this.namespace}`,{params:{ids:e}})}};t.CrmDocumentTemplatesService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},9846:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CrmEntitiesService=void 0;const s=n(651),o=n(3919);let a=t.CrmEntitiesService=class{constructor(e){this.httpClient=e,this.namespace="/crm/v1/entities",this.entityNamespace="/crm/v1/entity",this.reasonsNamespace="/crm/v1/reasons"}getEntities(){return this.httpClient.client.get(this.entityNamespace)}getEntitiesWithFunnels(){return this.httpClient.client.get(this.entityNamespace,{params:{"with-funnels":!0}})}createEntity(e){return this.httpClient.client.post(this.entityNamespace,e)}deleteEntity(e){return this.httpClient.client.delete(`${this.entityNamespace}/:id`,{urlParams:{id:e}})}updateEntity(e,t){return this.httpClient.client.patch(`${this.entityNamespace}/:id`,t,{urlParams:{id:e}})}getEntityFunnel(e){return this.httpClient.client.get(`${this.namespace}/:code/funnel`,{urlParams:{code:e}})}getEntityFields(e){return this.httpClient.client.get(`${this.namespace}/:code/fields`,{urlParams:{code:e}})}updateEntityField(e,t,n){return this.httpClient.client.patch(`${this.namespace}/:code/fields/:fieldCode`,n,{urlParams:{code:e,fieldCode:t}})}updateEntityListValues(e,t,n){return this.httpClient.client.post(`${this.namespace}/:code/lists/:fieldCode`,n,{urlParams:{code:e,fieldCode:t}})}createEntityField(e,t){return this.httpClient.client.post(`${this.namespace}/:code/fields`,t,{urlParams:{code:e}})}deleteEntityListValues(e,t,n){return this.httpClient.client.delete(`${this.namespace}/:code/lists/:fieldCode/:value`,{urlParams:{code:e,fieldCode:t,value:n}})}deleteEntityField(e,t){return this.httpClient.client.delete(`${this.namespace}/:code/fields/:fieldCode`,{urlParams:{code:e,fieldCode:t}})}createEntityFunnel(e,t){return this.httpClient.client.post(`${this.namespace}/:code/funnel`,t,{urlParams:{code:e}})}updateEntityFunnel(e,t,n){return this.httpClient.client.patch(`${this.namespace}/:code/funnel/:funnelId`,n,{urlParams:{code:e,funnelId:t}})}deleteEntityFunnel(e,t){return this.httpClient.client.delete(`${this.namespace}/:code/funnel/:funnelId`,{urlParams:{code:e,funnelId:t}})}createEntityStage(e,t){return this.httpClient.client.post(`${this.namespace}/:code/kanban/stage`,t,{urlParams:{code:e}})}updateEntityStage(e,t,n){return this.httpClient.client.patch(`${this.namespace}/:code/kanban/stage/:stageId`,n,{urlParams:{code:e,stageId:t}})}deleteEntityStage(e,t){return this.httpClient.client.delete(`${this.namespace}/:code/kanban/stage/:stageId`,{urlParams:{code:e,stageId:t}})}getEntityStages(e,t){return this.httpClient.client.get(`${this.namespace}/:code/kanban/stage`,{urlParams:{code:e,funnelId:t},params:{funnel_id:t}})}createEntityReason(e,t){return this.httpClient.client.post(`${this.reasonsNamespace}/:funnelId`,t,{urlParams:{funnelId:e}})}updateEntityReason(e,t){return this.httpClient.client.patch(`${this.reasonsNamespace}/:reasonId`,t,{urlParams:{reasonId:e}})}deleteEntityReason(e){return this.httpClient.client.delete(`${this.reasonsNamespace}/:reasonId`,{urlParams:{reasonId:e}})}getEntityReasons(e){return this.httpClient.client.get(`${this.reasonsNamespace}/:entityId`,{urlParams:{entityId:e}})}getEntityItems(e){return this.httpClient.client.get(`${this.namespace}/:code`,{urlParams:{code:e},params:{list:20}})}getEntityItem(e,t){return this.httpClient.client.get(`${this.namespace}/:code/:id`,{urlParams:{code:e,id:t}})}getEntityItemsWithFilters(e,t,n,r,i){return this.httpClient.client.get((()=>r&&i?`${this.namespace}/:relatedEntityType/:relatedEntityId/related/:code/`:`${this.namespace}/:code/`)(),{signal:n,params:t,urlParams:{relatedEntityType:i,relatedEntityId:r,code:e}})}createEntityItem(e,t){return this.httpClient.client.post(`${this.namespace}/:code`,t,{urlParams:{code:e}})}updateEntityItem(e,t,n){return this.httpClient.client.patch(`${this.namespace}/:code/:id`,n,{urlParams:{code:e,id:t}})}deleteEntityItem(e,t){return this.httpClient.client.delete(`${this.namespace}/:code/:id`,{urlParams:{code:e,id:t}})}massEntityItemsDeletion(e,{entityIds:t,exceptIds:n,all:r,params:i}){const s={all:r,entity_ids:t,except_ids:n},o="string"==typeof i?`/?${i}`:"";return this.httpClient.client.delete(`${this.namespace}/:code/mass_deletion${o}`,{data:s,urlParams:{code:e},params:"object"==typeof i?i:void 0})}massEntityItemsEditing(e,{entityIds:t,exceptIds:n,all:r,params:i,payload:s,settings:o}){const a={all:r,entity_ids:t,except_ids:n,payload:s,settings:o},c="string"==typeof i?`/?${i}`:"";return this.httpClient.client.patch(`${this.namespace}/:code/mass_edit${c}`,a,{urlParams:{code:e},params:"object"==typeof i?i:void 0})}moveEntityItemFromStageToStage(e,t,n,r){return this.httpClient.client.post(`${this.namespace}/:code/:entityId/move/stage/:stageId`,{reason_id:r},{urlParams:{entityId:t,stageId:n,code:e}})}createEntityItemFromKanban(e,t){return this.httpClient.client.post(`${this.namespace}/:code`,t,{urlParams:{code:e}})}getEntityItemsByStage(e,t,n){return this.httpClient.client.get(`${this.namespace}/:code/kanban/stage/:stageId`,{params:t,urlParams:{code:e,stageId:n}})}createOrUpdateDependencies(e,t){return this.httpClient.client.post(`${this.namespace}/:code/lists/dependencies`,e,{urlParams:{code:t}})}getDependenciesLists(e){return this.httpClient.client.get(`${this.namespace}/:code/lists/dependencies`,{urlParams:{code:e}})}deleteDependenciesLists(e,t){return this.httpClient.client.delete(`${this.namespace}/:code/lists/dependencies/:id`,{urlParams:{code:e,id:t}})}};t.CrmEntitiesService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},7895:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CrmLeadsFunnelsService=void 0;const s=n(651),o=n(3919);let a=t.CrmLeadsFunnelsService=class{constructor(e){this.httpClient=e,this.namespace="/crm/v1/entities/leads",this.reasonsNamespace="/crm/v1/reasons"}getLeadsFunnels(){return this.httpClient.client.get(`${this.namespace}/funnel`)}createLeadsFunnel(e){return this.httpClient.client.post(`${this.namespace}/funnel`,e)}updateLeadsFunnel(e,t){return this.httpClient.client.patch(`${this.namespace}/funnel/:id`,t,{urlParams:{id:e}})}deleteLeadsFunnel(e){return this.httpClient.client.delete(`${this.namespace}/funnel/:id`,{urlParams:{id:e}})}createStageForLeadsFunnel(e){return this.httpClient.client.post(`${this.namespace}/kanban/stage`,e)}updateStageForLeadsFunnel(e,t){return this.httpClient.client.patch(`${this.namespace}/kanban/stage/:id`,t,{urlParams:{id:e}})}deleteStageForLeadsFunnel(e){return this.httpClient.client.delete(`${this.namespace}/kanban/stage/:id`,{urlParams:{id:e}})}createReasonsForLeadsFunnelStage(e){return this.httpClient.client.post(`${this.reasonsNamespace}/:funnelId`,e,{urlParams:{funnelId:e.funnelId}})}updateReasonsForLeadsFunnelStage(e,t){return this.httpClient.client.patch(`${this.reasonsNamespace}/:id`,t,{urlParams:{id:e}})}deleteReasonsForLeadsFunnelStage(e){return this.httpClient.client.delete(`${this.reasonsNamespace}/:id`,{urlParams:{id:e}})}};t.CrmLeadsFunnelsService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},7580:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CrmLeadsService=void 0;const s=n(651),o=n(3919);let a=t.CrmLeadsService=class{constructor(e){this.httpClient=e,this.namespace="/crm/v1/entities/leads",this.entitiesNamespace="/crm/v1/entities"}getLeadsWithFilters(e,t,n,r){return this.httpClient.client.get((()=>n&&r?`${this.entitiesNamespace}/:relatedEntityType/:relatedEntityId/related/leads?${e}`:`${this.namespace}?${e}`)(),{signal:t,urlParams:{relatedEntityType:r,relatedEntityId:n}})}getLeadsByStage(e){return this.httpClient.client.get(`${this.namespace}/kanban/stage/:stageId`,{urlParams:{stageId:e},params:{list:9999}})}createLead(e){return this.httpClient.client.post(this.namespace,e)}updateLead(e,t){return this.httpClient.client.patch(`${this.namespace}/:id`,t,{urlParams:{id:e}})}deleteLead(e){return this.httpClient.client.delete(`${this.namespace}/:id`,{urlParams:{id:e}})}massLeadsDeletion({entityIds:e,exceptIds:t,all:n,params:r}){return this.httpClient.client.delete(`${this.namespace}/mass_deletion${r}`,{data:{all:n,entity_ids:e,except_ids:t}})}massLeadsEditing({entityIds:e,exceptIds:t,all:n,params:r,payload:i,settings:s}){return this.httpClient.client.patch(`${this.namespace}/mass_edit${r}`,{all:n,entity_ids:e,except_ids:t,payload:i,settings:s})}getLeadFields(){return this.httpClient.client.get(`${this.namespace}/fields`)}updateLeadField(e){return this.httpClient.client.patch(`${this.namespace}/fields/:code`,e,{urlParams:{code:null==e?void 0:e.code}})}updateLeadListValues(e){return this.httpClient.client.post(`${this.namespace}/lists/:code`,null==e?void 0:e.values,{urlParams:{code:null==e?void 0:e.code}})}createLeadField(e){return this.httpClient.client.post(`${this.namespace}/fields`,e)}deleteLeadListValues(e,t){return this.httpClient.client.delete(`${this.namespace}/lists/:code/:value`,{urlParams:{code:t,value:e}})}deleteLeadField(e){return this.httpClient.client.delete(`${this.namespace}/fields/:code`,{urlParams:{code:e}})}moveLeadFromStageToStage(e,t,n){return this.httpClient.client.post(`${this.namespace}/:entityId/move/stage/:stageId`,{reason_id:n},{urlParams:{entityId:e,stageId:t}})}};t.CrmLeadsService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},5680:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CrmLeadsStagesService=void 0;const s=n(651),o=n(3919);let a=t.CrmLeadsStagesService=class{constructor(e){this.httpClient=e,this.namespace="/crm/v1/entities/leads",this.reasonsNamespace="/crm/v1/reasons"}getLeadsStages(){return this.httpClient.client.get(`${this.namespace}/kanban/stage`)}createLeadsStage(e){return this.httpClient.client.post(`${this.namespace}/kanban/stage`,e)}updateLeadsStage(e,t){return this.httpClient.client.patch(`${this.namespace}/kanban/stage/:id`,t,{urlParams:{id:e}})}deleteLeadsStage(e){return this.httpClient.client.delete(`${this.namespace}/kanban/stage/:id`,{urlParams:{id:e}})}getLeadsReasons(e){return this.httpClient.client.get(`${this.reasonsNamespace}/:leadsId`,{urlParams:{leadsId:e}})}createLeadsStageReasons(e,t){return this.httpClient.client.post(`${this.reasonsNamespace}/:leadsId`,t,{urlParams:{leadsId:e}})}updateLeadsReason(e,t){return this.httpClient.client.patch(`${this.reasonsNamespace}/:id`,t,{urlParams:{id:e}})}deleteLeadsReason(e){return this.httpClient.client.delete(`${this.reasonsNamespace}/:id`,{urlParams:{id:e}})}};t.CrmLeadsStagesService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},406:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CrmProductsCategoryService=void 0;const s=n(651),o=n(3919);let a=t.CrmProductsCategoryService=class{constructor(e){this.httpClient=e,this.namespace="/crm/v1/static/product-categories"}getProductCategories(){return this.httpClient.client.get(this.namespace)}createProductCategory(e){return this.httpClient.client.post(this.namespace,e)}updateProductCategory(e,t){return this.httpClient.client.patch(`${this.namespace}/:id`,t,{urlParams:{id:e}})}deleteProductCategory(e){return this.httpClient.client.delete(`${this.namespace}/:id`,{urlParams:{id:e}})}};t.CrmProductsCategoryService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},8854:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CrmProductsForEntityService=void 0;const s=n(651),o=n(3919);let a=t.CrmProductsForEntityService=class{constructor(e){this.httpClient=e,this.infoNamespace="/crm/v1/static/entity-product-lists",this.namespace="/crm/v1/static/list-products"}getInfoProductsForEntity(e,t){return this.httpClient.client.get(this.infoNamespace,{params:{entity_type:e,entity_id:t}})}updateInfoProductForEntity(e,t){return this.httpClient.client.patch(`${this.infoNamespace}/:id`,t,{urlParams:{id:e}})}getProductsForEntity(){return this.httpClient.client.get(this.namespace)}getProductForEntity(e){return this.httpClient.client.get(`${this.namespace}/:id`,{urlParams:{id:e}})}createProductForEntity(e){return this.httpClient.client.post(this.namespace,e)}updateProductForEntity(e,t){return this.httpClient.client.patch(`${this.namespace}/:id`,t,{urlParams:{id:e}})}updateProductsForEntity(e){return this.httpClient.client.patch(`${this.namespace}/bulk`,{list_products:e})}deleteProductForEntity(e){return this.httpClient.client.delete(`${this.namespace}/:id`,{urlParams:{id:e}})}deleteProductsForEntity(e){return this.httpClient.client.delete(`${this.namespace}/bulk`,{params:{list_products:e}})}};t.CrmProductsForEntityService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},9042:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CrmProductsService=void 0;const s=n(651),o=n(3919);let a=t.CrmProductsService=class{constructor(e){this.httpClient=e,this.namespace="/crm/v1/static/products",this.dynamicNamespace="/crm/v1/entities/products"}getProducts(){return this.httpClient.client.get(this.namespace)}getProductsWithFilters(e,t){return this.httpClient.client.get(this.namespace,{signal:t,params:e})}createProduct(e){return this.httpClient.client.post(this.namespace,e)}updateProduct(e,t){return this.httpClient.client.patch(`${this.namespace}/:id`,t,{urlParams:{id:e}})}deleteProduct(e){return this.httpClient.client.delete(`${this.namespace}/:id`,{urlParams:{id:e}})}massProductsDeletion({entityIds:e,exceptIds:t,all:n,params:r}){const i="string"==typeof r?`/?${r}`:"";return this.httpClient.client.delete(`${this.namespace}/mass_deletion${i}`,{data:{all:n,entity_ids:e,except_ids:t}})}massProductsEditing({entityIds:e,exceptIds:t,all:n,params:r,payload:i,settings:s}){return this.httpClient.client.patch(`${this.namespace}/mass_edit${r}`,{all:n,entity_ids:e,except_ids:t,payload:i,settings:s})}getProductFields(){return this.httpClient.client.get(`${this.dynamicNamespace}/fields`)}updateProductField(e){return this.httpClient.client.patch(`${this.dynamicNamespace}/fields/:code`,e,{urlParams:{code:null==e?void 0:e.code}})}updateProductListValues(e){return this.httpClient.client.post(`${this.dynamicNamespace}/lists/:code`,null==e?void 0:e.values,{urlParams:{code:null==e?void 0:e.code}})}createProductField(e){return this.httpClient.client.post(`${this.dynamicNamespace}/fields`,e)}deleteProductListValues(e,t){return this.httpClient.client.delete(`${this.dynamicNamespace}/lists/:code/:value`,{urlParams:{code:t,value:e}})}deleteProductField(e){return this.httpClient.client.delete(`${this.dynamicNamespace}/fields/:code`,{urlParams:{code:e}})}};t.CrmProductsService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},5886:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CrmProductsTaxesService=void 0;const s=n(651),o=n(3919);let a=t.CrmProductsTaxesService=class{constructor(e){this.httpClient=e,this.namespace="/crm/v1/static/taxes"}getProductTaxes(){return this.httpClient.client.get(this.namespace)}createProductTax(e){return this.httpClient.client.post(this.namespace,e)}updateProductTax(e,t){return this.httpClient.client.patch(`${this.namespace}/:id`,t,{urlParams:{id:e}})}deleteProductTax(e){return this.httpClient.client.delete(`${this.namespace}/:id`,{urlParams:{id:e}})}};t.CrmProductsTaxesService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},8129:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CrmProductsUnitService=void 0;const s=n(651),o=n(3919);let a=t.CrmProductsUnitService=class{constructor(e){this.httpClient=e,this.namespace="/crm/v1/static/measurement-units"}getProductUnits(){return this.httpClient.client.get(this.namespace)}createProductUnit(e){return this.httpClient.client.post(this.namespace,e)}updateProductUnit(e,t){return this.httpClient.client.patch(`${this.namespace}/:id`,t,{urlParams:{id:e}})}deleteProductUnit(e){return this.httpClient.client.delete(`${this.namespace}/:id`,{urlParams:{id:e}})}};t.CrmProductsUnitService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},6735:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CrmRequisitesService=void 0;const s=n(651),o=n(3919);let a=t.CrmRequisitesService=class{constructor(e){this.httpClient=e,this.namespace="/crm/v1/requisites"}getTemplates(e){return this.httpClient.client.get(`${this.namespace}/templates`,{params:e})}getCardRequisites(e){return this.httpClient.client.get(`${this.namespace}`,{params:e})}createCardRequisites(e,t){return this.httpClient.client.post(`${this.namespace}`,e,{params:t})}updateCardRequisites(e,t){return this.httpClient.client.patch(`${this.namespace}/:id`,t,{urlParams:{id:e}})}attachCardRequisites(e){return this.httpClient.client.post(`${this.namespace}/references/attach-reference`,void 0,{params:e})}deleteCardRequisites(e){return this.httpClient.client.delete(`${this.namespace}/:id`,{urlParams:{id:e}})}createBankRequisites(e,t){return this.httpClient.client.post(`${this.namespace}/:requisiteId/bank_requisites`,t,{urlParams:{requisiteId:e}})}updateBankRequisites(e,t,n){return this.httpClient.client.patch(`${this.namespace}/:requisiteId/bank_requisites/:bankRequisiteId`,n,{urlParams:{requisiteId:e,bankRequisiteId:t}})}deleteBankRequisites(e,t){return this.httpClient.client.delete(`${this.namespace}/:requisiteId/bank_requisites/:bankRequisiteId`,{urlParams:{requisiteId:e,bankRequisiteId:t}})}attachBankRequisites(e,t){return this.httpClient.client.post(`${this.namespace}/:requisiteId/bank_requisites/references/attach-reference`,void 0,{urlParams:{requisiteId:e},params:t})}};t.CrmRequisitesService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},7478:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CrmTasksService=void 0;const s=n(651),o=n(3919);let a=t.CrmTasksService=class{constructor(e){this.httpClient=e,this.namespace="/activities/v1/activities",this.calendarsNamespace="/activities/v1/calendars",this.oauthIntegrationsNamespace="/activities/v1/integrations"}getTasks(){return this.httpClient.client.get(this.namespace,{params:{list:100}})}createTask(e){return this.httpClient.client.post(this.namespace,e)}getTasksWithFilters(e,t){const n="string"==typeof e?`/?${e}`:"";return this.httpClient.client.get(`${this.namespace}${n}`,{signal:t,params:"object"==typeof e?e:void 0})}updateTask(e,t){return this.httpClient.client.patch(`${this.namespace}/:id`,t,{urlParams:{id:e}})}getTask(e){return this.httpClient.client.get(`${this.namespace}/:id`,{urlParams:{id:e}})}deleteTask(e){return this.httpClient.client.delete(`${this.namespace}/:id`,{urlParams:{id:e}})}massTasksDeletion({entityIds:e,exceptIds:t,all:n,params:r}){const i={all:n,entity_ids:e,except_ids:t},s="string"==typeof r?`/?${r}`:"";return this.httpClient.client.delete(`${this.namespace}/mass_deletion${s}`,{data:i,params:"object"==typeof r?r:void 0})}massTasksEditing({entityIds:e,exceptIds:t,all:n,params:r,payload:i,settings:s}){const o={all:n,entity_ids:e,except_ids:t,payload:i,settings:s},a="string"==typeof r?`/?${r}`:"";return this.httpClient.client.patch(`${this.namespace}/mass_edit${a}`,o)}getOAuthRedirectUrl(e,t){return this.httpClient.client.get(`${this.oauthIntegrationsNamespace}/${e}/${t}/oauth/redirect`)}getOauthServicesAccounts(e){return this.httpClient.client.get(`${this.oauthIntegrationsNamespace}/accounts`,Object.assign({},e&&{params:e}))}getCalendars(){return this.httpClient.client.get(`${this.oauthIntegrationsNamespace}/calendars/google/calendar_list`)}saveCalendarsSettings(e){return this.httpClient.client.post(`${this.oauthIntegrationsNamespace}/calendars/google/save`,e)}startInitialServicesAccountSync(e){return this.httpClient.client.post(`${this.oauthIntegrationsNamespace}/calendars/google/initial_sync`,e)}startServicesAccountSync(){return this.httpClient.client.get(`${this.oauthIntegrationsNamespace}/calendars/sync`)}stopServicesAccountSync(){return this.httpClient.client.patch(`${this.oauthIntegrationsNamespace}/calendars/google/stop_sync`)}activateServicesAccountSync(e){return this.httpClient.client.patch(`${this.oauthIntegrationsNamespace}/calendars/google/activate_sync/:id`,void 0,{urlParams:{id:e}})}deleteServicesAccount(e,t){return this.httpClient.client.delete(`${this.oauthIntegrationsNamespace}/accounts/${e}/integrations/${t}`)}};t.CrmTasksService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},6851:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DepartmentsService=void 0;const s=n(651),o=n(3919);let a=t.DepartmentsService=class{constructor(e){this.httpClient=e,this.namespace="/company/v1/departments"}getDepartments(e,t,n){return this.httpClient.client.get(this.namespace,{params:{page:e,list:t,show:n}})}createDepartment(e){return this.httpClient.client.post(this.namespace,e)}getDepartmentById(e){return this.httpClient.client.get(`${this.namespace}/:id/`,{urlParams:{id:e}})}updateDepartment(e,t){return this.httpClient.client.patch(`${this.namespace}/:id/`,t,{urlParams:{id:e}})}deleteDepartment(e){return this.httpClient.client.delete(`${this.namespace}/:id/`,{urlParams:{id:e}})}updateDepartmentRolesById(e,t){return this.httpClient.client.patch(`${this.namespace}/:id/updateRoles/`,t,{urlParams:{id:e}})}addUsersToDepartment(e,t){return this.httpClient.client.patch(`${this.namespace}/:id/addUsers/`,t,{urlParams:{id:e}})}deleteUsersFromDepartment(e,t){return this.httpClient.client.patch(`${this.namespace}/:id/deleteUsers/`,t,{urlParams:{id:e}})}};t.DepartmentsService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},1688:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.EmailService=void 0;const s=n(651),o=n(3919);let a=t.EmailService=class{constructor(e){this.httpClient=e,this.namespace="/email/v1"}getEmailsBoxes(){return this.httpClient.client.get(`${this.namespace}/emails/`)}getEmailBox(e){return this.httpClient.client.get(`${this.namespace}/emails/:id`,{urlParams:{id:e}})}connectEmailBox(e){return this.httpClient.client.post(`${this.namespace}/emails/credentials`,e)}setupEmailBox(e,t){return this.httpClient.client.post(`${this.namespace}/emails/settings/:id`,t,{urlParams:{id:e}})}updateEmailBoxCredentials(e,t){return this.httpClient.client.patch(`${this.namespace}/emails/credentials/:id`,t,{urlParams:{id:e}})}updateEmailBox(e,t){return this.httpClient.client.patch(`${this.namespace}/emails/settings/:id`,t,{urlParams:{id:e}})}removeEmailBox(e){return this.httpClient.client.delete(`${this.namespace}/emails/:id`,{urlParams:{id:e}})}getEmailFolders(){return this.httpClient.client.get(`${this.namespace}/folders/`)}getEmailLetters(e,t,n){return this.httpClient.client.get(`${this.namespace}/letters/by_folder/:id`,{urlParams:{id:e},params:t,signal:n})}getEmailLetter(e){return this.httpClient.client.get(`${this.namespace}/letters/:id`,{urlParams:{id:e}})}createEmailLetter(e,t){return this.httpClient.client.post(`${this.namespace}/letters/by_folder/:id`,e,{urlParams:{id:t}})}resendEmailLetter(e){return this.httpClient.client.patch(`${this.namespace}/letters/:id/resend`,void 0,{urlParams:{id:e}})}removeEmailLetter(e){return this.httpClient.client.delete(`${this.namespace}/letters/:id`,{urlParams:{id:e}})}removeEmailLetters(e,t){var n;return this.httpClient.client.delete(`${this.namespace}/letters/`,{data:Object.assign({ids:e},(null===(n=null==t?void 0:t.filter)||void 0===n?void 0:n.length)>0&&{threads:t})})}readEmailLetters(e,t,n){var r;return this.httpClient.client.patch(`${this.namespace}/letters/read/:folderId`,Object.assign(Object.assign({},(null==e?void 0:e.length)>0&&{ids:e}),(null===(r=null==n?void 0:n.filter)||void 0===r?void 0:r.length)>0&&{threads:n}),{urlParams:{folderId:t}})}unreadEmailLetters(e,t,n){var r;return this.httpClient.client.patch(`${this.namespace}/letters/unread/:folderId`,Object.assign(Object.assign({},(null==e?void 0:e.length)>0&&{ids:e}),(null===(r=null==n?void 0:n.filter)||void 0===r?void 0:r.length)>0&&{threads:n}),{urlParams:{folderId:t}})}moveLetters(e,t,n){var r;return this.httpClient.client.patch(`${this.namespace}/letters/move/:folderId`,Object.assign(Object.assign({},(null==e?void 0:e.length)>0&&{ids:e}),(null===(r=null==n?void 0:n.filter)||void 0===r?void 0:r.length)>0&&{threads:n}),{urlParams:{folderId:t}})}getIntgrWithCrmSettings(e){return this.httpClient.client.get(`${this.namespace}/emails/crm_settings/:id`,{urlParams:{id:e}})}patchLetterCrmEntities(e,t){return this.httpClient.client.patch(`${this.namespace}/letters/:id`,{crm_entities:t},{urlParams:{id:e}})}redirectToOauthLink(e,t){return this.httpClient.client.get(`${this.namespace}/oauth/${t}/redirect`,{params:{state:e}})}receiveToOauthLink(e,t){return this.httpClient.client.post(`${this.namespace}/oauth/${t}/receive`,{code:e})}getEmailSignatures(){return this.httpClient.client.get(`${this.namespace}/signatures/`)}createEmailSignature(e){return this.httpClient.client.post(`${this.namespace}/signatures/`,e)}updateEmailSignature(e,t){return this.httpClient.client.patch(`${this.namespace}/signatures/:id`,t,{urlParams:{id:e}})}removeEmailSignature(e){return this.httpClient.client.delete(`${this.namespace}/signatures/:id`,{urlParams:{id:e}})}};t.EmailService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},588:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.FilesService=void 0;const s=n(651),o=n(3919);let a=t.FilesService=class{constructor(e){this.httpClient=e,this.namespace="/files/v1"}getFiles(e,t){return this.httpClient.client.get(`${this.namespace}/files/`,{params:{entityId:e,entityType:t}})}getFilesSize(){return this.httpClient.client.get(`${this.namespace}/totals/size/`)}};t.FilesService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},3943:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.GroupsService=void 0;const s=n(651),o=n(3919);let a=t.GroupsService=class{constructor(e){this.httpClient=e,this.namespace="/groups/v1/groups",this.namespacev1="/groups/v1"}getGroup(e){return this.httpClient.client.get(`${this.namespace}/:id/`,{urlParams:{id:e}})}getGroupForTask(e){return this.httpClient.client.get(`${this.namespace}/:id/`,{urlParams:{id:e}})}getGroups(e,t,n,r){return this.httpClient.client.get(`${this.namespace}`,{params:{page:e,list:t,userId:n,q:r}})}createGroup(e){const t=new FormData;return t.append("name",e.name?e.name:""),t.append("groupType",e.groupType?e.groupType:""),t.append("description",e.description?e.description:""),t.append("groupTheme",e.groupTheme?e.groupTheme:""),t.append("ownerId",e.ownerId?e.ownerId:""),t.append("logo",e.logo?e.logo:""),t.append("enableColorTheme",e.enableColorTheme?"1":"0"),t.append("themeSettings[bgColor]",e.themeSettings.bgColor),t.append("themeSettings[icon]",e.themeSettings.icon),t.append("themeSettings[iconColor]",e.themeSettings.iconColor),t.append("themeSettings[enablePattern]",e.themeSettings.enablePattern?"1":"0"),e.moderatorsIds.length>0&&e.moderatorsIds.map((e=>{t.append("moderatorsIds[]",e)})),e.usersIds.length>0&&e.usersIds.map((e=>{t.append("usersIds[]",e)})),this.httpClient.client.post(`${this.namespace}`,t)}editGroup(e){const t=e.groupId;return this.httpClient.client.patch(`${this.namespace}/:id/`,e,{urlParams:{id:t}})}deleteGroup(e){return this.httpClient.client.delete(`${this.namespace}/:id/`,{urlParams:{id:e}})}inviteUsersInGroup(e){return this.httpClient.client.post(`${this.namespacev1}/invites/`,e)}leaveGroup(e){return this.httpClient.client.patch(`${this.namespace}/:id/leaveGroup`,e,{urlParams:{id:e}})}joinGroup(e){return this.httpClient.client.patch(`${this.namespace}/:id/joinGroup`,e,{urlParams:{id:e}})}getUsersRequestedForJoing(e){return this.httpClient.client.get(`${this.namespacev1}/join/:id`,{urlParams:{id:e}})}acceptUserInviteRequest(e,t){return this.httpClient.client.patch(`${this.namespace}/:id/attachUser/${t}`,{},{urlParams:{id:e,userId:t}})}rejectUserInviteRequest(e,t){return this.httpClient.client.delete(`${this.namespacev1}/join/:id/request/${t}`,{urlParams:{id:e,userId:t}})}uploadLogo(e,t){const n=new FormData;return n.append("logo",t||""),this.httpClient.client.post(`${this.namespace}/:id/upload_logo`,n,{urlParams:{id:e}})}userApplyToJoinGroup(e){return this.httpClient.client.post(`${this.namespacev1}/join/:id/request/`,{},{urlParams:{id:e}})}checkIfUserSendJoinRequest(e,t){return this.httpClient.client.get(`${this.namespacev1}/join/:groupId/request/:userId`,{urlParams:{groupId:e,userId:t}})}};t.GroupsService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},5410:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.HistoryService=void 0;const s=n(651),o=n(3919);let a=t.HistoryService=class{constructor(e){this.httpClient=e,this.namespace="/history/v1"}getChangesHistory({service:e,entityTableName:t,id:n,page:r,list:i,action:s}){return this.httpClient.client.get(`${this.namespace}/${e}/${t}/${n}`,{params:{page:r,list:i,action:s}})}};t.HistoryService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},2942:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.InvatesService=void 0;const s=n(651),o=n(3919);let a=t.InvatesService=class{constructor(e){this.httpClient=e,this.namespace="/company/v1"}checkInvateByEmail(e){return this.httpClient.client.get(`${this.namespace}/users/check_invite`,{urlParams:{email:e}})}createInvates(e){return this.httpClient.client.post(`${this.namespace}/invites/email`,e)}createInvatesBatch(e){return this.httpClient.client.post(`${this.namespace}/invites/email/batch`,e)}resendInvateByUserId(e){return this.httpClient.client.patch(`${this.namespace}/invites/email/:userId/repeat_invitation`,{},{urlParams:{userId:e}})}deleteInvateByUserId(e){return this.httpClient.client.delete(`${this.namespace}/invites/email/:userId`,{urlParams:{userId:e}})}};t.InvatesService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},8161:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MessengerService=void 0;const o=n(651),a=n(3919);let c=t.MessengerService=class{constructor(e){this.httpClient=e,this.namespace="/messenger/v1"}getChats({type:e}){return s(this,void 0,void 0,(function*(){return this.httpClient.client.get(`${this.namespace}/chats`,{params:{type:e}})}))}getMessages({chatId:e,limit:t,lastTimestamp:n,firstTimestamp:r,unreadFirst:i}){return s(this,void 0,void 0,(function*(){return this.httpClient.client.get(`${this.namespace}/messages/`,{params:{chatId:e,limit:t,lastTimestamp:n,firstTimestamp:r,unreadFirst:i}})}))}goToMessage({id:e}){return s(this,void 0,void 0,(function*(){return this.httpClient.client.get(`${this.namespace}/messages/${e}/goToMessage/`)}))}getPinnedMessages(e){return s(this,void 0,void 0,(function*(){return this.httpClient.client.get(`${this.namespace}/messages/getPinnedMessages/`,{params:{chatId:e}})}))}readAllMessages(e){return s(this,void 0,void 0,(function*(){return this.httpClient.client.post(`${this.namespace}/messages/readAll/`,{chatId:e})}))}createWidget(e){return this.httpClient.client.post(`${this.namespace}/widgets`,e)}getWidgets(e,t){return this.httpClient.client.get(`${this.namespace}/widgets`,{params:{limit:e,page:t}})}deleteWidgets(e){return this.httpClient.client.delete(`${this.namespace}/widgets/${e}`)}updateWidget(e){return this.httpClient.client.patch(`${this.namespace}/widgets/${e.id}`,e)}};t.MessengerService=c=r([(0,o.injectable)(),i("design:paramtypes",[a.HttpClient])],c)},9991:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MigrationsService=void 0;const o=n(651),a=n(4096),c=n(3919),u=n(7430);let l=t.MigrationsService=class{getRefreshToken(){return this.storageService.getItem("refreshToken")}constructor(e,t){this.httpClient=e,this.configService=t,this.importNamespace="/import",this.calculateNamespace="/calculate",this.storageService=new u.StorageService("tokens",t)}getBitrix24Entities(e){return s(this,void 0,void 0,(function*(){const t=yield this.getRefreshToken();return this.httpClient.client.post(`${this.calculateNamespace}/bitrix24`,{BitrixWebhook:e},{headers:{"X-Refresh":t||""}})}))}importBitrix24Entities(e,t){return s(this,void 0,void 0,(function*(){const n=yield this.getRefreshToken();return this.httpClient.client.post(`${this.importNamespace}/bitrix24`,{BitrixWebhook:e,BitrixEntities:t},{headers:{"X-Refresh":n||""}})}))}getAmoEntites(e){return s(this,void 0,void 0,(function*(){const t=yield this.getRefreshToken();return this.httpClient.client.post(`${this.calculateNamespace}/amo?system=${e}`,{headers:{"X-Refresh":t||""}})}))}importAmoEntities(e,t){return s(this,void 0,void 0,(function*(){const n=yield this.getRefreshToken();return this.httpClient.client.post(`${this.importNamespace}/amo?system=${e}`,{AmoEntities:t},{headers:{"X-Refresh":n||""}})}))}getMigrationEntities(e,t){return s(this,void 0,void 0,(function*(){return this.httpClient.client.post(`${this.calculateNamespace}/${t}`,{ApiKey:e})}))}importMigrationEntities(e,t,n,r){return s(this,void 0,void 0,(function*(){const i="monday"===n?r:{Entities:t,ApiKey:e};return this.httpClient.client.post(`${this.importNamespace}/${n}`,i)}))}getDataPresence(){return this.httpClient.client.post("/dataPresence/zoho")}getAllSystemsStatus(){return this.httpClient.client.get(`${this.importNamespace}/progress`,{headers:{"Content-Type":"application/json"}})}getSystemProgress(e){return this.httpClient.client.get(`${this.importNamespace}/progress`,{headers:{"Content-Type":"application/json"},params:{system:e}})}getMondayProgress(e){return this.httpClient.client.get(`/progress/${e}`,{headers:{"Content-Type":"application/json"}})}stopImport(e){return this.httpClient.client.get(`${this.importNamespace}/stop`,{headers:{"Content-Type":"application/json"},params:{system:e}})}};t.MigrationsService=l=r([(0,o.injectable)(),i("design:paramtypes",[c.HttpClient,a.ConfigService])],l)},2862:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.NewsFeedService=void 0;const s=n(651),o=n(3919);let a=t.NewsFeedService=class{constructor(e){this.httpClient=e,this.namespace="/newsfeed/v1/posts"}getPosts(e,t,n){return this.httpClient.client.get(`${this.namespace}`,{params:{page:e,list:t,group_id:n}})}getPost(e){return this.httpClient.client.get(`${this.namespace}/:id/`,{urlParams:{id:e}})}createPost(e){return this.httpClient.client.post(`${this.namespace}`,e)}updatePost(e,t){return this.httpClient.client.patch(`${this.namespace}/:id`,t,{urlParams:{id:e}})}deletePost(e,t){return this.httpClient.client.delete(`${this.namespace}/:id`,{data:{notify:t},urlParams:{id:e}})}};t.NewsFeedService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},8811:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationsService=void 0;const s=n(651),o=n(4096),a=n(3919),c=n(7430);let u=t.NotificationsService=class{constructor(e,t){this.httpClient=e,this.configService=t,this.namespace="/notifications/v1/notifications",this.storageService=new c.StorageService("notifications",this.configService)}getNotifications(){return this.httpClient.client.get(this.namespace)}};t.NotificationsService=u=r([(0,s.injectable)(),i("design:paramtypes",[a.HttpClient,o.ConfigService])],u)},162:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PouchdbService=void 0;const a=o(n(7651)),c=o(n(4689)),u=o(n(3996)),l=n(651),f=n(8410),d=n(1475);a.default.plugin(u.default),a.default.plugin(c.default);let h=t.PouchdbService=class{constructor(e){this.tokenService=e,this.namespace="/settings-backend/v1"}getPartitionKey(e){return s(this,void 0,void 0,(function*(){const t=yield this.tokenService.decodeToken();return`${t.domain}-${t.id}-${e}`}))}db(e){return s(this,void 0,void 0,(function*(){return new a.default(e,{adapter:"idb"})}))}remoteDb(e){return s(this,void 0,void 0,(function*(){const t=yield this.tokenService.decodeToken(),n=yield this.tokenService.getToken(),r=`https://${t.domain}${this.namespace}/${e}`;return new a.default(r,{fetch:(e,t)=>s(this,void 0,void 0,(function*(){return t.headers={Authorization:`Bearer ${n}`},a.default.fetch(e,t)}))})}))}get(e,t){return s(this,void 0,void 0,(function*(){const n=yield this.db(e);return yield n.get(t)}))}find(e,t){return s(this,void 0,void 0,(function*(){const n=yield this.db(e),r=yield this.getPartitionKey(t),i={selector:{_id:{$gt:r,$lt:`${r}\\ufff0`}},limit:1e3,skip:0};return yield n.find(i)}))}post(e,t,n){return s(this,void 0,void 0,(function*(){const r=yield this.db(e),i=(yield this.getPartitionKey(t))+`:${(0,f.v4)()}`;return yield r.post(Object.assign({_id:i,type:t},n))}))}put(e,t,n,r,i){return s(this,void 0,void 0,(function*(){const s=yield this.db(e);return yield s.put(Object.assign({_id:n,_rev:r,type:t},i))}))}bulkDocs(e,t,n){return s(this,void 0,void 0,(function*(){const r=yield this.db(e);return yield r.bulkDocs(t,n)}))}remove(e,t){return s(this,void 0,void 0,(function*(){const n=yield this.db(e);return yield n.remove(t)}))}};t.PouchdbService=h=r([(0,l.injectable)(),i("design:paramtypes",[d.TokensService])],h)},7543:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileService=void 0;const s=n(651),o=n(3919);let a=t.ProfileService=class{constructor(e){this.httpClient=e,this.namespace="/company/v1/users/me",this.crm_req_namespace="/crm/v1/requisites"}get2FaStatus(){return this.httpClient.client.get(`${this.namespace}/twofa_status/`)}enable2Fa(){return this.httpClient.client.patch(`${this.namespace}/twofa_enable/`)}disable2Fa(){return this.httpClient.client.patch(`${this.namespace}/twofa_disable/`)}getProfile(){return this.httpClient.client.get(`${this.namespace}/`)}getPortalSettings(){return this.httpClient.client.get(`${this.namespace}/settings/`)}updatePortalSettings(e){return this.httpClient.client.patch(`${this.namespace}/settings/`,e)}getRequisites(){return this.httpClient.client.get(`${this.crm_req_namespace}/`)}updateRequisite(e){return this.httpClient.client.patch(`${this.crm_req_namespace}/:id`,e,{urlParams:{id:e.id}})}removeRequisite(e){return this.httpClient.client.delete(`${this.crm_req_namespace}/:id`,{urlParams:{id:e}})}getTemplates(e,t){return this.httpClient.client.get(`${this.crm_req_namespace}/templates`,{params:{page:e,list:t}})}getBasicTemplates(){return this.httpClient.client.get(`${this.crm_req_namespace}/templates/basic-templates`)}updateTemplate(e){return this.httpClient.client.patch(`${this.crm_req_namespace}/templates/:id`,e,{urlParams:{id:e.id}})}createTemplate(e){return this.httpClient.client.post(`${this.crm_req_namespace}/templates`,e)}removeTemplate(e){return this.httpClient.client.delete(`${this.crm_req_namespace}/templates/:id`,{urlParams:{id:e}})}getBankRequisitesById(e){return this.httpClient.client.get(`${this.crm_req_namespace}/:id/bank_requisites/`,{urlParams:{id:e}})}};t.ProfileService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},2410:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.RolesService=void 0;const o=n(651),a=n(3919);let c=t.RolesService=class{constructor(e){this.httpClient=e,this.namespace="/company/v1",this.crmNamespace="/crm/v1"}getRoles(){return this.httpClient.client.get(`${this.namespace}/roles`)}getPermissions(){return this.httpClient.client.get(`${this.namespace}/permissions`)}getRole(e){return this.httpClient.client.get(`${this.namespace}/roles/:id`,{urlParams:{id:e}})}updateRole(e){const{id:t}=e,n=s(e,["id"]);return this.httpClient.client.patch(`${this.namespace}/roles/:id`,n,{urlParams:{id:t}})}createRole(e){return this.httpClient.client.post(`${this.namespace}/roles/`,e)}deleteRole(e){return this.httpClient.client.delete(`${this.namespace}/roles/:id`,{urlParams:{id:e}})}getPermissionsFunnels(e){return this.httpClient.client.get(`${this.crmNamespace}/permissions/funnels`,{urlParams:{role:e},params:{role:e}})}updateRolePermisionsFunnels(e){return this.httpClient.client.post(`${this.crmNamespace}/permissions`,e)}};t.RolesService=c=r([(0,o.injectable)(),i("design:paramtypes",[a.HttpClient])],c)},4176:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.TasksService=void 0;const s=n(651),o=n(3919),a=n(3016);let c=t.TasksService=class{constructor(e,t){this.httpClient=e,this.couchdbService=t,this.namespace="/tasks/v1/tasks",this.namespaceTemplates="/tasks/v1/templates"}getTasks(e,t,n){return this.httpClient.client.get(this.namespace,{params:Object.assign(Object.assign({},e),t&&{responsible_id:""}),signal:n})}getRecurringTemplates(e,t,n){return this.httpClient.client.get(`${this.namespaceTemplates}/recurring`,{params:Object.assign(Object.assign({},e),t&&{responsible_id:""}),signal:n})}getOneTimeTemplates(e,t,n){return this.httpClient.client.get(`${this.namespaceTemplates}/one_time`,{params:Object.assign(Object.assign({},e),t&&{responsible_id:""}),signal:n})}getHierarchies(e,t,n){return this.httpClient.client.get(`${this.namespace}/hierarchy`,{params:Object.assign(Object.assign({},e),t&&{responsible_id:""}),signal:n})}getSubtasks(e,t,n,r){return r?this.httpClient.client.get(this.namespace,{params:{template_id:e,page:t,list:n}}):this.httpClient.client.get(this.namespace,{params:{parent_id:e,page:t,list:n}})}getTask(e,t){return this.httpClient.client.get(`${this.namespace}/:id/`,Object.assign(Object.assign({},t&&{params:{crm_entity_list:t}}),{urlParams:{id:e}}))}getRecurringTemplate(e,t){return this.httpClient.client.get(`${this.namespaceTemplates}/recurring/:id/`,Object.assign(Object.assign({},t&&{params:{crm_entity_list:t}}),{urlParams:{id:e}}))}getOneTimeTemplate(e,t){return this.httpClient.client.get(`${this.namespaceTemplates}/one_time/:id/`,Object.assign(Object.assign({},t&&{params:{crm_entity_list:t}}),{urlParams:{id:e}}))}getParentTask(e){return this.httpClient.client.get(`${this.namespace}/:id/`,{urlParams:{id:e}})}createTask(e){return this.httpClient.client.post(this.namespace,e)}replicateTask(e,t){return this.httpClient.client.post(`${this.namespace}/:id/replicate`,e,{urlParams:{id:t}})}createRecurringTemplate(e){return this.httpClient.client.post(`${this.namespaceTemplates}/recurring`,e)}createOneTimeTemplate(e){return this.httpClient.client.post(`${this.namespaceTemplates}/one_time`,e)}updateTask(e,t){return this.httpClient.client.patch(`${this.namespace}/:id/`,t,{urlParams:{id:e}})}updateRecurringTemplate(e,t){return this.httpClient.client.patch(`${this.namespaceTemplates}/recurring/:id/`,t,{urlParams:{id:e}})}updateOneTimeTemplate(e,t){return this.httpClient.client.patch(`${this.namespaceTemplates}/one_time/:id/`,t,{urlParams:{id:e}})}updateSubtask(e,t){return this.httpClient.client.patch(`${this.namespace}/:id/`,t,{urlParams:{id:e}})}delegationTask(e,t){return this.httpClient.client.patch(`${this.namespace}/:id/delegation`,{user_id:t},{urlParams:{id:e}})}massEditingTasks(e,t,n,r,i,s,o){return n?this.httpClient.client.post(`${this.namespace}/mass_edit/`,{taskIds:e,exceptIds:t,all:n,payload:s,settings:o},{params:Object.assign(Object.assign({},r),i&&{responsible_id:""})}):this.httpClient.client.post(`${this.namespace}/mass_edit/`,{taskIds:e,exceptIds:t,all:n,payload:s,settings:o})}deleteTask(e){return this.httpClient.client.delete(`${this.namespace}/:id/`,{urlParams:{id:e}})}massDeletionTasks(e,t,n,r,i){return n?this.httpClient.client.post(`${this.namespace}/mass_deletion/`,{taskIds:e,exceptIds:t,all:n},{params:Object.assign(Object.assign({},r),i&&{responsible_id:""})}):this.httpClient.client.post(`${this.namespace}/mass_deletion/`,{taskIds:e,exceptIds:t,all:n})}startTask(e){return this.httpClient.client.patch(`${this.namespace}/:id/start`,void 0,{urlParams:{id:e}})}pauseTask(e){return this.httpClient.client.patch(`${this.namespace}/:id/stop`,void 0,{urlParams:{id:e}})}watchTask(e){return this.httpClient.client.patch(`${this.namespace}/:id/watch`,void 0,{urlParams:{id:e}})}unwatchTask(e){return this.httpClient.client.patch(`${this.namespace}/:id/unwatch`,void 0,{urlParams:{id:e}})}completeTask(e){return this.httpClient.client.patch(`${this.namespace}/:id/ready`,void 0,{urlParams:{id:e}})}massCompletionTasks(e,t,n,r,i){return n?this.httpClient.client.post(`${this.namespace}/mass_ready/`,{taskIds:e,exceptIds:t,all:n},{params:Object.assign(Object.assign({},r),i&&{responsible_id:""})}):this.httpClient.client.post(`${this.namespace}/mass_ready/`,{taskIds:e,exceptIds:t,all:n})}restartTask(e){return this.httpClient.client.patch(`${this.namespace}/:id/restart`,void 0,{urlParams:{id:e}})}getTasksField(){return this.httpClient.client.get(`${this.namespace}/fields`)}getFiltersPresets(e){return this.couchdbService.find("tasks-presets",e)}getFiltersPreset(e){return this.couchdbService.find("tasks-presets","",e)}createFilterPreset(e,t){return this.couchdbService.create("tasks-presets",e,t)}updateFilterPreset(e,t,n){return this.couchdbService.update("tasks-presets",e,t,n)}bulkUpdateFiltersPresets(e){return this.couchdbService.bulkUpdate("tasks-presets",e)}deleteFilterPreset(e,t){return this.couchdbService.delete("tasks-presets",e,t)}createSettings(e,t){return this.couchdbService.create("tasks-settings",e,t)}getTasksSettings(e){return this.couchdbService.find("tasks-settings",e)}updateTasksSettings(e,t,n){return this.couchdbService.update("tasks-settings",e,t,n)}};t.TasksService=c=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient,a.CouchdbService])],c)},2548:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.TasksStagesService=void 0;const s=n(651),o=n(3919);let a=t.TasksStagesService=class{constructor(e){this.httpClient=e,this.namespace="/tasks/v1/stages"}getTasksStages(e){return this.httpClient.client.get(this.namespace,Object.assign({},e&&{params:{groupId:e}}))}createTasksStage(e){return this.httpClient.client.post(this.namespace,e)}updateTasksStage(e,t){return this.httpClient.client.patch(`${this.namespace}/:id`,t,{urlParams:{id:e}})}deleteTasksStage(e){return this.httpClient.client.delete(`${this.namespace}/:id`,{urlParams:{id:e}})}};t.TasksStagesService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},8993:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.TasksTimerService=void 0;const s=n(651),o=n(3919);let a=t.TasksTimerService=class{constructor(e){this.httpClient=e,this.namespace="/tasks/v1/timer"}getTimerRealtime(){return this.httpClient.client.get(`${this.namespace}/realtime`)}startTimer(e){return this.httpClient.client.post(`${this.namespace}/:id/start`,void 0,{urlParams:{id:e}})}stopTimer(e){return this.httpClient.client.post(`${this.namespace}/:id/stop`,void 0,{urlParams:{id:e}})}getTimerList(e){return this.httpClient.client.get(`${this.namespace}/:id/`,{urlParams:{id:e}})}createTimer(e,t){return this.httpClient.client.post(`${this.namespace}/:id/`,t,{urlParams:{id:e}})}updateTimer(e,t,n){return this.httpClient.client.patch(`${this.namespace}/:id/:timerId`,n,{urlParams:{id:e,timerId:t}})}deleteTimer(e,t){return this.httpClient.client.delete(`${this.namespace}/:id/:timerId`,{urlParams:{id:e,timerId:t}})}};t.TasksTimerService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},3504:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.UsersService=void 0;const s=n(651),o=n(3919);let a=t.UsersService=class{constructor(e){this.httpClient=e,this.namespace="/company/v1/users"}getUsers(e,t,n){return this.httpClient.client.get(this.namespace,{params:{page:e,list:t,show:n}})}getUserById(e){return this.httpClient.client.get(`${this.namespace}/:id`,{urlParams:{id:e}})}updateUser(e,t){return this.httpClient.client.patch(`${this.namespace}/:id`,t,{urlParams:{id:e}})}deactivateUser(e){return this.httpClient.client.post(`${this.namespace}/:id/deactivate`,{},{urlParams:{id:e}})}activateUser(e){return this.httpClient.client.post(`${this.namespace}/:id/activate`,{},{urlParams:{id:e}})}updateRoles(e,t){return this.httpClient.client.patch(`${this.namespace}/:id/update_roles`,{roles:t},{urlParams:{id:e}})}updatePosition(e,t){return this.httpClient.client.patch(`${this.namespace}/:id/update_position`,{position:t},{urlParams:{id:e}})}getPortalSettings(e){return this.httpClient.client.get(`${this.namespace}/:id/settings`,{urlParams:{id:e}})}updatePortalSettings(e,t){return this.httpClient.client.patch(`${this.namespace}/:id/settings`,t,{urlParams:{id:e}})}get2FaStatus(e){return this.httpClient.client.get(`${this.namespace}/:id/twofa_status`,{urlParams:{id:e}})}disable2Fa(e){return this.httpClient.client.get(`${this.namespace}/:id/twofa_disable`,{urlParams:{id:e}})}search(e){return this.httpClient.client.get(`${this.namespace}/search/`,{params:Object.assign({},e)})}uploadAvatar(e){const t=new FormData;return t.append("avatar",e.file?e.file:'""'),e.userId&&t.append("userId",e.userId),this.httpClient.client.post(`${this.namespace}/upload_avatar/`,t)}getUsersByIds(e){return this.httpClient.client.get(`${this.namespace}/upload_avatar/`,{params:{ids:e}})}hasRole(e,t){return(null==e?void 0:e.some((e=>null==t?void 0:t.some((t=>t===e)))))||!1}};t.UsersService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},1682:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.WebhooksService=void 0;const s=n(651),o=n(3919);let a=t.WebhooksService=class{getNamespace(e){return e?this.namespaceIncoming:this.namespace}constructor(e){this.httpClient=e,this.namespace="/company/v1/webhooks",this.namespaceIncoming="/company/v1/incoming_webhooks"}getWebhooks(e,t,n,r){return this.httpClient.client.get(this.getNamespace(r),{params:{page:e,list:t,name:n}})}createWebhook(e,t){return this.httpClient.client.post(this.getNamespace(t),e)}deleteWebhook(e,t){return this.httpClient.client.delete(`${this.getNamespace(t)}/:id/`,{urlParams:{id:e}})}getWebhookById(e,t){return this.httpClient.client.get(`${this.getNamespace(t)}/:id/`,{urlParams:{id:e}})}toggleWebhook(e,t){return this.httpClient.client.patch(`${this.getNamespace(t)}/:id/toggle`,void 0,{urlParams:{id:e}})}repeatWebhook(e,t){return this.httpClient.client.patch(`${this.getNamespace(t)}/:id/repeat`,void 0,{urlParams:{id:e}})}deleteSelectedWebhooks(e,t){return this.httpClient.client.delete(this.getNamespace(t),{data:{ids:e}})}updateWebhook(e,t,n){return this.httpClient.client.patch(`${this.getNamespace(n)}/:id`,t,{urlParams:{id:e}})}};t.WebhooksService=a=r([(0,s.injectable)(),i("design:paramtypes",[o.HttpClient])],a)},651:function(e,t,n){"use strict";var r;n.r(t),n.d(t,{Lifecycle:function(){return i},autoInjectable:function(){return P},container:function(){return O},delay:function(){return d},inject:function(){return R},injectAll:function(){return I},injectAllWithTransform:function(){return A},injectWithTransform:function(){return T},injectable:function(){return $},instanceCachingFactory:function(){return q},instancePerContainerCachingFactory:function(){return N},isClassProvider:function(){return v},isFactoryProvider:function(){return l},isNormalToken:function(){return h},isTokenProvider:function(){return c},isValueProvider:function(){return u},predicateAwareClassFactory:function(){return B},registry:function(){return E},scoped:function(){return D},singleton:function(){return x}}),function(e){e[e.Transient=0]="Transient",e[e.Singleton=1]="Singleton",e[e.ResolutionScoped=2]="ResolutionScoped",e[e.ContainerScoped=3]="ContainerScoped"}(r||(r={}));var i=r;const s="injectionTokens";function o(e){const t=Reflect.getMetadata("design:paramtypes",e)||[],n=Reflect.getOwnMetadata(s,e)||{};return Object.keys(n).forEach((e=>{t[+e]=n[e]})),t}function a(e,t){return function(n,r,i){const o=Reflect.getOwnMetadata(s,n)||{};o[i]=t?{token:e,transform:t.transformToken,transformArgs:t.args||[]}:e,Reflect.defineMetadata(s,o,n)}}function c(e){return!!e.useToken}function u(e){return null!=e.useValue}function l(e){return!!e.useFactory}class f{constructor(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}createProxy(e){let t,n=!1;return new Proxy({},this.createHandler((()=>(n||(t=e(this.wrap()),n=!0),t))))}createHandler(e){const t={};return this.reflectMethods.forEach((n=>{t[n]=(...t)=>(t[0]=e(),(0,Reflect[n])(...t))})),t}}function d(e){if(void 0===e)throw new Error("Attempt to `delay` undefined. Constructor must be wrapped in a callback");return new f(e)}function h(e){return"string"==typeof e||"symbol"==typeof e}function p(e){return"object"==typeof e&&"token"in e&&"multiple"in e}function m(e){return"object"==typeof e&&"token"in e&&"transform"in e}function v(e){return!!e.useClass}class y{constructor(){this._registryMap=new Map}entries(){return this._registryMap.entries()}getAll(e){return this.ensure(e),this._registryMap.get(e)}get(e){this.ensure(e);const t=this._registryMap.get(e);return t[t.length-1]||null}set(e,t){this.ensure(e),this._registryMap.get(e).push(t)}setAll(e,t){this._registryMap.set(e,t)}has(e){return this.ensure(e),this._registryMap.get(e).length>0}clear(){this._registryMap.clear()}ensure(e){this._registryMap.has(e)||this._registryMap.set(e,[])}}class g extends y{}class _{constructor(){this.scopedResolutions=new Map}}function b(e,t,n){const[,r=null]=e.toString().match(/constructor\(([\w, ]+)\)/)||[],i=function(e,t){return null===e?`at position #${t}`:`"${e.split(",")[t].trim()}" at position #${t}`}(r,t);return function(e,t,n="    "){return[e,...t.message.split("\n").map((e=>n+e))].join("\n")}(`Cannot inject the dependency ${i} of "${e.name}" constructor. Reason:`,n)}class w extends y{}class k extends y{}class S{constructor(){this.preResolution=new w,this.postResolution=new k}}const C=new Map;class j{constructor(e){this.parent=e,this._registry=new g,this.interceptors=new S,this.disposed=!1,this.disposables=new Set}register(e,t,n={lifecycle:i.Transient}){let r;if(this.ensureNotDisposed(),r=function(e){return v(e)||u(e)||c(e)||l(e)}(t)?t:{useClass:t},c(r)){const t=[e];let n=r;for(;null!=n;){const e=n.useToken;if(t.includes(e))throw new Error(`Token registration cycle detected! ${[...t,e].join(" -> ")}`);t.push(e);const r=this._registry.get(e);n=r&&c(r.provider)?r.provider:null}}if((n.lifecycle===i.Singleton||n.lifecycle==i.ContainerScoped||n.lifecycle==i.ResolutionScoped)&&(u(r)||l(r)))throw new Error(`Cannot use lifecycle "${i[n.lifecycle]}" with ValueProviders or FactoryProviders`);return this._registry.set(e,{provider:r,options:n}),this}registerType(e,t){return this.ensureNotDisposed(),h(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})}registerInstance(e,t){return this.ensureNotDisposed(),this.register(e,{useValue:t})}registerSingleton(e,t){if(this.ensureNotDisposed(),h(e)){if(h(t))return this.register(e,{useToken:t},{lifecycle:i.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:i.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}let n=e;return t&&!h(t)&&(n=t),this.register(e,{useClass:n},{lifecycle:i.Singleton})}resolve(e,t=new _){this.ensureNotDisposed();const n=this.getRegistration(e);if(!n&&h(e))throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`);if(this.executePreResolutionInterceptor(e,"Single"),n){const r=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,r,"Single"),r}if(function(e){return"function"==typeof e||e instanceof f}(e)){const n=this.construct(e,t);return this.executePostResolutionInterceptor(e,n,"Single"),n}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")}executePreResolutionInterceptor(e,t){if(this.interceptors.preResolution.has(e)){const n=[];for(const r of this.interceptors.preResolution.getAll(e))"Once"!=r.options.frequency&&n.push(r),r.callback(e,t);this.interceptors.preResolution.setAll(e,n)}}executePostResolutionInterceptor(e,t,n){if(this.interceptors.postResolution.has(e)){const r=[];for(const i of this.interceptors.postResolution.getAll(e))"Once"!=i.options.frequency&&r.push(i),i.callback(e,t,n);this.interceptors.postResolution.setAll(e,r)}}resolveRegistration(e,t){if(this.ensureNotDisposed(),e.options.lifecycle===i.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);const n=e.options.lifecycle===i.Singleton,r=e.options.lifecycle===i.ContainerScoped,s=n||r;let o;return o=u(e.provider)?e.provider.useValue:c(e.provider)?s?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):v(e.provider)?s?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):l(e.provider)?e.provider.useFactory(this):this.construct(e.provider,t),e.options.lifecycle===i.ResolutionScoped&&t.scopedResolutions.set(e,o),o}resolveAll(e,t=new _){this.ensureNotDisposed();const n=this.getAllRegistrations(e);if(!n&&h(e))throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`);if(this.executePreResolutionInterceptor(e,"All"),n){const r=n.map((e=>this.resolveRegistration(e,t)));return this.executePostResolutionInterceptor(e,r,"All"),r}const r=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,r,"All"),r}isRegistered(e,t=!1){return this.ensureNotDisposed(),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)}reset(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()}clearInstances(){this.ensureNotDisposed();for(const[e,t]of this._registry.entries())this._registry.setAll(e,t.filter((e=>!u(e.provider))).map((e=>(e.instance=void 0,e))))}createChildContainer(){this.ensureNotDisposed();const e=new j(this);for(const[t,n]of this._registry.entries())n.some((({options:e})=>e.lifecycle===i.ContainerScoped))&&e._registry.setAll(t,n.map((e=>e.options.lifecycle===i.ContainerScoped?{provider:e.provider,options:e.options}:e)));return e}beforeResolution(e,t,n={frequency:"Always"}){this.interceptors.preResolution.set(e,{callback:t,options:n})}afterResolution(e,t,n={frequency:"Always"}){this.interceptors.postResolution.set(e,{callback:t,options:n})}dispose(){return e=this,n=function*(){this.disposed=!0;const e=[];this.disposables.forEach((t=>{const n=t.dispose();n&&e.push(n)})),yield Promise.all(e)},new((t=void 0)||(t=Promise))((function(r,i){function s(e){try{a(n.next(e))}catch(e){i(e)}}function o(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,o)}a((n=n.apply(e,[])).next())}));var e,t,n}getRegistration(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null}getAllRegistrations(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null}construct(e,t){if(e instanceof f)return e.createProxy((e=>this.resolve(e,t)));const n=(()=>{const n=C.get(e);if(!n||0===n.length){if(0===e.length)return new e;throw new Error(`TypeInfo not known for "${e.name}"`)}const r=n.map(this.resolveParams(t,e));return new e(...r)})();var r;return"function"!=typeof(r=n).dispose||r.dispose.length>0||this.disposables.add(n),n}resolveParams(e,t){return(n,r)=>{try{return p(n)?m(n)?n.multiple?this.resolve(n.transform).transform(this.resolveAll(n.token),...n.transformArgs):this.resolve(n.transform).transform(this.resolve(n.token,e),...n.transformArgs):n.multiple?this.resolveAll(n.token):this.resolve(n.token,e):m(n)?this.resolve(n.transform,e).transform(this.resolve(n.token,e),...n.transformArgs):this.resolve(n,e)}catch(e){throw new Error(b(t,r,e))}}}ensureNotDisposed(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")}}const O=new j;var P=function(){return function(e){const t=o(e);return class extends e{constructor(...n){super(...n.concat(t.slice(n.length).map(((t,r)=>{try{return p(t)?m(t)?t.multiple?O.resolve(t.transform).transform(O.resolveAll(t.token),...t.transformArgs):O.resolve(t.transform).transform(O.resolve(t.token),...t.transformArgs):t.multiple?O.resolveAll(t.token):O.resolve(t.token):m(t)?O.resolve(t.transform).transform(O.resolve(t.token),...t.transformArgs):O.resolve(t)}catch(t){const i=r+n.length;throw new Error(b(e,i,t))}}))))}}}},R=function(e){return a(e)},$=function(){return function(e){C.set(e,o(e))}},E=function(e=[]){return function(t){return e.forEach((e=>{var{token:t,options:n}=e,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["token","options"]);return O.register(t,r,n)})),t}},x=function(){return function(e){$()(e),O.registerSingleton(e)}},I=function(e){return a({token:e,multiple:!0})},A=function(e,t,...n){return a({token:e,multiple:!0,transform:t,transformArgs:n})},T=function(e,t,...n){return a(e,{transformToken:t,args:n})};function D(e,t){return function(n){$()(n),O.register(t||n,n,{lifecycle:e})}}function q(e){let t;return n=>(null==t&&(t=e(n)),t)}function N(e){const t=new WeakMap;return n=>{let r=t.get(n);return null==r&&(r=e(n),t.set(n,r)),r}}function B(e,t,n,r=!0){let i,s;return o=>{const a=e(o);return r&&s===a||(i=(s=a)?o.resolve(t):o.resolve(n)),i}}if("undefined"==typeof Reflect||!Reflect.getMetadata)throw new Error("tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.")},8410:function(e,t,n){"use strict";n.r(t),n.d(t,{NIL:function(){return j},parse:function(){return f},stringify:function(){return o.Z},v1:function(){return u},v3:function(){return b},v4:function(){return w.Z},v5:function(){return C},validate:function(){return l.Z},version:function(){return O}});var r,i,s=n(3653),o=n(3958),a=0,c=0,u=function(e,t,n){var u=t&&n||0,l=t||new Array(16),f=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==d){var h=e.random||(e.rng||s.Z)();null==f&&(f=r=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==d&&(d=i=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:c+1,v=p-a+(m-c)/1e4;if(v<0&&void 0===e.clockseq&&(d=d+1&16383),(v<0||p>a)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,c=m,i=d;var y=(1e4*(268435455&(p+=122192928e5))+m)%4294967296;l[u++]=y>>>24&255,l[u++]=y>>>16&255,l[u++]=y>>>8&255,l[u++]=255&y;var g=p/4294967296*1e4&268435455;l[u++]=g>>>8&255,l[u++]=255&g,l[u++]=g>>>24&15|16,l[u++]=g>>>16&255,l[u++]=d>>>8|128,l[u++]=255&d;for(var _=0;_<6;++_)l[u+_]=f[_];return t||(0,o.Z)(l)},l=n(7738),f=function(e){if(!(0,l.Z)(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n};function d(e,t,n){function r(e,r,i,s){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=f(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(r),a.set(e,r.length),(a=n(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,i){s=s||0;for(var c=0;c<16;++c)i[s+c]=a[c];return i}return(0,o.Z)(a)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function h(e){return 14+(e+64>>>9<<4)+1}function p(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function m(e,t,n,r,i,s){return p((o=p(p(t,e),p(r,s)))<<(a=i)|o>>>32-a,n);var o,a}function v(e,t,n,r,i,s,o){return m(t&n|~t&r,e,t,i,s,o)}function y(e,t,n,r,i,s,o){return m(t&r|n&~r,e,t,i,s,o)}function g(e,t,n,r,i,s,o){return m(t^n^r,e,t,i,s,o)}function _(e,t,n,r,i,s,o){return m(n^(t|~r),e,t,i,s,o)}var b=d("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",i=0;i<n;i+=8){var s=e[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(15&s),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[h(t)-1]=t;for(var n=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<e.length;o+=16){var a=n,c=r,u=i,l=s;n=v(n,r,i,s,e[o],7,-680876936),s=v(s,n,r,i,e[o+1],12,-389564586),i=v(i,s,n,r,e[o+2],17,606105819),r=v(r,i,s,n,e[o+3],22,-1044525330),n=v(n,r,i,s,e[o+4],7,-176418897),s=v(s,n,r,i,e[o+5],12,1200080426),i=v(i,s,n,r,e[o+6],17,-1473231341),r=v(r,i,s,n,e[o+7],22,-45705983),n=v(n,r,i,s,e[o+8],7,1770035416),s=v(s,n,r,i,e[o+9],12,-1958414417),i=v(i,s,n,r,e[o+10],17,-42063),r=v(r,i,s,n,e[o+11],22,-1990404162),n=v(n,r,i,s,e[o+12],7,1804603682),s=v(s,n,r,i,e[o+13],12,-40341101),i=v(i,s,n,r,e[o+14],17,-1502002290),n=y(n,r=v(r,i,s,n,e[o+15],22,1236535329),i,s,e[o+1],5,-165796510),s=y(s,n,r,i,e[o+6],9,-1069501632),i=y(i,s,n,r,e[o+11],14,643717713),r=y(r,i,s,n,e[o],20,-373897302),n=y(n,r,i,s,e[o+5],5,-701558691),s=y(s,n,r,i,e[o+10],9,38016083),i=y(i,s,n,r,e[o+15],14,-660478335),r=y(r,i,s,n,e[o+4],20,-405537848),n=y(n,r,i,s,e[o+9],5,568446438),s=y(s,n,r,i,e[o+14],9,-1019803690),i=y(i,s,n,r,e[o+3],14,-187363961),r=y(r,i,s,n,e[o+8],20,1163531501),n=y(n,r,i,s,e[o+13],5,-1444681467),s=y(s,n,r,i,e[o+2],9,-51403784),i=y(i,s,n,r,e[o+7],14,1735328473),n=g(n,r=y(r,i,s,n,e[o+12],20,-1926607734),i,s,e[o+5],4,-378558),s=g(s,n,r,i,e[o+8],11,-2022574463),i=g(i,s,n,r,e[o+11],16,1839030562),r=g(r,i,s,n,e[o+14],23,-35309556),n=g(n,r,i,s,e[o+1],4,-1530992060),s=g(s,n,r,i,e[o+4],11,1272893353),i=g(i,s,n,r,e[o+7],16,-155497632),r=g(r,i,s,n,e[o+10],23,-1094730640),n=g(n,r,i,s,e[o+13],4,681279174),s=g(s,n,r,i,e[o],11,-358537222),i=g(i,s,n,r,e[o+3],16,-722521979),r=g(r,i,s,n,e[o+6],23,76029189),n=g(n,r,i,s,e[o+9],4,-640364487),s=g(s,n,r,i,e[o+12],11,-421815835),i=g(i,s,n,r,e[o+15],16,530742520),n=_(n,r=g(r,i,s,n,e[o+2],23,-995338651),i,s,e[o],6,-198630844),s=_(s,n,r,i,e[o+7],10,1126891415),i=_(i,s,n,r,e[o+14],15,-1416354905),r=_(r,i,s,n,e[o+5],21,-57434055),n=_(n,r,i,s,e[o+12],6,1700485571),s=_(s,n,r,i,e[o+3],10,-1894986606),i=_(i,s,n,r,e[o+10],15,-1051523),r=_(r,i,s,n,e[o+1],21,-2054922799),n=_(n,r,i,s,e[o+8],6,1873313359),s=_(s,n,r,i,e[o+15],10,-30611744),i=_(i,s,n,r,e[o+6],15,-1560198380),r=_(r,i,s,n,e[o+13],21,1309151649),n=_(n,r,i,s,e[o+4],6,-145523070),s=_(s,n,r,i,e[o+11],10,-1120210379),i=_(i,s,n,r,e[o+2],15,718787259),r=_(r,i,s,n,e[o+9],21,-343485551),n=p(n,a),r=p(r,c),i=p(i,u),s=p(s,l)}return[n,r,i,s]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(h(t)),r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))})),w=n(2045);function k(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function S(e,t){return e<<t|e>>>32-t}var C=d("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var i=0;i<r.length;++i)e.push(r.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var s=e.length/4+2,o=Math.ceil(s/16),a=new Array(o),c=0;c<o;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[64*c+4*l]<<24|e[64*c+4*l+1]<<16|e[64*c+4*l+2]<<8|e[64*c+4*l+3];a[c]=u}a[o-1][14]=8*(e.length-1)/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=8*(e.length-1)&4294967295;for(var f=0;f<o;++f){for(var d=new Uint32Array(80),h=0;h<16;++h)d[h]=a[f][h];for(var p=16;p<80;++p)d[p]=S(d[p-3]^d[p-8]^d[p-14]^d[p-16],1);for(var m=n[0],v=n[1],y=n[2],g=n[3],_=n[4],b=0;b<80;++b){var w=Math.floor(b/20),C=S(m,5)+k(w,v,y,g)+_+t[w]+d[b]>>>0;_=g,g=y,y=S(v,30)>>>0,v=m,m=C}n[0]=n[0]+m>>>0,n[1]=n[1]+v>>>0,n[2]=n[2]+y>>>0,n[3]=n[3]+g>>>0,n[4]=n[4]+_>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),j="00000000-0000-0000-0000-000000000000",O=function(e){if(!(0,l.Z)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},3653:function(e,t,n){"use strict";var r;n.d(t,{Z:function(){return s}});var i=new Uint8Array(16);function s(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}},3958:function(e,t,n){"use strict";for(var r=n(7738),i=[],s=0;s<256;++s)i.push((s+256).toString(16).substr(1));t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!(0,r.Z)(n))throw TypeError("Stringified UUID is invalid");return n}},2045:function(e,t,n){"use strict";var r=n(3653),i=n(3958);t.Z=function(e,t,n){var s=(e=e||{}).random||(e.rng||r.Z)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=s[o];return t}return(0,i.Z)(s)}},7738:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,i=function(e){return"string"==typeof e&&r.test(e)}},3684:function(e,t){"use strict";function n(e,t,n){var r=n[n.length-1];e===r.element&&(n.pop(),r=n[n.length-1]);var i=r.element,s=r.index;Array.isArray(i)?i.push(e):s===t.length-2?i[t.pop()]=e:t.push(e)}t.stringify=function(e){var t=[];t.push({obj:e});for(var n,r,i,s,o,a,c,u,l,f,d="";n=t.pop();)if(r=n.obj,d+=n.prefix||"",i=n.val||"")d+=i;else if("object"!=typeof r)d+=void 0===r?null:JSON.stringify(r);else if(null===r)d+="null";else if(Array.isArray(r)){for(t.push({val:"]"}),s=r.length-1;s>=0;s--)o=0===s?"":",",t.push({obj:r[s],prefix:o});t.push({val:"["})}else{for(c in a=[],r)r.hasOwnProperty(c)&&a.push(c);for(t.push({val:"}"}),s=a.length-1;s>=0;s--)l=r[u=a[s]],f=s>0?",":"",f+=JSON.stringify(u)+":",t.push({obj:l,prefix:f});t.push({val:"{"})}return d},t.parse=function(e){for(var t,r,i,s,o,a,c,u,l,f=[],d=[],h=0;;)if("}"!==(t=e[h++])&&"]"!==t&&void 0!==t)switch(t){case" ":case"\t":case"\n":case":":case",":break;case"n":h+=3,n(null,f,d);break;case"t":h+=3,n(!0,f,d);break;case"f":h+=4,n(!1,f,d);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(r="",h--;;){if(i=e[h++],!/[\d\.\-e\+]/.test(i)){h--;break}r+=i}n(parseFloat(r),f,d);break;case'"':for(s="",o=void 0,a=0;'"'!==(c=e[h++])||"\\"===o&&a%2==1;)s+=c,"\\"===(o=c)?a++:a=0;n(JSON.parse('"'+s+'"'),f,d);break;case"[":u={element:[],index:f.length},f.push(u.element),d.push(u);break;case"{":l={element:{},index:f.length},f.push(l.element),d.push(l);break;default:throw new Error("unexpectedly reached end of input: "+t)}else{if(1===f.length)return f.pop();n(f.pop(),f,d)}}},7218:function(e,t,n){"use strict";function r(e,t){return function(){return e.apply(t,arguments)}}const{toString:i}=Object.prototype,{getPrototypeOf:s}=Object,o=(a=Object.create(null),e=>{const t=i.call(e);return a[t]||(a[t]=t.slice(8,-1).toLowerCase())});var a;const c=e=>(e=e.toLowerCase(),t=>o(t)===e),u=e=>t=>typeof t===e,{isArray:l}=Array,f=u("undefined"),d=c("ArrayBuffer"),h=u("string"),p=u("function"),m=u("number"),v=e=>null!==e&&"object"==typeof e,y=e=>{if("object"!==o(e))return!1;const t=s(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},g=c("Date"),_=c("File"),b=c("Blob"),w=c("FileList"),k=c("URLSearchParams"),[S,C,j,O]=["ReadableStream","Request","Response","Headers"].map(c);function P(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,i;if("object"!=typeof e&&(e=[e]),l(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),s=i.length;let o;for(r=0;r<s;r++)o=i[r],t.call(null,e[o],o,e)}}function R(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const $="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,E=e=>!f(e)&&e!==$,x=(I="undefined"!=typeof Uint8Array&&s(Uint8Array),e=>I&&e instanceof I);var I;const A=c("HTMLFormElement"),T=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),D=c("RegExp"),q=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};P(n,((n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)})),Object.defineProperties(e,r)},N="abcdefghijklmnopqrstuvwxyz",B="0123456789",L={DIGIT:B,ALPHA:N,ALPHA_DIGIT:N+N.toUpperCase()+B},F=c("AsyncFunction");var M={isArray:l,isArrayBuffer:d,isBuffer:function(e){return null!==e&&!f(e)&&null!==e.constructor&&!f(e.constructor)&&p(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||p(e.append)&&("formdata"===(t=o(e))||"object"===t&&p(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&d(e.buffer),t},isString:h,isNumber:m,isBoolean:e=>!0===e||!1===e,isObject:v,isPlainObject:y,isReadableStream:S,isRequest:C,isResponse:j,isHeaders:O,isUndefined:f,isDate:g,isFile:_,isBlob:b,isRegExp:D,isFunction:p,isStream:e=>v(e)&&p(e.pipe),isURLSearchParams:k,isTypedArray:x,isFileList:w,forEach:P,merge:function e(){const{caseless:t}=E(this)&&this||{},n={},r=(r,i)=>{const s=t&&R(n,i)||i;y(n[s])&&y(r)?n[s]=e(n[s],r):y(r)?n[s]=e({},r):l(r)?n[s]=r.slice():n[s]=r};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&P(arguments[e],r);return n},extend:(e,t,n,{allOwnKeys:i}={})=>(P(t,((t,i)=>{n&&p(t)?e[i]=r(t,n):e[i]=t}),{allOwnKeys:i}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,a;const c={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],r&&!r(a,e,t)||c[a]||(t[a]=e[a],c[a]=!0);e=!1!==n&&s(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:o,kindOfTest:c,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(l(e))return e;let t=e.length;if(!m(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:A,hasOwnProperty:T,hasOwnProp:T,reduceDescriptors:q,freezeMethods:e=>{q(e,((t,n)=>{if(p(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];p(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return l(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:R,global:$,isContextDefined:E,ALPHABET:L,generateString:(e=16,t=L.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&p(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(v(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=l(e)?[]:{};return P(e,((e,t)=>{const s=n(e,r+1);!f(s)&&(i[t]=s)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:F,isThenable:e=>e&&(v(e)||p(e))&&p(e.then)&&p(e.catch)};function U(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}M.inherits(U,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:M.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const z=U.prototype,K={};function W(e){return M.isPlainObject(e)||M.isArray(e)}function H(e){return M.endsWith(e,"[]")?e.slice(0,-2):e}function J(e,t,n){return e?e.concat(t).map((function(e,t){return e=H(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{K[e]={value:e}})),Object.defineProperties(U,K),Object.defineProperty(z,"isAxiosError",{value:!0}),U.from=(e,t,n,r,i,s)=>{const o=Object.create(z);return M.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),U.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const V=M.toFlatObject(M,{},null,(function(e){return/^is[A-Z]/.test(e)}));function G(e,t,n){if(!M.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=M.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!M.isUndefined(t[e])}))).metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&M.isSpecCompliantForm(t);if(!M.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(M.isDate(e))return e.toISOString();if(!a&&M.isBlob(e))throw new U("Blob is not supported. Use a Buffer instead.");return M.isArrayBuffer(e)||M.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,i){let a=e;if(e&&!i&&"object"==typeof e)if(M.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(M.isArray(e)&&function(e){return M.isArray(e)&&!e.some(W)}(e)||(M.isFileList(e)||M.endsWith(n,"[]"))&&(a=M.toArray(e)))return n=H(n),a.forEach((function(e,r){!M.isUndefined(e)&&null!==e&&t.append(!0===o?J([n],r,s):null===o?n:n+"[]",c(e))})),!1;return!!W(e)||(t.append(J(i,n,s),c(e)),!1)}const l=[],f=Object.assign(V,{defaultVisitor:u,convertValue:c,isVisitable:W});if(!M.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!M.isUndefined(n)){if(-1!==l.indexOf(n))throw Error("Circular reference detected in "+r.join("."));l.push(n),M.forEach(n,(function(n,s){!0===(!(M.isUndefined(n)||null===n)&&i.call(t,n,M.isString(s)?s.trim():s,r,f))&&e(n,r?r.concat(s):[s])})),l.pop()}}(e),t}function Q(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Y(e,t){this._pairs=[],e&&G(e,this,t)}const X=Y.prototype;function Z(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ee(e,t,n){if(!t)return e;const r=n&&n.encode||Z,i=n&&n.serialize;let s;if(s=i?i(t,n):M.isURLSearchParams(t)?t.toString():new Y(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}X.append=function(e,t){this._pairs.push([e,t])},X.toString=function(e){const t=e?function(t){return e.call(this,t,Q)}:Q;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var te=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){M.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},ne={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},re={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Y,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const ie="undefined"!=typeof window&&"undefined"!=typeof document,se=(oe="undefined"!=typeof navigator&&navigator.product,ie&&["ReactNative","NativeScript","NS"].indexOf(oe)<0);var oe;const ae="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,ce=ie&&window.location.href||"http://localhost";var ue={...Object.freeze({__proto__:null,hasBrowserEnv:ie,hasStandardBrowserWebWorkerEnv:ae,hasStandardBrowserEnv:se,origin:ce}),...re};function le(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=i>=e.length;return s=!s&&M.isArray(r)?r.length:s,a?(M.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o):(r[s]&&M.isObject(r[s])||(r[s]=[]),t(e,n,r[s],i)&&M.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o)}if(M.isFormData(e)&&M.isFunction(e.entries)){const n={};return M.forEachEntry(e,((e,r)=>{t(function(e){return M.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null}const fe={transitional:ne,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=M.isObject(e);if(i&&M.isHTMLForm(e)&&(e=new FormData(e)),M.isFormData(e))return r?JSON.stringify(le(e)):e;if(M.isArrayBuffer(e)||M.isBuffer(e)||M.isStream(e)||M.isFile(e)||M.isBlob(e)||M.isReadableStream(e))return e;if(M.isArrayBufferView(e))return e.buffer;if(M.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return G(e,new ue.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return ue.isNode&&M.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=M.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return G(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e){if(M.isString(e))try{return(0,JSON.parse)(e),M.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||fe.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(M.isResponse(e)||M.isReadableStream(e))return e;if(e&&M.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw U.from(e,U.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ue.classes.FormData,Blob:ue.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};M.forEach(["delete","get","head","post","put","patch"],(e=>{fe.headers[e]={}}));var de=fe;const he=M.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),pe=Symbol("internals");function me(e){return e&&String(e).trim().toLowerCase()}function ve(e){return!1===e||null==e?e:M.isArray(e)?e.map(ve):String(e)}function ye(e,t,n,r,i){return M.isFunction(r)?r.call(this,t,n):(i&&(t=n),M.isString(t)?M.isString(r)?-1!==t.indexOf(r):M.isRegExp(r)?r.test(t):void 0:void 0)}class ge{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=me(t);if(!i)throw new Error("header name must be a non-empty string");const s=M.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=ve(e))}const s=(e,t)=>M.forEach(e,((e,n)=>i(e,n,t)));if(M.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(M.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&he[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(M.isHeaders(e))for(const[t,r]of e.entries())i(r,t,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=me(e)){const n=M.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(M.isFunction(t))return t.call(this,e,n);if(M.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=me(e)){const n=M.findKey(this,e);return!(!n||void 0===this[n]||t&&!ye(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=me(e)){const i=M.findKey(n,e);!i||t&&!ye(0,n[i],i,t)||(delete n[i],r=!0)}}return M.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!ye(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return M.forEach(this,((r,i)=>{const s=M.findKey(n,i);if(s)return t[s]=ve(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=ve(r),n[o]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return M.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&M.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[pe]=this[pe]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=me(e);t[r]||(function(e,t){const n=M.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return M.isArray(e)?e.forEach(r):r(e),this}}ge.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),M.reduceDescriptors(ge.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),M.freezeMethods(ge);var _e=ge;function be(e,t){const n=this||de,r=t||n,i=_e.from(r.headers);let s=r.data;return M.forEach(e,(function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function we(e){return!(!e||!e.__CANCEL__)}function ke(e,t,n){U.call(this,null==e?"canceled":e,U.ERR_CANCELED,t,n),this.name="CanceledError"}function Se(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new U("Request failed with status code "+n.status,[U.ERR_BAD_REQUEST,U.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}M.inherits(ke,U,{__CANCEL__:!0});var Ce=(e,t,n=3)=>{let r=0;const i=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),u=r[o];i||(i=c),n[s]=a,r[s]=c;let l=o,f=0;for(;l!==s;)f+=n[l++],l%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),c-i<t)return;const d=u&&c-u;return d?Math.round(1e3*f/d):void 0}}(50,250);return function(e,t){let n=0;const r=1e3/t;let i=null;return function(){const t=!0===this,s=Date.now();if(t||s-n>r)return i&&(clearTimeout(i),i=null),n=s,e.apply(null,arguments);i||(i=setTimeout((()=>(i=null,n=Date.now(),e.apply(null,arguments))),r-(s-n)))}}((n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-r,c=i(a);r=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&s<=o?(o-s)/c:void 0,event:n,lengthComputable:null!=o};u[t?"download":"upload"]=!0,e(u)}),n)},je=ue.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=M.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},Oe=ue.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];M.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),M.isString(r)&&o.push("path="+r),M.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Pe(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Re=e=>e instanceof _e?{...e}:e;function $e(e,t){t=t||{};const n={};function r(e,t,n){return M.isPlainObject(e)&&M.isPlainObject(t)?M.merge.call({caseless:n},e,t):M.isPlainObject(t)?M.merge({},t):M.isArray(t)?t.slice():t}function i(e,t,n){return M.isUndefined(t)?M.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function s(e,t){if(!M.isUndefined(t))return r(void 0,t)}function o(e,t){return M.isUndefined(t)?M.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>i(Re(e),Re(t),!0)};return M.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=c[r]||i,o=s(e[r],t[r],r);M.isUndefined(o)&&s!==a||(n[r]=o)})),n}var Ee=e=>{const t=$e({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:c}=t;if(t.headers=a=_e.from(a),t.url=ee(Pe(t.baseURL,t.url),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),M.isFormData(r))if(ue.hasStandardBrowserEnv||ue.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(ue.hasStandardBrowserEnv&&(i&&M.isFunction(i)&&(i=i(t)),i||!1!==i&&je(t.url))){const e=s&&o&&Oe.read(o);e&&a.set(s,e)}return t},xe="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=Ee(e);let i=r.data;const s=_e.from(r.headers).normalize();let o,{responseType:a}=r;function c(){r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}let u=new XMLHttpRequest;function l(){if(!u)return;const r=_e.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());Se((function(e){t(e),c()}),(function(e){n(e),c()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}u.open(r.method.toUpperCase(),r.url,!0),u.timeout=r.timeout,"onloadend"in u?u.onloadend=l:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(l)},u.onabort=function(){u&&(n(new U("Request aborted",U.ECONNABORTED,r,u)),u=null)},u.onerror=function(){n(new U("Network Error",U.ERR_NETWORK,r,u)),u=null},u.ontimeout=function(){let e=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const t=r.transitional||ne;r.timeoutErrorMessage&&(e=r.timeoutErrorMessage),n(new U(e,t.clarifyTimeoutError?U.ETIMEDOUT:U.ECONNABORTED,r,u)),u=null},void 0===i&&s.setContentType(null),"setRequestHeader"in u&&M.forEach(s.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),M.isUndefined(r.withCredentials)||(u.withCredentials=!!r.withCredentials),a&&"json"!==a&&(u.responseType=r.responseType),"function"==typeof r.onDownloadProgress&&u.addEventListener("progress",Ce(r.onDownloadProgress,!0)),"function"==typeof r.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",Ce(r.onUploadProgress)),(r.cancelToken||r.signal)&&(o=t=>{u&&(n(!t||t.type?new ke(null,e,u):t),u.abort(),u=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);f&&-1===ue.protocols.indexOf(f)?n(new U("Unsupported protocol "+f+":",U.ERR_BAD_REQUEST,e)):u.send(i||null)}))},Ie=(e,t)=>{let n,r=new AbortController;const i=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;r.abort(t instanceof U?t:new ke(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{i(new U(`timeout ${t} of ms exceeded`,U.ETIMEDOUT))}),t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e&&(e.removeEventListener?e.removeEventListener("abort",i):e.unsubscribe(i))})),e=null)};e.forEach((e=>e&&e.addEventListener&&e.addEventListener("abort",i)));const{signal:a}=r;return a.unsubscribe=o,[a,()=>{s&&clearTimeout(s),s=null}]};const Ae=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},Te=(e,t,n,r,i)=>{const s=async function*(e,t,n){for await(const r of e)yield*Ae(ArrayBuffer.isView(r)?r:await n(String(r)),t)}(e,t,i);let o=0;return new ReadableStream({type:"bytes",async pull(e){const{done:t,value:i}=await s.next();if(t)return e.close(),void r();let a=i.byteLength;n&&n(o+=a),e.enqueue(new Uint8Array(i))},cancel:e=>(r(e),s.return())},{highWaterMark:2})},De=(e,t)=>{const n=null!=e;return r=>setTimeout((()=>t({lengthComputable:n,total:e,loaded:r})))},qe="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,Ne=qe&&"function"==typeof ReadableStream,Be=qe&&("function"==typeof TextEncoder?(Le=new TextEncoder,e=>Le.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Le;const Fe=Ne&&(()=>{let e=!1;const t=new Request(ue.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})(),Me=Ne&&!!(()=>{try{return M.isReadableStream(new Response("").body)}catch(e){}})(),Ue={stream:Me&&(e=>e.body)};var ze;qe&&(ze=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Ue[e]&&(Ue[e]=M.isFunction(ze[e])?t=>t[e]():(t,n)=>{throw new U(`Response type '${e}' is not supported`,U.ERR_NOT_SUPPORT,n)})})));const Ke={http:null,xhr:xe,fetch:qe&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:c,responseType:u,headers:l,withCredentials:f="same-origin",fetchOptions:d}=Ee(e);u=u?(u+"").toLowerCase():"text";let h,p,[m,v]=i||s||o?Ie([i,s],o):[];const y=()=>{!h&&setTimeout((()=>{m&&m.unsubscribe()})),h=!0};let g;try{if(c&&Fe&&"get"!==n&&"head"!==n&&0!==(g=await(async(e,t)=>{const n=M.toFiniteNumber(e.getContentLength());return null==n?(async e=>null==e?0:M.isBlob(e)?e.size:M.isSpecCompliantForm(e)?(await new Request(e).arrayBuffer()).byteLength:M.isArrayBufferView(e)?e.byteLength:(M.isURLSearchParams(e)&&(e+=""),M.isString(e)?(await Be(e)).byteLength:void 0))(t):n})(l,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});M.isFormData(r)&&(e=n.headers.get("content-type"))&&l.setContentType(e),n.body&&(r=Te(n.body,65536,De(g,Ce(c)),null,Be))}M.isString(f)||(f=f?"cors":"omit"),p=new Request(t,{...d,signal:m,method:n.toUpperCase(),headers:l.normalize().toJSON(),body:r,duplex:"half",withCredentials:f});let i=await fetch(p);const s=Me&&("stream"===u||"response"===u);if(Me&&(a||s)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=M.toFiniteNumber(i.headers.get("content-length"));i=new Response(Te(i.body,65536,a&&De(t,Ce(a,!0)),s&&y,Be),e)}u=u||"text";let o=await Ue[M.findKey(Ue,u)||"text"](i,e);return!s&&y(),v&&v(),await new Promise(((t,n)=>{Se(t,n,{data:o,headers:_e.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:p})}))}catch(t){if(y(),t&&"TypeError"===t.name&&/fetch/i.test(t.message))throw Object.assign(new U("Network Error",U.ERR_NETWORK,e,p),{cause:t.cause||t});throw U.from(t,t&&t.code,e,p)}})};M.forEach(Ke,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const We=e=>`- ${e}`,He=e=>M.isFunction(e)||null===e||!1===e;var Je=e=>{e=M.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!He(n)&&(r=Ke[(t=String(n)).toLowerCase()],void 0===r))throw new U(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new U("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(We).join("\n"):" "+We(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function Ve(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ke(null,e)}function Ge(e){return Ve(e),e.headers=_e.from(e.headers),e.data=be.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Je(e.adapter||de.adapter)(e).then((function(t){return Ve(e),t.data=be.call(e,e.transformResponse,t),t.headers=_e.from(t.headers),t}),(function(t){return we(t)||(Ve(e),t&&t.response&&(t.response.data=be.call(e,e.transformResponse,t.response),t.response.headers=_e.from(t.response.headers))),Promise.reject(t)}))}const Qe={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Qe[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Ye={};Qe.transitional=function(e,t,n){function r(e,t){return"[Axios v1.7.2] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new U(r(i," has been removed"+(t?" in "+t:"")),U.ERR_DEPRECATED);return t&&!Ye[i]&&(Ye[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}};var Xe={assertOptions:function(e,t,n){if("object"!=typeof e)throw new U("options must be an object",U.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new U("option "+s+" must be "+n,U.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new U("Unknown option "+s,U.ERR_BAD_OPTION)}},validators:Qe};const Ze=Xe.validators;class et{constructor(e){this.defaults=e,this.interceptors={request:new te,response:new te}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=$e(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&Xe.assertOptions(n,{silentJSONParsing:Ze.transitional(Ze.boolean),forcedJSONParsing:Ze.transitional(Ze.boolean),clarifyTimeoutError:Ze.transitional(Ze.boolean)},!1),null!=r&&(M.isFunction(r)?t.paramsSerializer={serialize:r}:Xe.assertOptions(r,{encode:Ze.function,serialize:Ze.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&M.merge(i.common,i[t.method]);i&&M.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=_e.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const c=[];let u;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let l,f=0;if(!a){const e=[Ge.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,c),l=e.length,u=Promise.resolve(t);f<l;)u=u.then(e[f++],e[f++]);return u}l=o.length;let d=t;for(f=0;f<l;){const t=o[f++],n=o[f++];try{d=t(d)}catch(e){n.call(this,e);break}}try{u=Ge.call(this,d)}catch(e){return Promise.reject(e)}for(f=0,l=c.length;f<l;)u=u.then(c[f++],c[f++]);return u}getUri(e){return ee(Pe((e=$e(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}M.forEach(["delete","get","head","options"],(function(e){et.prototype[e]=function(t,n){return this.request($e(n||{},{method:e,url:t,data:(n||{}).data}))}})),M.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request($e(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}et.prototype[e]=t(),et.prototype[e+"Form"]=t(!0)}));var tt=et;class nt{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new ke(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new nt((function(t){e=t})),cancel:e}}}var rt=nt;const it={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(it).forEach((([e,t])=>{it[t]=e}));var st=it;const ot=function e(t){const n=new tt(t),i=r(tt.prototype.request,n);return M.extend(i,tt.prototype,n,{allOwnKeys:!0}),M.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e($e(t,n))},i}(de);ot.Axios=tt,ot.CanceledError=ke,ot.CancelToken=rt,ot.isCancel=we,ot.VERSION="1.7.2",ot.toFormData=G,ot.AxiosError=U,ot.Cancel=ot.CanceledError,ot.all=function(e){return Promise.all(e)},ot.spread=function(e){return function(t){return e.apply(null,t)}},ot.isAxiosError=function(e){return M.isObject(e)&&!0===e.isAxiosError},ot.mergeConfig=$e,ot.AxiosHeaders=_e,ot.formToJSON=e=>le(M.isHTMLForm(e)?new FormData(e):e),ot.getAdapter=Je,ot.HttpStatusCode=st,ot.default=ot,e.exports=ot}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var s=n[e]={exports:{}};return t[e].call(s.exports,s,s.exports,r),s.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i=r(3607);e.exports=i}()}}]);
//# sourceMappingURL=491.d5a504b3.chunk.js.map